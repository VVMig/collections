{"version":3,"sources":["components/userPicture/UserPicture.js","config.js","redux/types.js","redux/actions.js","components/layout/Header.js","components/layout/Footer.js","components/items/ItemLike.js","components/mainPicture/MainPicture.js","components/items/Item.js","components/homeSections/LastAdded.js","components/homeSections/Tags.js","components/items/HomeItem.js","components/homeSections/MostLike.js","components/spinner/Spinner.js","components/pages/Home.js","helpers/useInputValue.js","components/auth/VkAuth.js","components/auth/Login.js","components/auth/Register.js","components/fileInput/FileInput.js","components/collection/AddCollectionModal.js","components/collection/BtnAddCollection.js","components/spinner/SpinnerComponent.js","components/collection/CardCollection.js","components/collection/EditCollectionModal.js","components/collection/CollectionsItems.js","components/pages/Profile.js","components/routes/PrivateRoute.js","components/users/Users.js","components/pages/Admin.js","components/items/AddItemModal.js","components/items/AddItem.js","components/comment/Comment.js","components/comment/AddComment.js","components/items/ModalItem.js","components/items/EditItemModal.js","components/collection/Sort.js","components/collection/Filter.js","components/pages/Collection.js","components/pages/Search.js","components/alerts/AlertError.js","components/alerts/AlertStatus.js","App.js","redux/userReducer.js","redux/errorReducer.js","redux/itemReducer.js","redux/collectionReducer.js","redux/homeReducer.js","redux/searchReducer.js","redux/allCollectionsReducer.js","redux/rootReducer.js","index.js"],"names":["UserPicture","picture","name","styles","className","style","backgroundImage","API_URL","GET_USER","SET_USER","RESET_USER","IS_LOGIN","DELETE_USER","SET_ADMIN","REMOVE_ADMIN","BLOCK_USER","UNBLOCK_USER","SET_ERROR","CLEAR_ERROR","SET_ITEM","GET_ITEM","GET_COLLECTION","SORT_COLLECTION","CHANGE_ASCENDING","GET_HOME","SET_SEARCH","SWITCH_LANG","GET_ALLCOLLECTIONS","START_LOADING_PAGE","END_LOADING_PAGE","SET_NOTIFY","ERROR_CLEARALL","START_LOADING_COLLECTIONS","END_LOADING_COLLECTIONS","START_LOADING_COLLECTION","END_LOADING_COLLECTION","clearErrorAll","type","payload","error","notify","loading","setNotify","state","getAllCollections","id","dispatch","a","Axios","get","params","response","data","setError","setSearch","searchText","startLoadingPage","sessionStorage","setItem","JSON","stringify","items","endLoadingPage","getHome","firstLoad","getState","getCollection","collection","_id","setUser","user","getItem","text","message","isLogin","localStorage","resetUser","token","undefined","lang","connect","userData","props","useSelector","search","useDispatch","history","useHistory","useState","searchTextInput","setSearchTextInput","useEffect","onSearch","e","preventDefault","trim","push","to","Header","collections","data-toggle","data-target","aria-controls","aria-expanded","aria-label","home","onSubmit","value","onChange","target","placeholder","onClick","userPhoto","aria-haspopup","displayName","background","removeItem","window","location","reload","logOut","logIn","register","post","headers","ItemLike","likes","homeAction","liked","setLiked","likesNumber","setLikesNumber","itemId","console","log","usersId","findIndex","number","cursor","MainPicture","size","Item","itemProps","author","year","title","collection_id","useLocation","delete","width","height","date","Date","toLocaleDateString","pathname","userRole","owner","item","edit","SwiperCore","use","Navigation","Pagination","A11y","lastAdded","like","useCallback","length","navigation","pagination","clickable","spaceBetween","slidesPerView","breakpoints","576","768","1200","map","i","Scrollbar","tags","scrollbar","draggable","992","tag","useRef","mostLike","HomeItem","Spinner","role","interval","setInterval","clearInterval","useInputValue","field","setValue","bind","event","required","clear","btn","backgroundColor","display","alignItems","color","boxShadow","padding","borderRadius","border","fontSize","fontWeight","fontFamily","div","span","VkAuth","checkLoginState","setState","isProcessing","callback","handleClick","isLoaded","disabled","VK","Auth","login","this","sdkLoaded","asyncInit","loadSdkAsync","apiId","vkAsyncInit","init","el","document","createElement","src","async","getElementsByTagName","appendChild","buttonProps","containerStyle","Component","email","password","remember","createRef","errorLoading","setErrorLoading","errorMessage","setErrorMessage","resGoogle","resVk","idToken","tokenId","checked","vkId","session","first_name","last_name","signIn","htmlFor","emailAdress","autoFocus","ref","rememberMe","clientId","buttonText","onSuccess","passwordCheck","Register","signUp","emailAddress","passwordConfirm","FileInput","setPicture","onDrop","acceptedFiles","forEach","file","reader","FileReader","readAsDataURL","onload","result","useDropzone","maxFiles","accept","getRootProps","getInputProps","isDragActive","dragAndDrop","alt","AddCollectionModal","setTitle","topic","setTopic","description","setDescription","setAuthor","comments","setComments","setYear","URLSearchParams","tabIndex","aria-labelledby","aria-hidden","position","collectionSettings","data-dismiss","aria-describedby","defaultChecked","close","save","BtnAddCollection","SpinnerComponent","CollectionsItems","source","CollectionCard","explore","closeModal","current","click","allCollections","CardCollection","userProfile","setUserProfile","getProfileData","gap","parseFloat","registerDate","component","rest","render","nextPathname","users","setUsers","flack","setFlack","actionsUsers","setActionsUsers","keys","sort","key","b","compare","slice","setTimeout","blur","action","deleteUser","setAdmin","err","removeAdmin","blockUser","unblockUser","getUsers","marginBottom","readOnly","filter","userForAction","ind","Admin","permission","baseTagifySettings","blacklist","maxTags","dropdown","enabled","AddItemModal","tagifyRef","itemAuthor","setItemAuthor","itemDate","setItemDate","tagifySettings","tagifyProps","setTagifyProps","fetchItems","lastProps","whitelist","getTags","settings","itemSettings","valueAsNumber","addItem","AddItem","card","Comment","userId","comment","modal","userName","commentId","textDecoration","AddComment","commentBtn","setComment","addComment","collectionId","leaveComment","maxLength","onKeyPress","code","shiftKey","item_id","$","on","ModalItem","EditItemModal","Object","toISOString","substr","saveItem","Sort","sortOptions","selectedSort","setSelectedSort","toLowerCase","ascending","Filter","setFilter","pictureCheck","dateFrom","dateTo","defaultValue","apply","clearObj","reset","RegExp","match","AlertError","AlertStatus","loadingCollection","userRes","exact","path","Home","Login","Profile","Collection","Search","initialState","parse","rootReducer","combineReducers","store","createStore","compose","applyMiddleware","thunk","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a3efa1bd.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport './UserPicture.css'\r\n\r\nfunction UserPicture({ picture, name, styles }) {\r\n\r\n    return (\r\n        <>\r\n            {picture ? \r\n                <div className=\"user-picture\" style={{backgroundImage: `url(${picture})`, ...styles}}></div> :\r\n                name && <div className=\"user-picture text-uppercase\" style={{...styles}}>{name[0]}</div>\r\n            } \r\n        </>                                   \r\n    )\r\n}\r\n\r\nexport default UserPicture","export const API_URL = 'https://collections-itransition.herokuapp.com/'","export const GET_USER = 'GET_USER'\r\n\r\nexport const SET_USER = 'SET_USER'\r\n\r\nexport const RESET_USER = 'RESET_USER'\r\n\r\nexport const GET_GOOGLE_USER = 'GET_GOOGLE_USER'\r\n\r\nexport const IS_LOGIN = 'IS_LOGIN'\r\n\r\nexport const DELETE_USER = 'DELETE_USER'\r\n\r\nexport const SET_ADMIN = 'SET_ADMIN'\r\n\r\nexport const REMOVE_ADMIN = 'REMOVE_ADMIN'\r\n\r\nexport const BLOCK_USER = 'BLOCK_USER'\r\n\r\nexport const UNBLOCK_USER = 'UNBLOCK_USER'\r\n\r\nexport const SET_ERROR = 'SET_ERROR'\r\n\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\r\n\r\nexport const SET_ITEM = 'SET_ITEM'\r\n\r\nexport const GET_ITEM = 'GET_ITEM'\r\n\r\nexport const GET_COLLECTION = 'GET_COLLECTION'\r\n\r\nexport const SORT_COLLECTION = 'SORT_COLLECTION'\r\n\r\nexport const CHANGE_ASCENDING = 'CHANGE_ASCENDING'\r\n\r\nexport const GET_HOME = 'GET_HOME'\r\n\r\nexport const SET_SEARCH = 'SET_SEARCH'\r\n\r\nexport const SWITCH_LANG = 'SWITCH_LANG'\r\n\r\nexport const GET_ALLCOLLECTIONS = 'GET_ALLCOLLECTIONS'\r\n\r\nexport const START_LOADING_PAGE = 'START_LOADING_PAGE'\r\n\r\nexport const END_LOADING_PAGE = 'END_LOADING_PAGE'\r\n\r\nexport const SET_NOTIFY = 'SET_NOTIFY'\r\n\r\nexport const ERROR_CLEARALL = 'ERROR_CLEARALL'\r\n\r\nexport const START_LOADING_COLLECTIONS = 'START_LOADING_COLLECTIONS' \r\n\r\nexport const END_LOADING_COLLECTIONS = 'END_LOADING_COLLECTIONS' \r\n\r\nexport const START_LOADING_COLLECTION = 'START_LOADING_COLLECTION' \r\n\r\nexport const END_LOADING_COLLECTION = 'END_LOADING_COLLECTION' ","import Axios from 'axios'\r\nimport { API_URL } from '../config'\r\n\r\nimport { GET_USER, SET_USER, RESET_USER, SET_ERROR, DELETE_USER, \r\n    SET_ADMIN, REMOVE_ADMIN, BLOCK_USER, UNBLOCK_USER, \r\n    CLEAR_ERROR, SET_ITEM, GET_COLLECTION, GET_ITEM, SORT_COLLECTION, \r\n    GET_HOME, SET_SEARCH, SWITCH_LANG, GET_ALLCOLLECTIONS, START_LOADING_PAGE, \r\n    END_LOADING_PAGE, ERROR_CLEARALL, SET_NOTIFY, START_LOADING_COLLECTIONS, END_LOADING_COLLECTIONS } from \"./types\";\r\n\r\n\r\nexport function clearErrorAll() {\r\n    return {\r\n        type: ERROR_CLEARALL,\r\n        payload: {\r\n            error: '',\r\n            notify: false,\r\n            loading: false\r\n        }\r\n    }        \r\n}\r\n\r\nexport function setNotify(state) {\r\n    return {\r\n        type: SET_NOTIFY,\r\n        payload: state\r\n    }\r\n}\r\n\r\nexport function getAllCollections(id) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({type: START_LOADING_COLLECTIONS})\r\n            const response = await Axios.get(`${API_URL}/api/collections/`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n            dispatch({\r\n                type: GET_ALLCOLLECTIONS,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({type: END_LOADING_COLLECTIONS})\r\n        }\r\n    }\r\n}\r\n\r\nexport function switchLang(lang) {\r\n    return async (dispatch, getState) => {\r\n        const token = getState().userData.userData.token\r\n\r\n        if(!token) {\r\n            dispatch({\r\n                type: SWITCH_LANG,\r\n                payload: lang\r\n            })\r\n\r\n            localStorage.setItem('lang', lang)\r\n        }\r\n\r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/switchLang`, {\r\n                lang\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': token\r\n                }\r\n            })\r\n    \r\n            dispatch({\r\n                type: SWITCH_LANG,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function setSearch(searchText) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(startLoadingPage())\r\n\r\n            const response = await Axios.get(`${API_URL}/api/item/search`, {\r\n                params: {\r\n                    searchText\r\n                }\r\n            })\r\n\r\n            sessionStorage.setItem('search-items', JSON.stringify(response.data))\r\n            sessionStorage.setItem('search-text', searchText)\r\n\r\n            dispatch({\r\n                type: SET_SEARCH,\r\n                payload: {\r\n                    items: response.data,\r\n                    searchText\r\n                }\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function getHome(firstLoad) {\r\n    return async (dispatch, getState) => {\r\n        if(firstLoad)\r\n            dispatch(startLoadingPage())\r\n        try {\r\n            if(getState().error.error) {\r\n                return\r\n            }\r\n\r\n            const response = await Axios.get(`${API_URL}/api/user/home`)\r\n\r\n            dispatch({\r\n                type: GET_HOME,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            if(firstLoad)\r\n                dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function sortCollection(key) {\r\n    return {\r\n        type: SORT_COLLECTION,\r\n        payload: key\r\n    }\r\n}\r\n\r\nexport function getCollection(id) {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            if(getState().error.error) {\r\n                return\r\n            }\r\n\r\n            if(!getState().collection.collection.collection) {\r\n                dispatch(startLoadingPage()) \r\n            } else if(getState().collection.collection.collection._id !== id) {\r\n                dispatch(startLoadingPage()) \r\n            }           \r\n\r\n            const response = await Axios.get(`${API_URL}/api/collections/collection`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_COLLECTION,\r\n                payload: response.data\r\n            })            \r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function setUser(user) {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: SET_USER,\r\n            payload: user\r\n        })\r\n    }\r\n}\r\n\r\nexport function setItem(item) {\r\n    return {\r\n        type: SET_ITEM,\r\n        payload: item\r\n    }\r\n}\r\n\r\nexport function getItem(id) {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get(`${API_URL}/api/item/`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_ITEM,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n}\r\n\r\nexport function blockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/block`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: BLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: BLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function deleteUser(token, users) {\r\n    return async dispatch => {\r\n        users.forEach(async (id) => {\r\n            try {\r\n                await Axios.delete(`${API_URL}/api/user/delete`, {\r\n                    params: {\r\n                        id\r\n                    },\r\n                    headers: {\r\n                        'x-auth-token': token        \r\n                        }\r\n                    }\r\n                )\r\n                \r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: DELETE_USER\r\n                })\r\n            }\r\n        })\r\n        \r\n        dispatch({\r\n            type: DELETE_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setAdmin(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/setAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: SET_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: SET_ADMIN\r\n        })\r\n    }\r\n}\r\n\r\nexport function unblockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/unblock`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: UNBLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: UNBLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setError(error) {\r\n    let text = ''\r\n\r\n    if(error.response) {\r\n        text = error.response.data.message || error.response.data.error.message\r\n    }\r\n    else text = 'Connection error. Please try again later:('\r\n\r\n    return {\r\n        type: SET_ERROR,\r\n        payload: text\r\n    }\r\n}\r\n\r\nexport function clearError() {\r\n    return {\r\n            type: CLEAR_ERROR,\r\n            payload: ''\r\n        }\r\n}\r\n\r\nexport function startLoadingPage() {\r\n    return {\r\n        type: START_LOADING_PAGE\r\n    }\r\n}\r\n\r\nexport function endLoadingPage() {\r\n    return {\r\n        type: END_LOADING_PAGE\r\n    }\r\n}\r\n\r\nexport function removeAdmin(token, users, err) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/removeAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: REMOVE_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: REMOVE_ADMIN,\r\n        })\r\n    }\r\n}\r\n\r\nexport function isLogin() {\r\n    return localStorage.getItem('token') || sessionStorage.getItem('token')\r\n}\r\n\r\nexport function resetUser() {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: RESET_USER,\r\n            payload: {\r\n                token: undefined,\r\n                user: {\r\n                    lang: 'en'\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function getUser() {\r\n    return async dispatch => {\r\n        const token = localStorage.getItem('token') || sessionStorage.getItem('token')\r\n\r\n        if(!token){\r\n            resetUser()\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const tokenRes = await Axios.post(\r\n            `${API_URL}/api/user/verifyToken`,\r\n            null,\r\n            { headers: { \"x-auth-token\": token } }\r\n            )\r\n\r\n            if (tokenRes.data) {\r\n            const userRes = await Axios.get(`${API_URL}/api/user/`, {\r\n                headers: { \"x-auth-token\": token },\r\n            });\r\n            \r\n            dispatch({ \r\n                type: GET_USER,\r\n                payload: {\r\n                    token,\r\n                    user: userRes.data\r\n                }\r\n            })\r\n            }\r\n        } catch (error) {\r\n            dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n        }\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\nimport { isLogin, resetUser, setSearch } from '../../redux/actions'\r\n\r\nimport './Header.scss'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Header(props){\r\n    const { userData } = props\r\n    const { searchText } = useSelector(state => state.search)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const [searchTextInput, setSearchTextInput] = useState(searchText)\r\n\r\n    useEffect(() => {\r\n        setSearchTextInput(searchText)\r\n    }, [searchText])\r\n\r\n    const logout = () => {\r\n        dispatch(resetUser())    \r\n\r\n        localStorage.removeItem('token')\r\n        sessionStorage.removeItem('token')\r\n\r\n        window.location.reload()\r\n    }\r\n\r\n    const onSearch = (e) => {\r\n        e.preventDefault()\r\n\r\n        if(searchTextInput.trim()) {\r\n            dispatch(setSearch(searchTextInput))\r\n        }\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <nav className=\"navbar navbar-expand-md navbar-light bg-light\">\r\n                <Link className=\"navbar-brand\" to=\"/\">{lang.Header.collections[userData.user.lang]}</Link>\r\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarsExample02\" aria-controls=\"navbarsExample02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span className=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n\r\n                <div className=\"collapse navbar-collapse\" id=\"navbarsExample02\">\r\n                    <ul className=\"navbar-nav mr-auto\">\r\n                        <li className=\"nav-item active\">\r\n                            <Link className=\"nav-link\" to=\"/\">{lang.Header.home[userData.user.lang]}</Link>\r\n                        </li>\r\n                    </ul>\r\n                    <form className=\"form-inline\" id=\"item-search\" onSubmit={onSearch}>\r\n                        <input className=\"form-control w-100\" value={searchTextInput} onChange={(e) => setSearchTextInput(e.target.value)} type=\"text\" placeholder=\"Search\"/>\r\n                        <span onClick={onSearch}><Icon.Search/></span>\r\n                    </form>\r\n                    {!dispatch(isLogin) && !userData.token?\r\n                    <div className=\"d-flex flex-column ml-md-3 align-items-md-center\">\r\n                        <Link to=\"/login\">{lang.Header.logIn[userData.user.lang]}</Link>\r\n                        <Link to=\"/register\">{lang.Header.register[userData.user.lang]}</Link>\r\n                    </div> :\r\n                    <div className=\"flex-column ml-md-3 mt-1 mt-md-0 avatar\">\r\n                        <div className=\"btn-group\">\r\n                            {userData.token ? <button type=\"button\" className={`btn dropdown-toggle bg-dark${!userData.user.userPhoto && ' text-light'}`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                            </button> :\r\n                            <button type=\"button\" className={`btn dropdown-toggle`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <div style={{background: 'grey'}}></div>\r\n                            </button>}\r\n                            <div className=\"dropdown-menu dropdown-menu-md-right\">\r\n                                {userData.user && <button className=\"dropdown-item\" onClick={() => history.push(`/profile?id=${userData.user.id}`)}>{userData.user.displayName}</button>}\r\n                                <button className=\"dropdown-item\" onClick={() => logout()}>{lang.Header.logOut[userData.user.lang]}</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    }\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Header)","import React from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport { switchLang } from '../../redux/actions'\r\n\r\nimport './Footer.scss'\r\n\r\nfunction Footer(props) {\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <footer className=\"footer py-3 bg-light mt-3\">\r\n            <div className=\"container d-flex justify-content-end\">\r\n                <select className=\"form-control select-lang\" value={props.userData.user.lang} onChange={(e) => dispatch(switchLang(e.target.value))}>\r\n                    <option value=\"ru\">ru</option>\r\n                    <option value=\"en\">en</option>\r\n                </select>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Footer)","import React, { useState, useEffect } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\nimport Axios from 'axios'\r\nimport { getCollection, getItem } from '../../redux/actions'\r\nimport { API_URL } from '../../config'\r\n\r\nfunction ItemLike({ likes, id, homeAction }) {\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const [liked, setLiked] = useState(false)\r\n    const [likesNumber, setLikesNumber] = useState(0)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        setLiked((userData.user && likes.usersId.findIndex(e => e === `${userData.user.id}`)) >= 0)\r\n        setLikesNumber(likes.number)\r\n    }, [likes, userData])\r\n\r\n    async function toggleLike() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/like`, {\r\n                itemId: id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            if(typeof homeAction === 'function') {\r\n                homeAction()\r\n            }  \r\n            else {\r\n                dispatch(getCollection(collection._id))\r\n                dispatch(getItem(id))\r\n            }\r\n     \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <span onClick={toggleLike} style={{cursor: 'pointer'}} className=\"ml-auto\">\r\n                {liked ? \r\n                <Icon.HeartFill className=\"item-liked\"/>\r\n                : <Icon.Heart className=\"item-unliked\"/>} {likesNumber}\r\n            </span>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ItemLike","import React from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './MainPicture.scss'\r\n\r\nfunction MainPicture({ picture, className, styles }) {\r\n    return (\r\n        <div className={className}>\r\n            {picture ? \r\n            <div className=\"main-picture\" style={{backgroundImage: `url(${picture})`, ...styles}}>\r\n            </div>:\r\n            <div className=\"main-picture\"  style={styles}>\r\n                <Icon.Image size={30}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MainPicture","import React, { useRef } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport $ from 'jquery'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\nimport Axios from 'axios'\r\nimport Like from './ItemLike'\r\nimport MainPicture from '../mainPicture/MainPicture'\r\n\r\nimport { clearErrorAll, getCollection, getItem, setError, setItem, setNotify } from '../../redux/actions'\r\nimport { useHistory } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport { API_URL } from '../../config'\r\n\r\nimport './Item.scss'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Item(props) {\r\n    const { author, year, title, _id, picture, collection_id } = props.itemProps\r\n    const likes = props.itemProps.likes\r\n    const { homeAction } = props\r\n\r\n    const location = useLocation()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function toCollection(e) {\r\n        history.push(`/collection?collection_id=${collection_id}&item_id=${_id}`)\r\n    }\r\n\r\n    async function deleteItem() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch(setNotify(true))\r\n            await Axios.delete(`${API_URL}/api/item/delete`, {\r\n                params: {\r\n                    id: _id,\r\n                    collection_id\r\n                },\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getCollection(collection_id))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card border item\" \r\n            style={{width: '12rem'}}\r\n            >\r\n                <MainPicture picture={picture} title={title} styles={{height: 100}} className=\"card-img-top\"/>\r\n                <div className=\"card-body\" onClick={(e) => toCollection(e)} style={{cursor: 'pointer'}}>\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <ul className=\"list-group list-group-flush\">\r\n                        {author &&\r\n                        <li className=\"list-group-item\">{lang.Item.author[userData.user.lang]}: {author}</li>}\r\n                        {year && \r\n                        <li className=\"list-group-item\">{lang.Item.date[userData.user.lang]}: {new Date(year).toLocaleDateString()}</li>}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"d-flex card-footer\">\r\n                    {location.pathname === '/collection' \r\n                    && (userData.user.userRole === 'admin' || collection.owner === userData.user.id) &&\r\n                    <>\r\n                        <span \r\n                            style={{cursor: 'pointer'}}\r\n                            data-toggle=\"modal\"\r\n                            data-target=\"#editItem\"\r\n                            onClick={(e) => {\r\n                                dispatch(setItem({...props.itemProps}))                           \r\n                            }}\r\n                        >\r\n                            {lang.Item.edit[userData.user.lang]}\r\n                        </span>\r\n                        <span className=\"ml-1\" style={{cursor: 'pointer'}} onClick={deleteItem}>\r\n                            <Icon.TrashFill className=\"text-danger\"/>\r\n                        </span>\r\n                    </>\r\n                    }\r\n                    <Like likes={likes} id={_id} homeAction={homeAction}/>\r\n                </div>\r\n            </div>      \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport './Slider.scss'\r\n\r\nimport Item from '../items/Item'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction LastAdded({ lastAdded }){\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex justify-content-center pb-5 pt-5\">\r\n                <Item itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {lastAdded.length > 0 && \r\n            <>\r\n                <h2>Last added</h2>\r\n                <Swiper\r\n                navigation\r\n                pagination={{ clickable: true }}\r\n                spaceBetween={50}\r\n                slidesPerView={1}\r\n                breakpoints={{\r\n                    576: {\r\n                        slidesPerView: 2\r\n                    },\r\n                    768: {\r\n                        slidesPerView: 3\r\n                    },\r\n                    1200: {\r\n                        slidesPerView: 4\r\n                    }\r\n                }}\r\n                >\r\n                    {lastAdded.map(carouselItem)}\r\n                </Swiper>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(LastAdded)","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Scrollbar } from 'swiper';\r\n\r\nimport './Tags.scss'\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\nimport { setSearch } from '../../redux/actions';\r\n\r\nSwiperCore.use([Scrollbar]);\r\n\r\nfunction Tags({ tags }){\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function searchTag(tag){\r\n        dispatch(setSearch(tag))\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} onClick={() => searchTag(e.text)}>\r\n                <div className=\"border text-center rounded bg-light text-dark tag\" style={{cursor: 'pointer'}}>\r\n                    {e.text}\r\n                </div>        \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-2 mb-2\">\r\n            {tags.length > 0 &&\r\n            <Swiper\r\n            spaceBetween={50}\r\n            slidesPerView={2}\r\n            scrollbar={{ draggable: true }}\r\n            className=\"d-flex justify-content-center pb-3\"\r\n            breakpoints={{\r\n                576: {\r\n                    slidesPerView: 4\r\n                },\r\n                768: {\r\n                    slidesPerView: 5\r\n                },\r\n                992: {\r\n                    slidesPerView: 6\r\n                },\r\n                1200: {\r\n                    slidesPerView: 8\r\n                }\r\n            }}\r\n            >\r\n                {tags.map(carouselItem)}\r\n            </Swiper>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(Tags)","import React, { useRef } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport $ from 'jquery'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\n\r\nimport Like from './ItemLike'\r\nimport MainPicture from '../mainPicture/MainPicture'\r\n\r\nimport { getItem, setItem } from '../../redux/actions'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Item(props) {\r\n    const { author, year, title, _id, picture, collection_id } = props.itemProps\r\n    const likes = props.itemProps.likes\r\n    const { homeAction } = props\r\n\r\n    const location = useLocation()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const card = useRef()\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function hover() {\r\n        $(card.current).toggleClass('border-primary')\r\n    }\r\n\r\n    function toCollection(e) {\r\n        dispatch(getItem(_id))\r\n\r\n        history.push(`/collection?collection_id=${collection_id}`)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"row w-100 justify-content-center\">\r\n                <div className=\"d-flex row col-8 bg-light border rounded\">\r\n                    <div className=\"d-flex flex-column col-md-6 justify-content-between p-2 order-md-1 order-2\">\r\n                        <div className=\"d-flex flex-column text-center\">\r\n                            <h4>{title}</h4>\r\n                            <div className=\"text-left mt-3\">\r\n                                <ul className=\"list-group\">\r\n                                    {author && <li className=\"list-group-item\">Author: {author}</li>}\r\n                                    {year && <li className=\"list-group-item\">Date: {new Date(year).toLocaleDateString()}</li>}\r\n                                </ul>\r\n                            </div>   \r\n                        </div>\r\n                        <div className=\"d-flex justify-content-between mt-1\">\r\n                            <button className=\"btn btn-primary\" onClick={toCollection}>View item</button>\r\n                            <Like likes={likes} id={_id}/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 p-2 p-md-0 order-1 order-md-2\">\r\n                        <MainPicture picture={picture}/>\r\n                    </div>\r\n                </div>\r\n            </div>     \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport HomeItem from '../items/HomeItem'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction MostLike({ mostLike }){\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex pb-5 pt-5 justify-content-center\">\r\n                <HomeItem itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {mostLike.length > 0 && \r\n            <>\r\n            <h2>Most like</h2>\r\n            <Swiper\r\n            navigation\r\n            pagination={{ clickable: true }}\r\n            spaceBetween={50}\r\n            slidesPerView={1}\r\n            >\r\n                {mostLike.map(carouselItem)}\r\n            </Swiper>\r\n        </>    \r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(MostLike)","import React from 'react'\r\nimport './Spinner.scss'\r\n\r\nfunction Spinner(){\r\n    return (\r\n        <div className=\"spinner d-flex w-100 justify-content-center align-items-center\">\r\n            <div className=\"spinner-grow text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner","import React, { useCallback, useEffect } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { clearErrorAll, getHome, startLoading } from '../../redux/actions'\r\n\r\nimport LastAdded from '../homeSections/LastAdded'\r\nimport Tags from '../homeSections/Tags'\r\nimport MostLike from '../homeSections/MostLike'\r\n\r\nimport lang from '../../lang.json'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nfunction Home(props){\r\n    const { loading } = useSelector(state => state.error)\r\n    const home = useSelector(state => state.home)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(clearErrorAll())\r\n        dispatch(getHome(true))\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            dispatch(getHome())\r\n        }, 2000)\r\n        \r\n        return () => clearInterval(interval)\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {!loading &&\r\n            <>\r\n                <Tags/>\r\n                <div className=\"row text-center\">\r\n                    <div className=\"col-12\">\r\n                        <LastAdded/>\r\n                    </div>\r\n                    <div className=\"col-12 most-like\">\r\n                        <MostLike/>\r\n                    </div>\r\n                </div>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Home)","import { useState } from 'react'\r\n\r\nexport default function useInputValue(field, placeholder, name, style){\r\n    const [value, setValue] = useState('');\r\n\r\n    return {\r\n        bind: {\r\n            value,\r\n            type: field,\r\n            style,\r\n            id: `${name || field}Input`,\r\n            className: 'form-control mb-2',\r\n            placeholder: placeholder || field,\r\n            name: name || field,\r\n            onChange: event => setValue(event.target.value),\r\n            required: true\r\n        },\r\n        clear: () => setValue(''),\r\n        value: () => value\r\n    }\r\n}","import React, { Component } from 'react';\r\n\r\nimport Icon24LogoVK from '@vkontakte/icons/dist/24/logo_vk_color';\r\n\r\nconst styles = {\r\n    btn: {\r\n        backgroundColor: 'rgb(255, 255, 255)',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        color: 'rgba(0, 0, 0, 0.54)',\r\n        boxShadow: 'rgba(0, 0, 0, 0.24) 0px 2px 2px 0px, rgba(0, 0, 0, 0.24) 0px 0px 1px 0px',\r\n        padding: 0,\r\n        borderRadius: 2,\r\n        border: '1px solid transparent',\r\n        fontSize: 14,\r\n        fontWeight: 500,\r\n        fontFamily: 'Roboto, sans-serif'\r\n    },\r\n    div: {\r\n        background: 'rgb(255, 255, 255)',\r\n        padding: 10,\r\n        borderRadius: 2\r\n    },\r\n    span: {\r\n        padding: '10px 10px 10px 0px',\r\n        fontWeight: 500\r\n    }\r\n}\r\n\r\nexport default class VkAuth extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isLoaded: false,\r\n            isProcessing: false,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.sdkLoaded();\r\n        this.asyncInit();\r\n        this.loadSdkAsync();\r\n    }\r\n\r\n    asyncInit() {\r\n        const { apiId } = this.props;\r\n        window.vkAsyncInit = () => {\r\n        window.VK.init({ apiId });\r\n        this.setState({ isLoaded: true });\r\n        };\r\n    }\r\n\r\n    sdkLoaded() {\r\n        this.setState({ isLoaded: true });\r\n    }\r\n\r\n    loadSdkAsync() {\r\n        const el = document.createElement('script');\r\n        el.type = 'text/javascript';\r\n        el.src = 'https://vk.com/js/api/openapi.js?';\r\n        el.async = true;\r\n        el.id = 'vk-sdk';\r\n        document.getElementsByTagName('head')[0].appendChild(el);\r\n    }\r\n\r\n    checkLoginState = (response) => {\r\n        this.setState({ isProcessing: false });\r\n\r\n        this.props.callback(response);\r\n    };\r\n\r\n    handleClick = () => {\r\n        if (!this.state.isLoaded || this.state.isProcessing || this.props.disabled) {\r\n        return;\r\n        }\r\n        this.setState({ isProcessing: true });\r\n        window.VK.Auth.login(this.checkLoginState);\r\n    };\r\n\r\n    render() {\r\n        const { disabled, callback, apiId, containerStyle, ...buttonProps } = this.props;\r\n        return (\r\n        <button\r\n            {...buttonProps}\r\n            onClick={this.handleClick}\r\n            style={styles.btn}>\r\n            <div style={styles.div}>    \r\n                <Icon24LogoVK height={18}/>\r\n            </div>\r\n            <span style={styles.span}>\r\n                Login\r\n            </span>\r\n        </button >\r\n        );\r\n    }\r\n}","import React, { createRef, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { GoogleLogin } from 'react-google-login'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\n\r\nimport VkAuth from './VkAuth';\r\nimport { setUser } from '../../redux/actions'\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Login(props) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password')\r\n    const remember = createRef(false)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token) \r\n        history.push('/')\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && resVk.session && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n        \r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/login`, {email: email.value(), password: password.value(), idToken, vkId})\r\n             dispatch(setUser((response.data))) \r\n             if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n             history.push('/')\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">      \r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"form-signin\" onSubmit={(e) => login(e)}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">{lang.logIn.signIn[userData.user.lang]}</h1>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">{lang.logIn.emailAdress[userData.user.lang]}</label>\r\n                        <input {...email.bind} autoFocus/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">{lang.logIn.password[userData.user.lang]}</label>\r\n                        <input {...password.bind}/>\r\n                        <div className=\"checkbox mb-3\">\r\n                            <label>\r\n                                <input type=\"checkbox\" value=\"remember-me\" ref={remember}/> {lang.logIn.rememberMe[userData.user.lang]}\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">{lang.logIn.signIn[userData.user.lang]}</button>\r\n                    </form>       \r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Login);","import React, { useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { GoogleLogin } from 'react-google-login'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\nimport { setUser } from '../../redux/actions'\r\nimport VkAuth from './VkAuth'\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Register(props) {\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password', 'Password')\r\n    const passwordCheck = useInputValue('password', 'Confirm password', 'passwordCheck')\r\n    const name = useInputValue('text', 'Name', 'displayName')\r\n    const history = useHistory();\r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token)\r\n        history.push('/')\r\n\r\n    async function register(e) {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n            await Axios.post(`${API_URL}/api/user/register`, {\r\n                displayName: name.value(),\r\n                email: email.value(), \r\n                password: password.value(),\r\n                passwordCheck: passwordCheck.value(),\r\n            })\r\n    \r\n            history.push('/login')        \r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response.data.error.message)\r\n        }\r\n    }\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n\r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/login`, {email: email.value(), password: password.value(), idToken, vkId})\r\n\r\n            dispatch(setUser((response.data))) \r\n\r\n            if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n\r\n            history.push('/')\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">\r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"needs-validation\" onSubmit={register}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">{lang.Register.signUp[userData.user.lang]}</h1>\r\n                        <div>\r\n                            <label htmlFor=\"namelInput\" className=\"sr-only\">{lang.Register.name[userData.user.lang]}</label>\r\n                            <input {...name.bind} autoFocus/>\r\n                        </div>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">{lang.Register.emailAddress[userData.user.lang]}</label>\r\n                        <input {...email.bind}/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">{lang.Register.password[userData.user.lang]}</label>\r\n                        <input {...password.bind}/>\r\n                        <label htmlFor=\"passwordCheckInput\" className=\"sr-only\">{lang.Register.passwordConfirm[userData.user.lang]}</label>\r\n                        <input {...passwordCheck.bind}/>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">{lang.Register.signUp[userData.user.lang]}</button>\r\n                    </form>\r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Register);","import React, { useCallback } from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './FileInput.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction FileInput({ picture, setPicture }) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const onDrop = useCallback((acceptedFiles) => {\r\n        acceptedFiles.forEach((file) => {\r\n            const reader = new FileReader()          \r\n\r\n            reader.readAsDataURL(file)\r\n\r\n            reader.onload = () => {\r\n                setPicture(reader.result)\r\n            }\r\n        })\r\n        \r\n    }, [setPicture])\r\n\r\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({maxFiles: 1, accept: 'image/jpeg, image/png', onDrop});\r\n    \r\n    return (\r\n        <div className=\"d-flex flex-column w-100\">   \r\n            <div {...getRootProps()} \r\n            className=\"d-flex justify-content-center align-items-center border border-primary w-100 p-3 rounded  drag-zone\"\r\n            style={{height: `${isDragActive ? 70 : 50}px`}}>\r\n                <input {...getInputProps()} />\r\n                <span className=\"text-primary\">{isDragActive ? \r\n                <Icon.Upload size={30}/> :\r\n                lang.FileInput.dragAndDrop[userData.user.lang]}</span>\r\n            </div>\r\n            {picture && \r\n            <aside className=\"mt-1\">\r\n                <h5>Preview</h5>\r\n                <img src={picture} className=\"img-fluid rounded\" width=\"100\" alt=\"example\"/>\r\n            </aside>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileInput","import React, { useState } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\nimport { setError, endLoadingPage, startLoadingPage, setNotify, clearErrorAll, getAllCollections } from '../../redux/actions'\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddCollectionModal.css'\r\nimport { START_LOADING_COLLECTION, END_LOADING_COLLECTION } from '../../redux/types'\r\n\r\n\r\nfunction AddCollectionModal(params) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const location = useLocation()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [topic, setTopic] = useState('Books')\r\n    const [description, setDescription] = useState('')\r\n    const [author, setAuthor] = useState(false)\r\n    const [comments, setComments] = useState(true)\r\n    const [year, setYear] = useState(false)\r\n    const [picture, setPicture] = useState('')\r\n \r\n    console.log('Add: ' + author);\r\n\r\n    const id = new URLSearchParams(location.search).get('id')\r\n\r\n    async function addCollection() {\r\n        dispatch(clearErrorAll())\r\n        dispatch({\r\n            type: START_LOADING_COLLECTION\r\n        })\r\n        dispatch(setNotify(true))\r\n        try {  \r\n            await Axios.post(`${API_URL}/api/collections/upload`, {\r\n                owner: id,\r\n                title,\r\n                topic,\r\n                description,\r\n                author,\r\n                comments,\r\n                year,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })  \r\n            \r\n            setPicture('')\r\n            setAuthor(false)\r\n            setComments(true)\r\n            setTopic('Books')\r\n            setTitle('')\r\n            setYear(false)\r\n            setDescription('')\r\n\r\n            dispatch(getAllCollections(id))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({\r\n                type: END_LOADING_COLLECTION\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>  \r\n            <div className=\"modal fade\" id=\"addCollection\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>   \r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddCollectionModal.collectionSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddCollectionModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} className=\"form-control\" placeholder={lang.AddCollectionModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">{lang.AddCollectionModal.topic[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <select className=\"custom-select\" value={topic} id=\"inputGroupSelect01\" onChange={(e) => setTopic(e.target.value)}>\r\n                                        <option value=\"Books\">Books</option>\r\n                                        <option value=\"Alcohol\">Alcohol</option>\r\n                                        <option value=\"CS:GO Skins\">CS:GO Skins</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddCollectionModal.description[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <textarea className=\"form-control\" value={description} onChange={(e) => setDescription(e.target.value)} aria-label=\"With textarea\"></textarea>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={comments} onChange={(e) => setComments(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddCollectionModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={author} onChange={(e) => setAuthor(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddCollectionModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input defaultChecked={year} onChange={(e) => setYear(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddCollectionModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddCollectionModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={addCollection}>{lang.AddCollectionModal.save[userData.user.lang]}</button>\r\n                            </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddCollectionModal","import React from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport Modal from './AddCollectionModal'\r\n\r\nimport './BtnAddCollection.scss'\r\n\r\nfunction BtnAddCollection({ styles }) {\r\n    return (\r\n        <>\r\n            <div className=\"card add-collection bg-light text-primary\" data-toggle=\"modal\" data-target=\"#addCollection\" style={{width: '12rem', ...styles}}>\r\n                <div className=\"card-body d-flex justify-content-center align-items-center\" style={{height: '15rem'}}>\r\n                    <span><Icon.PlusCircle height={'50px'} width={'50px'}/></span>\r\n                </div>\r\n            </div>\r\n\r\n            <Modal/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BtnAddCollection","import React from 'react'\r\n\r\nexport default function SpinnerComponent() {\r\n    return (\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n        </div> \r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport MainPicture from '../mainPicture/MainPicture'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\nimport { clearErrorAll, endLoadingPage, getAllCollections, getCollection, setError, setNotify, startLoadingPage } from '../../redux/actions'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { title, topic, description, picture, _id, owner } = props \r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()\r\n\r\n    function editCollection() {\r\n        dispatch(getCollection(_id))\r\n    }\r\n\r\n    async function deleteCollection() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch(startLoadingPage())\r\n            dispatch(setNotify(true))\r\n            await Axios.delete(`${API_URL}/api/collections/delete`, {\r\n                params: {\r\n                    id: _id\r\n                },\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getAllCollections(owner))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card\">\r\n                <MainPicture picture={picture} />\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <h6 className=\"card-subtitle mb-2 text-muted\">{topic}</h6>\r\n                    <ReactMarkdown source={description}/>\r\n                </div>\r\n                <div className=\"card-footer d-flex align-items-center justify-content-between\">\r\n                    <Link to={`/collection?collection_id=${_id}`} className=\"btn btn-primary\">{lang.CollectionCard.explore[userData.user.lang]}</Link>\r\n                    {(userData.user && (userData.user.id === owner || userData.user.userRole === 'admin')) &&\r\n                    <div className=\"dropdown dropup\">\r\n                        <span id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" style={{cursor: 'pointer'}}>\r\n                            <Icon.ThreeDotsVertical/>\r\n                        </span>\r\n                        <div className=\"dropdown-menu dropdown-menu-left\" aria-labelledby=\"dropdownMenuButton\">\r\n                            <button className=\"dropdown-item\" type=\"button\" onClick={deleteCollection}><Icon.TrashFill className=\"text-danger\"/> Delete</button>\r\n                            <button className=\"dropdown-item\" type=\"button\" data-toggle=\"modal\" data-target=\"#editCollection\" onClick={editCollection}><Icon.PencilFill/> Edit</button>\r\n                        </div>\r\n                    </div> \r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React, { createRef, useEffect, useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\nimport './AddCollectionModal.css'\r\n\r\nimport lang from '../../lang.json'\r\nimport { getAllCollections } from '../../redux/actions'\r\n\r\nfunction AddCollectionModal({ id }) {\r\n    const closeModal = createRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [topic, setTopic] = useState('Books')\r\n    const [description, setDescription] = useState('')\r\n    const [author, setAuthor] = useState(false)\r\n    const [comments, setComments] = useState(true)\r\n    const [year, setYear] = useState(false)\r\n    const [picture, setPicture] = useState('')\r\n\r\n    useEffect(() => {\r\n        if(collection){\r\n            setTitle(collection.title)\r\n            setTopic(collection.topic)\r\n            setDescription(collection.description)\r\n            setAuthor(collection.author)\r\n            setComments(collection.comments)\r\n            setYear(collection.year)\r\n            setPicture(collection.picture)\r\n        }\r\n    }, [collection])\r\n\r\n    async function editCollection() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/collections/edit`, {\r\n                picture,\r\n                topic,\r\n                author,\r\n                comments,\r\n                year,\r\n                description,\r\n                title,\r\n                id: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getAllCollections(id))\r\n            closeModal.current.click()\r\n        } catch (error) {\r\n            \r\n        }        \r\n    }\r\n\r\n    return (\r\n        <>           \r\n            <div className=\"modal fade\" id=\"editCollection\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>   \r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddCollectionModal.collectionSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddCollectionModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} className=\"form-control\" placeholder={lang.AddCollectionModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">{lang.AddCollectionModal.topic[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <select className=\"custom-select\" value={topic} id=\"inputGroupSelect01\" onChange={(e) => setTopic(e.target.value)}>\r\n                                        <option value=\"Books\">Books</option>\r\n                                        <option value=\"Alcohol\">Alcohol</option>\r\n                                        <option value=\"CS:GO Skins\">CS:GO Skins</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddCollectionModal.description[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <textarea className=\"form-control\" value={description} onChange={(e) => setDescription(e.target.value)} aria-label=\"With textarea\"></textarea>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={comments} onChange={(e) => setComments(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddCollectionModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={author} onChange={(e) => setAuthor(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddCollectionModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input defaultChecked={year} onChange={(e) => console.log(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddCollectionModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" ref={closeModal}>{lang.AddCollectionModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={editCollection}>{lang.AddCollectionModal.save[userData.user.lang]}</button>\r\n                            </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddCollectionModal","import React, { useCallback, useEffect } from 'react'\r\n\r\nimport SpinnerComponent from '../spinner/SpinnerComponent'\r\nimport CardCollection from './CardCollection'\r\nimport './CollectionsItems.scss'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getAllCollections } from '../../redux/actions'\r\nimport EditModal from './EditCollectionModal'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { id } = props \r\n    const dispatch = useDispatch()\r\n\r\n    const { collections, loading } = useSelector(state => state.allCollections)\r\n\r\n    useEffect(() => {\r\n        dispatch(getAllCollections(id))    \r\n    }, [dispatch, id])\r\n\r\n    return (\r\n        <>\r\n            {loading && \r\n            <div className=\"text-center mt-2\">\r\n                <SpinnerComponent/>\r\n            </div>\r\n            }\r\n            {collections.length && !loading && \r\n            <div className=\"d-flex collections-container flex-wrap justify-content-center  mt-3\">\r\n                {collections.map((e) => (\r\n                    <CardCollection key={e._id} {...e}/>\r\n                ))}\r\n                <EditModal id={id}/>\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React, { useState, useEffect } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { useSelector, connect, useDispatch } from 'react-redux'\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\nimport UserPicture from '../userPicture/UserPicture' \r\nimport AddBtn from '../collection/BtnAddCollection'\r\nimport AddModal from '../collection/AddCollectionModal'\r\n\r\n\r\nimport './Profile.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport { clearErrorAll, endLoadingPage, setError, startLoadingPage } from '../../redux/actions'\r\nimport CollectionsItems from '../collection/CollectionsItems'\r\n\r\nfunction Profile({ userData }) {\r\n    const { loading } = useSelector(state => state.error)\r\n    const { collections } = useSelector(state => state.allCollections) \r\n    const [userProfile, setUserProfile] = useState({});  \r\n    const location = useLocation();\r\n    const id = new URLSearchParams(location.search).get('id')\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        const getProfileData = async () => {\r\n            dispatch(clearErrorAll())\r\n            dispatch(startLoadingPage())\r\n            console.log(id)\r\n\r\n            try {\r\n                const response = await Axios.get(`${API_URL}/api/user/profile`, {\r\n                    params: {\r\n                        id \r\n                    }\r\n                })\r\n                setUserProfile(response.data)\r\n            } catch (error) {\r\n                dispatch(setError(error))\r\n            }\r\n            finally {\r\n                dispatch(endLoadingPage())\r\n            }\r\n        };\r\n\r\n        getProfileData()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    return (\r\n        <>\r\n            {loading && !userProfile.user && <Spinner/>}\r\n            {userProfile.user && \r\n            <>\r\n                <div className=\"d-flex mt-3 align-items-center flex-md-row flex-column\" style={{gap: '3rem'}}>\r\n                    <div className=\"d-flex flex-column\">\r\n                        <div className=\"bg-light text-center p-3\" style={{borderRadius: 10}}>\r\n                            <UserPicture picture={userProfile.user.userPhoto} name={userProfile.user.displayName} styles={{width: 180, height: 180, fontSize: '5rem'}}/>\r\n                            <h4>{userProfile.user.displayName}</h4>\r\n                            <span>{userProfile.user.userRole}</span>\r\n                        </div>\r\n                        {userData.user.userRole === 'admin' && <div className=\"bg-light text-center p-3 mt-1\" style={{borderRadius: 10}}>\r\n                            <Link to=\"/admin\" className=\"btn btn-primary\">Admin panel</Link>\r\n                        </div>}\r\n                    </div>\r\n                    <div className=\"bg-light p-3 w-100\" style={{borderRadius: 10}}>\r\n                        <h2>About</h2>\r\n                        <ul className=\"list-group list-group-flush\">\r\n                            <li className=\"list-group-item\">Email: {userProfile.user.email}</li>\r\n                            <li className=\"list-group-item\">Register date: {new Date(parseFloat(userProfile.user.registerDate)).toLocaleDateString()}</li>\r\n                            <li className=\"list-group-item\">Number of collections: {collections.length}</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                {(userData.user.userRole === 'admin' || userData.user.id === id) &&\r\n                <div className=\"text-center mt-2\">\r\n                    <AddBtn styles={{width: '100%'}}/>\r\n                    <AddModal/>\r\n                </div>\r\n                }\r\n                <CollectionsItems id={id}/>\r\n            </>\r\n            }    \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData\r\n\r\nexport default connect(mapStateToProps, null)(Profile)","import React from 'react';\r\nimport { useDispatch, connect } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { isLogin } from '../../redux/actions';\r\n\r\nconst PrivateRoute = ({component: Component, ...rest}) => {\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <Route {...rest} render={props => (\r\n            dispatch(isLogin) ?\r\n                <Component {...props} />\r\n            : <Redirect to={{pathname: \"/login\", state: {nextPathname: props.location.pathname}}}/>\r\n        )} />\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute)","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport { deleteUser, setAdmin, removeAdmin, blockUser, unblockUser } from '../../redux/actions';\r\nimport { API_URL } from '../../config'\r\n\r\nfunction Users() {\r\n    const [users, setUsers] = useState([])\r\n    const [flack, setFlack] = useState(false)\r\n    const [actionsUsers, setActionsUsers] = useState([])\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const { userData } = useSelector(state => state.userData)\r\n    const error = useSelector(state => state.error)\r\n    const dispatch = useDispatch()\r\n    const keys = ['displayName', 'email', 'registerDate', 'userRole']\r\n\r\n    useEffect(() => {\r\n        const getUsers = async () => {\r\n            if(!userData.token)\r\n                return;\r\n            try {\r\n                const response = await Axios.get(`${API_URL}/api/user/users`, {\r\n                    headers: {\r\n                        'x-auth-token': userData.token \r\n                    }\r\n                })\r\n      \r\n                if(response.data) {\r\n                    setUsers(response.data)\r\n                }\r\n    \r\n            } catch (error) {\r\n                setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n                setErrorLoading(true)\r\n            }\r\n        }\r\n\r\n        getUsers()\r\n    }, [userData, users.length])\r\n\r\n    useEffect(() => {\r\n        setErrorMessage(error.error.message)\r\n        error.error.message && setErrorLoading(true)\r\n    }, [error])\r\n\r\n    function compare(a, b, key, flack) {\r\n        if (a[key] === b[key]) return 0;\r\n        if (a[key] > b[key]) return flack ? 1 : -1; \r\n        if (a[key] < b[key]) return flack ? -1 : 1;\r\n    }\r\n\r\n    function sort(e, key) {\r\n        setFlack(!flack)\r\n        setUsers(users.sort((a, b) => compare(a, b, key, flack)).slice())\r\n        setTimeout(() => {\r\n            e.target.blur()\r\n        }, 100)\r\n    }\r\n\r\n    function userForAction(e, id) {\r\n        if(e.target.checked)\r\n            setActionsUsers([...actionsUsers, id])\r\n        else setActionsUsers(actionsUsers.filter(e => e !== id))\r\n    }\r\n\r\n    function action(title) {\r\n        switch (title) {\r\n            case 'delete':\r\n                dispatch(deleteUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'setAdmin':\r\n                dispatch(setAdmin(userData.token, actionsUsers))\r\n                break;\r\n            case 'removeAdmin':\r\n                dispatch(removeAdmin(userData.token, actionsUsers, error))\r\n                break; \r\n            case 'block':\r\n                dispatch(blockUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'unblock':  \r\n                dispatch(unblockUser(userData.token, actionsUsers))\r\n                break;  \r\n            default:\r\n                break;\r\n        }       \r\n\r\n        setUsers([])\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {(!users.length || errorMessage) && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n\r\n        {users.length ? \r\n        <>\r\n            <div className=\"d-flex flex-column w-100 mb-2\">\r\n                <div className=\"d-flex flex-xl-row flex-column align-items-center\">\r\n                    <div className=\"btn-group btn-group-sm-sm mr-xl-auto mb-xl-0 mb-1\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'displayName')}>Name</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'email')}>Email</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'registerDate')}>Register date</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'userRole')}>User role</button>\r\n                    </div>\r\n                    <div className=\"btn-group btn-group-sm-sm\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('delete')}>Delete <Icon.TrashFill/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('block')}>Blocked <Icon.LockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('unblock')}>Unblocked <Icon.UnlockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('setAdmin')}>Set admin <Icon.PersonPlusFill style={{marginBottom: 3}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('removeAdmin')}>Remove admin <Icon.PersonXFill style={{marginBottom: 3}}/></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <table className=\"table table-bordered table-hover table-responsive-md\">\r\n                <caption>List of users</caption>\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th>Select</th>\r\n                        <th>Name</th>\r\n                        <th>Email</th>\r\n                        <th>Regiser Date</th>\r\n                        <th>User role</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map((e, i) => {\r\n                        return (\r\n                        <tr key={i} className={`${e['blocked'] && 'table-danger'}${actionsUsers.findIndex(user => user === e['_id']) > -1 ? ' table-primary' : ''}`}>\r\n                            <td>\r\n                                <div className=\"text-center\">\r\n                                    <input id={e['_id']} type=\"checkbox\" readOnly checked={actionsUsers.findIndex(user => user === e['_id']) > -1} className=\"form-check-label\" onClick={(event) => userForAction(event, e['_id'])}/>\r\n                                </div>\r\n                            </td>\r\n                            {keys.map((key, ind) => (\r\n                                <td key={ind}>{key === 'displayName' ?\r\n                                <Link className=\"text-decoration-none\" to={`/profile?id=${e['_id']}`}>{e['blocked'] ? \r\n                                    <> {e[key]} <Icon.LockFill style={{marginBottom: 4}}/> </> : \r\n                                    e[key]}</Link> :\r\n                                e[key]}</td>\r\n                            ))}            \r\n                        </tr>\r\n                        )\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </>:<></>}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Users)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Users from '../users/Users'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Admin(props){\r\n    return (\r\n        <>\r\n            {props.userData.token && props.userData.user.userRole !== 'admin' ? \r\n            <h1>{lang.Admin.permission[props.userData.user.lang]} :(</h1> :\r\n            <Users/>} \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Admin)","import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\nimport Axios from 'axios'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { getCollection, setNotify, clearErrorAll, startLoadingPage, setError, endLoadingPage } from '../../redux/actions'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddItem.scss'\r\nimport { END_LOADING_COLLECTION, START_LOADING_COLLECTION } from '../../redux/types'\r\n\r\nconst baseTagifySettings = {\r\n    blacklist: [\"xxx\", \"yyy\", \"zzz\"],\r\n    maxTags: 5,\r\n    placeholder: \"type something\",\r\n    dropdown: {\r\n      enabled: 0\r\n    }\r\n  }\r\n\r\nfunction AddItemModal(props) {\r\n    const {author, year, comments, id} = props\r\n\r\n    const tagifyRef = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [itemAuthor, setItemAuthor] = useState('')\r\n    const [itemDate, setItemDate] = useState('')\r\n    const [tagifySettings] = useState([])\r\n    const [tagifyProps, setTagifyProps] = useState({})\r\n    const [picture, setPicture] = useState('')\r\n\r\n    \r\n    const fetchItems = useCallback(() => {\r\n        dispatch(getCollection(id))            \r\n    }, [id, dispatch]) \r\n\r\n    async function addItem() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch({type: START_LOADING_COLLECTION})\r\n            dispatch(setNotify(true))\r\n\r\n            await Axios.post(`${API_URL}/api/item/add`, {\r\n                title,\r\n                date: itemDate,\r\n                author: itemAuthor,\r\n                tags: tagifyRef.current.value,\r\n                id,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            fetchItems()\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({type: END_LOADING_COLLECTION})\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getTags = async () => {\r\n            try {\r\n                setTagifyProps({loading: true})\r\n\r\n                const response = await Axios.get(`${API_URL}/api/item/tags`)\r\n\r\n                setTagifyProps((lastProps) => ({\r\n                    ...lastProps,\r\n                    whitelist: response.data.map(e => e.text),\r\n                    loading: false\r\n\r\n                }))\r\n            } catch (error) {\r\n                \r\n            }\r\n            \r\n        }\r\n        getTags()\r\n    }, [])\r\n\r\n    const settings = {\r\n        ...baseTagifySettings,\r\n        ...tagifySettings\r\n      }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"addItem\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>\r\n                        <>\r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddItemModal.itemSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={comments} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddItemModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={author} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddItemModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input disabled defaultChecked={year} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddItemModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddItemModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={title} \r\n                                    onChange={(e) => setTitle(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder={lang.AddItemModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                {author && \r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddItemModal.author[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={itemAuthor}\r\n                                    onChange={(e) => setItemAuthor(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder={lang.AddItemModal.author[userData.user.lang]} aria-label=\"Author\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                }\r\n                                {year &&\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddItemModal.date[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    onChange={(e) => setItemDate(e.target.valueAsNumber)} \r\n                                    type=\"date\" className=\"form-control\" placeholder={lang.AddItemModal.date[userData.user.lang]} aria-label=\"Date\"/>\r\n                                </div>\r\n                                }\r\n                                <div className=\"input-group mb-3\">\r\n                                    <Tags\r\n                                    tagifyRef={tagifyRef}\r\n                                    settings={settings}\r\n                                    {...tagifyProps}\r\n                                    placeholder={lang.AddItemModal.tags['en']}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddItemModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={addItem}>{lang.AddItemModal.addItem[userData.user.lang]}</button>\r\n                            </div> \r\n                        </>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default AddItemModal","import React, { useRef } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport AddModal from './AddItemModal'\r\n\r\nimport './AddItem.scss'\r\n\r\nfunction AddItem(props) {\r\n    const card = useRef()\r\n\r\n    return (\r\n        <>\r\n            <div ref={card} className=\"card add-item bg-light\" data-toggle=\"modal\" data-target=\"#addItem\" style={{width: '12rem'}}>\r\n                <div className=\"card-body d-flex justify-content-center align-items-center\" style={{height: '15rem'}}>\r\n                    <span><Icon.PlusCircle height={'50px'} width={'50px'}/></span>\r\n                </div>\r\n            </div>\r\n\r\n            <AddModal {...props}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddItem","import React, {  } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\nimport { API_URL } from '../../config'\r\nimport './Comment.css'\r\nimport { getItem } from '../../redux/actions'\r\n\r\nfunction Comment(props) {\r\n    const { userPhoto, userId, date, comment, modal, userName, owner, _id } = props \r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    async function removeComment() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/removeComment`, {\r\n                commentId: _id,\r\n                itemId: item._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n            \r\n            dispatch(getItem(item._id))\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center comment-header justify-content-between p-1 border border-primary\">\r\n                    <div className=\"d-flex align-items-center\"> \r\n                        <Link \r\n                        onClick={() => modal.current.click()}\r\n                        to={`/profile?id=${userId}`}\r\n                        style={{textDecoration: 'none'}}\r\n                        >\r\n                        <UserPicture picture={userPhoto} name={userName}/>    \r\n                        </Link>\r\n                        <span className=\"pl-1\">{userName}</span>\r\n                    </div>\r\n                    <div>\r\n                        {new Date(date).toLocaleDateString()}\r\n                        {(userData.user && (userId=== owner || userData.user.userRole === 'admin')) && <span className=\"ml-1\" style={{cursor: 'pointer'}} onClick={removeComment}><Icon.X/></span>}\r\n                    </div>\r\n                </div>  \r\n                <div className=\"border p-2\">\r\n                    <ReactMarkdown source={comment}/>\r\n                </div> \r\n            </div> \r\n    )\r\n}\r\n\r\nexport default Comment","import React, { useState, useRef } from 'react'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\n\r\nimport { getItem } from '../../redux/actions'\r\nimport { API_URL } from '../../config'\r\n\r\nimport './AddComment.css'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction AddComment(props) {\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const commentBtn = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [comment, setComment] = useState('')\r\n\r\n    function confirmKey(e) {\r\n        if(e.code === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault()\r\n            addComment()\r\n        }\r\n    }\r\n\r\n    async function addComment() {\r\n        if(!comment.trim()) {\r\n            return\r\n        }\r\n\r\n        setComment('')\r\n\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/comment`, {\r\n                comment,\r\n                itemId: item._id,\r\n                collectionId: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getItem(item._id))\r\n            commentBtn.current.blur()\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {userData.user && \r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center p-1 border border-primary\">\r\n                    <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                    <span className=\"pl-1\">{userData.user.displayName}</span>\r\n                </div>  \r\n                <div className=\"d-flex border p-2\">\r\n                    <textarea placeholder={lang.AddComment.leaveComment[userData.user.lang]} value={comment} \r\n                    onChange={(e) => setComment(e.target.value)} \r\n                    maxLength=\"200\" \r\n                    className=\"form-control mr-1\"\r\n                    onKeyPress={confirmKey}></textarea>\r\n                    <button className=\"btn btn-outline-primary btn-comment\" disabled={!comment.length} ref={commentBtn} onClick={addComment}>\r\n                        <Icon.ArrowRightCircle/>\r\n                    </button>\r\n                </div> \r\n            </div> \r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddComment","import React, { useRef, useEffect } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport { useSelector, connect, useDispatch } from 'react-redux'\r\nimport 'bootstrap/js/dist/modal'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\n\r\nimport './ModalItem.css'\r\nimport $ from 'jquery'\r\n\r\nimport Comment from '../comment/Comment'\r\nimport AddComment from '../comment/AddComment'\r\nimport Like from './ItemLike'\r\n\r\nimport { getItem } from '../../redux/actions'\r\n\r\nimport lang from '../../lang.json'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\n\r\nfunction ModalItem(props) {\r\n    const { item } = useSelector(state => state.item)\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const history = useHistory()\r\n\r\n    const location = useLocation()\r\n\r\n    const item_id = new URLSearchParams(location.search).get('item_id')\r\n\r\n    const modal = useRef()\r\n\r\n    useEffect(() => {\r\n        if(item_id)\r\n            $(modal.current).modal('show')\r\n        if(!item_id)\r\n            $(modal.current).modal('hide') \r\n            \r\n        console.log(item_id)    \r\n    }, [item_id])   \r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(async () => {\r\n            if(!item._id) {\r\n                return\r\n            }\r\n            dispatch(getItem(item._id))\r\n        }, 3000)\r\n\r\n        return () => clearInterval(interval)\r\n    })\r\n\r\n    function clearItem() {\r\n        $(modal.current).on('hide.bs.modal', (e) => {\r\n            history.push(`/collection?collection_id=${collection._id}`)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal fade\" ref={modal} tabIndex=\"-1\" id=\"item\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">{item.title}</h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={clearItem}>\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        {item.picture &&\r\n                        <img src={item.picture} className=\"img-fluid rounded\" alt={item.title}/>}\r\n                        <ul className=\"list-group mt-1\">\r\n                            {item.author && <li className=\"list-group-item\">{lang.ModalItem.author[userData.user.lang]}: {item.author}</li>}\r\n                            {item.year && <li className=\"list-group-item\">{lang.ModalItem.date[userData.user.lang]}: {new Date(item.year).toLocaleDateString()}</li>}\r\n                        </ul>\r\n                        {item.tags && item.tags.length > 0 && <Tags value={item.tags} readOnly className=\"mt-1\"/>}\r\n                        {item.likes &&\r\n                        <div className=\"d-flex justify-content-end\">\r\n                             <Like likes={item.likes} id={item._id}/>\r\n                        </div>}\r\n                    </div>\r\n                    <div className=\"d-flex modal-footer justify-content-start\">\r\n                        {collection.comments &&\r\n                        <>\r\n                            <AddComment />\r\n                            {item.comments ? item.comments.map((e,i) => <Comment key={i} {...e} owner={userData.user && userData.user.id}/>) :\r\n                            <p>Loading...</p>}\r\n                        </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.item;\r\n\r\nexport default connect(mapStateToProps, null)(ModalItem)","import React, { useState, useRef, useEffect } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\nimport Axios from 'axios'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { clearErrorAll, getCollection, setError, setNotify } from '../../redux/actions'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddItem.scss'\r\nimport { END_LOADING_COLLECTION, START_LOADING_COLLECTION } from '../../redux/types'\r\n\r\nconst baseTagifySettings = {\r\n    blacklist: [\"xxx\", \"yyy\", \"zzz\"],\r\n    maxTags: 5,\r\n    placeholder: \"type something\",\r\n    dropdown: {\r\n      enabled: 0\r\n    }\r\n  }\r\n\r\nfunction EditItemModal(props) {\r\n    const tagifyRef = useRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [itemAuthor, setItemAuthor] = useState('')\r\n    const [itemDate, setItemDate] = useState('')\r\n    const [tagifySettings] = useState([])\r\n    const [tagifyProps, setTagifyProps] = useState({})\r\n    const [picture, setPicture] = useState('')\r\n\r\n    useEffect(() => {\r\n        if(Object.keys(item).length) {\r\n            setTitle(item.title)\r\n            setItemAuthor(item.author)\r\n            setItemDate(item.year)\r\n            setPicture(item.picture)\r\n        }\r\n    }, [item])\r\n\r\n    async function saveItem() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch({type: START_LOADING_COLLECTION})\r\n            dispatch(setNotify(true))\r\n\r\n            await Axios.post(`${API_URL}/api/item/edit`, {\r\n                picture,\r\n                title,\r\n                author: itemAuthor,\r\n                tags: tagifyRef.current.value,\r\n                date: itemDate,\r\n                id: item._id,\r\n                collection_id: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getCollection(collection._id))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({type: END_LOADING_COLLECTION})\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getTags = async () => {\r\n            try {\r\n                setTagifyProps({loading: true})\r\n\r\n                const response = await Axios.get(`${API_URL}/api/item/tags`)\r\n\r\n                setTagifyProps((lastProps) => ({\r\n                    ...lastProps,\r\n                    whitelist: response.data.map(e => e.text),\r\n                    loading: false\r\n\r\n                }))\r\n            } catch (error) {\r\n                \r\n            }\r\n        }\r\n        getTags()\r\n    }, [])\r\n\r\n    const settings = {\r\n        ...baseTagifySettings,\r\n        ...tagifySettings\r\n      }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"editItem\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n                <div className=\"modal-content\" style={{position: 'relative'}}>\r\n                    <>\r\n                        <div className=\"modal-header\">\r\n                            <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.EditItemModal.itemSettings[userData.user.lang]}</h5>\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\" id=\"basic-addon1\">{lang.EditItemModal.title[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                value={title} \r\n                                onChange={(e) => setTitle(e.target.value)}\r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.title[userData.user.lang]} \r\n                                />\r\n                            </div>\r\n                            <div className=\"input-group mb-3\">\r\n                                <FileInput picture={picture} setPicture={setPicture}/>\r\n                            </div>\r\n                            {collection.author && \r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\" id=\"basic-addon1\">{lang.EditItemModal.author[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                value={itemAuthor}\r\n                                onChange={(e) => setItemAuthor(e.target.value)}\r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.author[userData.user.lang]} \r\n                                aria-label=\"Author\" \r\n                                aria-describedby=\"basic-addon1\"/>\r\n                            </div>\r\n                            }\r\n                            {collection.year &&\r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">{lang.EditItemModal.date[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                onChange={(e) => setItemDate(e.target.valueAsNumber)} \r\n                                type=\"date\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.date[userData.user.lang]} \r\n                                aria-label=\"Date\"\r\n                                value={itemDate ? new Date(itemDate).toISOString().substr(0, 10) : ''}/>\r\n                            </div>\r\n                            }\r\n                            <div className=\"input-group mb-3\">\r\n                                <Tags\r\n                                tagifyRef={tagifyRef}\r\n                                settings={settings}\r\n                                {...tagifyProps}\r\n                                placeholder={lang.EditItemModal.tags['en']}\r\n                                value={item.tags}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddItemModal.close[userData.user.lang]}</button>\r\n                            <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={saveItem}>{lang.EditItemModal.saveItem[userData.user.lang]}</button>\r\n                        </div> \r\n                    </>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditItemModal","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport { sortCollection } from '../../redux/actions'\r\nimport { CHANGE_ASCENDING } from '../../redux/types'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Sort() {\r\n    const { sortOptions, collection }  = useSelector(state => state.collection)\r\n    const [selectedSort, setSelectedSort] = useState(sortOptions.key)\r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()  \r\n\r\n    useEffect(() => {\r\n        dispatch(sortCollection(selectedSort.toLowerCase()))\r\n    }, [selectedSort, dispatch])\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center mb-3 w-100 px-2 p-sm-0\">\r\n            <span>{lang.Sort.sort[userData.user.lang]}</span>\r\n            <select className=\"form-control ml-2\" value={selectedSort} id=\"inputGroupSelect01\" onChange={(e) => setSelectedSort(e.target.value)}>\r\n                <option value=\"Title\">{lang.Sort.title[userData.user.lang]}</option>\r\n                <option value=\"Likes\">{lang.Sort.likes[userData.user.lang]}</option>\r\n                {collection.collection.author && <option value=\"Author\">{lang.Sort.author[userData.user.lang]}</option>}\r\n                {collection.collection.year && <option value=\"Date\">{lang.Sort.date[userData.user.lang]}</option>}\r\n                {collection.collection.comments && <option value=\"Comments\">{lang.Sort.comments[userData.user.lang]}</option>}\r\n            </select>\r\n            <span \r\n            className=\"ml-2\" \r\n            onClick={() => dispatch({type: CHANGE_ASCENDING})}\r\n            style={{cursor: 'pointer'}}\r\n            >\r\n                {sortOptions.ascending ? <Icon.SortUp size={20}/> : <Icon.SortDown size={20}/>}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sort","import React, { useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Filter({ filter, setFilter }) {\r\n    const { collection }  = useSelector(state => state.collection.collection)\r\n    const pictureCheck = useRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    function reset() {\r\n        const clearObj = {}\r\n\r\n        for (const key in filter) {\r\n            clearObj[key] = key === 'apply' ? filter[key] : undefined\r\n        }\r\n\r\n        pictureCheck.current.checked = false\r\n\r\n        setFilter({...clearObj})\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center flex-column mb-3 w-100 px-2 p-sm-0\">\r\n            <button className=\"btn btn-primary mb-2 ml-auto w-100\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                Filters\r\n            </button>\r\n\r\n            <div className=\"collapse w-100\" id=\"collapseExample\">\r\n                <div className=\"card card-body\">\r\n                    <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">{lang.Filter.title[userData.user.lang]}</span>\r\n                        </div>\r\n                        <input value={filter.title || ''} type=\"text\" className=\"form-control\" onChange={(e) => setFilter({...filter, title: e.target.value})} placeholder={lang.Filter.title[userData.user.lang]} aria-describedby=\"basic-addon1\"/>\r\n                    </div>\r\n                    {collection.author && <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">{lang.Filter.author[userData.user.lang]}</span>\r\n                        </div>\r\n                        <input value={filter.author || ''} onChange={(e) => setFilter({...filter, author: e.target.value})} type=\"text\" className=\"form-control\" placeholder={lang.Filter.author[userData.user.lang]} aria-describedby=\"basic-addon1\"/>\r\n                    </div>}\r\n                    {collection.year && <div className=\"d-flex align-items-center mb-3\">\r\n                        <input value={(filter.dateFrom && new Date(filter.dateFrom).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateFrom: new Date(e.target.value)})} className=\"form-control\"/>\r\n                        <span className=\"mx-2\">-</span>\r\n                        <input value={(filter.dateTo && new Date(filter.dateTo).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateTo: new Date(e.target.value)})} className=\"form-control\"/>\r\n                    </div>}\r\n                    <div className=\"form-check mb-3\">\r\n                        <input ref={pictureCheck} onChange={(e) => setFilter({...filter, picture: e.target.checked})} className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\"/>\r\n                        <label className=\"form-check-label\" htmlFor=\"defaultCheck1\">\r\n                        {lang.Filter.picture[userData.user.lang]}\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"d-flex custom-control custom-switch justify-content-end\">\r\n                        <input defaultValue={false} type=\"checkbox\" onChange={(e) => setFilter({...filter, apply: e.target.checked})} className=\"custom-control-input\" id=\"customSwitch1\"/>\r\n                        <label className=\"custom-control-label\" htmlFor=\"customSwitch1\">{lang.Filter.apply[userData.user.lang]}</label>\r\n                    </div>\r\n                    <button className=\"btn btn-danger\" onClick={reset}>{lang.Filter.reset[userData.user.lang]}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React, { useCallback, useEffect, useState } from 'react'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { useLocation, Link } from 'react-router-dom'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport AddItem from '../items/AddItem'\r\nimport Item from '../items/Item'\r\nimport ViewModal from '../items/ModalItem'\r\nimport EditModal from '../items/EditItemModal'\r\nimport Sort from '../collection/Sort'\r\nimport Filter from '../collection/Filter'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nimport { clearErrorAll, getCollection, getItem } from '../../redux/actions'\r\nimport lang from '../../lang.json'\r\n\r\nimport './Collection.scss'\r\n\r\nfunction Collection(props){\r\n    const [filter, setFilter] = useState({\r\n        apply: false\r\n    })\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection, items } = useSelector(state => state.collection.collection)\r\n    const { sortOptions } = useSelector(state => state.collection)\r\n    const { loading, error } = useSelector(state => state.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const location = useLocation()\r\n    const id = new URLSearchParams(location.search).get('collection_id')\r\n    const item_id = new URLSearchParams(location.search).get('item_id')\r\n\r\n    useEffect(() => {\r\n        if(item_id) {\r\n            dispatch(getItem(item_id))\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [item_id])\r\n\r\n    useEffect(() => {\r\n        dispatch(clearErrorAll())\r\n        dispatch(getCollection(id))\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        if(!error && !loading) {\r\n            const interval = setInterval(() => {\r\n                dispatch(getCollection(id))\r\n            }, 2000)\r\n\r\n            return () => clearInterval(interval)\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    function filterOptions(e) {\r\n        if(!filter.apply) {\r\n            return true\r\n        }\r\n\r\n        if(filter.title && filter.title.trim()) {\r\n            const ref = new RegExp(`${filter.title}`, 'gi')\r\n            if(!e.title.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.author && filter.author.trim()) {\r\n            const ref = new RegExp(`${filter.author}`, 'gi')\r\n\r\n            if(!e.author.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.dateFrom && filter.dateTo) {\r\n            const current = new Date(e.year)\r\n\r\n            if(current < filter.dateFrom || current > filter.dateTo) {\r\n                return false\r\n            }\r\n        } \r\n\r\n        if(filter.picture && !e.picture) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    function compare(a, b) {\r\n        if(!a || !b){\r\n            return\r\n        }\r\n\r\n        switch (sortOptions.key) {\r\n            case 'likes':\r\n                if (a.likes.number > b.likes.number) return sortOptions.ascending ? 1 : -1; \r\n                if (a.likes.number === b.likes.number) return 0; \r\n                if (a.likes.number < b.likes.number) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'date':\r\n                if (a['year'] > b['year']) return sortOptions.ascending ? 1 : -1; \r\n                if (a['year'] === b['year']) return 0; \r\n                if (a['year'] < b['year']) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'comments':\r\n                if (a['comments'].length > b['comments'].length) return sortOptions.ascending ? 1 : -1; \r\n                if (a['comments'].length === b['comments'].length) return 0; \r\n                if (a['comments'].length < b['comments'].length) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            default:\r\n                if (a[sortOptions.key] > b[sortOptions.key]) return sortOptions.ascending ? 1 : -1; \r\n                if (a[sortOptions.key] === b[sortOptions.key]) return 0; \r\n                if (a[sortOptions.key] < b[sortOptions.key]) return sortOptions.ascending ? -1 : 1;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {collection && !loading &&\r\n            <>\r\n                <Link  \r\n                to={`/profile?id=${collection.owner}`}\r\n                >Back to profile</Link>\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{collection.title}</h2>\r\n                    <h3 className=\"badge badge-primary\">{collection.topic}</h3>\r\n                    <ReactMarkdown source={collection.description}/>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"row\">\r\n                    <Sort/>\r\n                    <Filter filter={filter} setFilter={setFilter}/>\r\n                </div>\r\n                <div className=\"d-flex justify-content-around flex-wrap item-container\">\r\n                    {items.filter(filterOptions).sort(compare).map((e) => <Item key={e._id} itemProps={e} collectionId={id}/>)}\r\n                    {userData.user && (userData.user.id === collection.owner || userData.user.userRole === 'admin') \r\n                    && <AddItem comments={collection.comments} author={collection.author} year={collection.year} id={id}/>}\r\n                    <ViewModal/>\r\n                    <EditModal/>\r\n                </div>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Collection)","import React from 'react'\r\nimport { connect, useSelector } from 'react-redux'\r\nimport Item from '../items/Item';\r\n\r\nimport './Search.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport Spinner from '../spinner/Spinner';\r\n\r\nfunction Search(props){\r\n    const { items, searchText } = props\r\n    const { userData } = useSelector(state => state.userData)   \r\n    const { loading } = useSelector(state => state.error)\r\n    \r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {!loading && <div className=\"d-flex flex-wrap search-items-container\">\r\n                {items.length ?\r\n                <div className=\"d-flex flex-column\">\r\n                    <h4>Here's what we found for {searchText}</h4>\r\n                    <div className=\"d-flex flex-wrap\" style={{gap: '2rem'}}>\r\n                        {items.map((e) => <Item itemProps={e} key={e._id}/>)}\r\n                    </div>\r\n                </div>\r\n                :\r\n                'Nothing was found for your request :('}\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.search;\r\n\r\nexport default connect(mapStateToProps, null)(Search)","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { clearErrorAll } from '../../redux/actions'\r\n\r\nimport './AlertError.scss'\r\n\r\nfunction AlertError() {\r\n    const { error, loading } = useSelector(state => state.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <>\r\n            {!loading && error && <div className=\"alert alert-warning alert-danger fade-in show mt-1\" role=\"alert\">\r\n                {error}\r\n                <button type=\"button\" className=\"close\" aria-label=\"Close\" data-dismiss=\"alert\" onClick={() => dispatch(clearErrorAll())}>\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AlertError","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { clearErrorAll } from '../../redux/actions'\r\nimport SpinnerComponent from '../spinner/SpinnerComponent'\r\n\r\nimport './AlertError.scss'\r\n\r\nfunction AlertStatus() {\r\n    const { loading, error, notify } = useSelector(state => state.error)\r\n    const { loadingCollection } = useSelector(state => state.collection)\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <>\r\n            {notify && !error &&\r\n                <div className=\"alert alert-primary fade-in\" role=\"alert\">\r\n                    {loading || loadingCollection ?\r\n                    <SpinnerComponent/>   \r\n                    : <span>Successfully uploaded</span>}\r\n                    <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={() => dispatch(clearErrorAll())}>\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AlertStatus","import './App.scss';\nimport { useEffect } from 'react'\nimport { BrowserRouter, Route, Switch, useLocation } from 'react-router-dom'\nimport { connect, useDispatch } from 'react-redux'\n\nimport Header from './components/layout/Header'\nimport Footer from './components/layout/Footer'\nimport Home from './components/pages/Home'\nimport Login from './components/auth/Login'\nimport Register from './components/auth/Register'\nimport Profile from './components/pages/Profile'\nimport PrivateRoute from './components/routes/PrivateRoute'\nimport Admin from './components/pages/Admin'\nimport Collection from './components/pages/Collection'\nimport Search from './components/pages/Search'\n\nimport { getUser } from './redux/actions';\nimport AlertError from './components/alerts/AlertError';\nimport AlertStatus from './components/alerts/AlertStatus';\n\nfunction App() {\n  const dispatch = useDispatch()\n  \n  useEffect(() => {\n    dispatch(getUser())\n  }, [dispatch])\n\n  return (\n      <BrowserRouter>\n          <Header/>         \n          <div className=\"container\">\n            <AlertError/>\n            <AlertStatus/>\n            <Switch>\n                <Route exact path='/' component={Home}/>\n                <Route path=\"/login\" component={Login}/>\n                <Route path=\"/register\" component={Register}/>\n                <Route path=\"/profile:id?\" component={Profile}/>\n                <Route path=\"/collection:collection_id?\" exact component={Collection}/>\n                <Route path=\"/search\" exact component={Search}/>\n                <PrivateRoute path=\"/admin\" component={Admin}/>\n            </Switch>\n          </div>\n          <Footer/>\n      </BrowserRouter>\n  );\n}\n\nconst mapStateToProps = state => state.userData\n\nexport default connect(mapStateToProps, null)(App);\n","import { GET_USER, IS_LOGIN, RESET_USER, SET_USER, DELETE_USER, SET_ADMIN, REMOVE_ADMIN, BLOCK_USER, UNBLOCK_USER, SWITCH_LANG } from \"./types\";\r\n\r\nconst initialState = {\r\n    userData: {\r\n        token: undefined,\r\n        user: {\r\n            lang: localStorage.getItem('lang') || 'en'\r\n        }\r\n    }\r\n}\r\n\r\nexport const userReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData, \r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case SET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case RESET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case SWITCH_LANG:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                user: {\r\n                    ...state.userData.user,\r\n                    lang: action.payload\r\n                }\r\n                }\r\n            }       \r\n        case DELETE_USER:\r\n            return state\r\n        case SET_ADMIN:\r\n            return state\r\n        case REMOVE_ADMIN:\r\n            return state\r\n        case BLOCK_USER:\r\n            return state\r\n        case UNBLOCK_USER:\r\n            return state\r\n        case IS_LOGIN:\r\n            return state\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_ERROR, CLEAR_ERROR, START_LOADING_PAGE, END_LOADING_PAGE, ERROR_CLEARALL, SET_NOTIFY } from \"./types\"\r\n\r\nconst initialState = {\r\n    error: '',\r\n    notify: false,\r\n    loading: false\r\n}\r\n\r\nexport const errorReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ERROR:\r\n            return {...state, error: action.payload}\r\n        case CLEAR_ERROR:\r\n            return  {...state, error: ''} \r\n        case START_LOADING_PAGE:\r\n            return {...state, loading: true}\r\n        case END_LOADING_PAGE:\r\n            return {...state, loading: false}\r\n        case ERROR_CLEARALL:\r\n            return {...state, ...action.payload}\r\n        case SET_NOTIFY:\r\n            return {...state, notify: action.payload}          \r\n        default:\r\n            return state    \r\n    }\r\n}","import { GET_ITEM, SET_ITEM } from \"./types\";\r\n\r\nconst initialState = {\r\n    item: {}\r\n}\r\n\r\nexport const itemReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }\r\n        case GET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_COLLECTION, SORT_COLLECTION, CHANGE_ASCENDING, START_LOADING_COLLECTION, END_LOADING_COLLECTION } from \"./types\";\r\n\r\nconst initialState = {\r\n    collection: {},\r\n    sortOptions: {\r\n        key: 'Date',\r\n        ascending: true\r\n    },\r\n    loadingCollection: false\r\n}\r\n\r\nexport const collectionReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_COLLECTION:\r\n            return {\r\n                ...state, collection: action.payload\r\n            }\r\n        case SORT_COLLECTION:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    key: action.payload\r\n                }\r\n            }\r\n        case CHANGE_ASCENDING:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    ascending: !state.sortOptions.ascending\r\n                }\r\n            }\r\n        case START_LOADING_COLLECTION: \r\n            return {\r\n                ...state, loadingCollection: true\r\n            }\r\n        case END_LOADING_COLLECTION:\r\n            return {\r\n                ...state, loadingCollection: false\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_HOME } from \"./types\";\r\n\r\nconst initialState = {\r\n    tags: [],\r\n    lastAdded: [],\r\n    mostLike: []\r\n}\r\n\r\nexport const homeReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_HOME: \r\n            return {...state, \r\n                tags: action.payload.tags, \r\n                lastAdded: action.payload.lastAdded,\r\n                mostLike: action.payload.mostLike \r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_SEARCH } from \"./types\";\r\n\r\nconst initialState = {\r\n    items: JSON.parse(sessionStorage.getItem('search-items')) || {}, \r\n    searchText: sessionStorage.getItem('search-text') || ''\r\n}\r\n\r\nexport const searchReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_SEARCH:\r\n            return {\r\n                ...state, items: action.payload.items, searchText: action.payload.searchText\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_ALLCOLLECTIONS, START_LOADING_COLLECTIONS, END_LOADING_COLLECTIONS } from \"./types\";\r\n\r\nconst initialState = {\r\n    collections: {},\r\n    loading: false\r\n}\r\n\r\nexport const allCollectionsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_ALLCOLLECTIONS:\r\n            return {\r\n                ...state, collections: action.payload\r\n            }\r\n        case START_LOADING_COLLECTIONS:\r\n            return {\r\n                ...state, loading: true\r\n            }\r\n        case END_LOADING_COLLECTIONS:\r\n            return {\r\n                ...state, loading: false\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from 'redux'\r\n\r\nimport { userReducer } from './userReducer'\r\nimport { errorReducer } from './errorReducer'\r\nimport { itemReducer } from './itemReducer'\r\nimport { collectionReducer } from './collectionReducer'\r\nimport { homeReducer } from './homeReducer'\r\nimport { searchReducer } from './searchReducer'\r\nimport { allCollectionsReducer } from './allCollectionsReducer'\r\n\r\nexport const rootReducer = combineReducers({\r\n    userData: userReducer,\r\n    error: errorReducer,\r\n    item: itemReducer,\r\n    collection: collectionReducer,\r\n    home: homeReducer,\r\n    search: searchReducer,\r\n    allCollections: allCollectionsReducer\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\nimport { applyMiddleware, compose, createStore } from 'redux'\n\nimport './index.css';\nimport App from './App';\nimport { rootReducer } from './redux/rootReducer';\n\nconst store = createStore(rootReducer, compose(\n  applyMiddleware(\n    thunk\n  )\n))\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n        <App/>\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}