{"version":3,"sources":["components/userPicture/UserPicture.js","config.js","redux/types.js","redux/actions.js","components/layout/Header.js","components/layout/Footer.js","components/items/ItemLike.js","components/mainPicture/MainPicture.js","components/items/Item.js","components/homeSections/LastAdded.js","components/homeSections/Tags.js","components/items/HomeItem.js","components/homeSections/MostLike.js","components/spinner/Spinner.js","components/pages/Home.js","helpers/useInputValue.js","components/auth/VkAuth.js","components/auth/Login.js","components/auth/Register.js","components/fileInput/FileInput.js","components/collection/AddCollectionModal.js","components/collection/BtnAddCollection.js","components/spinner/SpinnerComponent.js","components/collection/CardCollection.js","components/collection/EditCollectionModal.js","components/collection/CollectionsItems.js","components/pages/Profile.js","components/routes/PrivateRoute.js","components/users/Users.js","components/pages/Admin.js","components/items/AddItemModal.js","components/items/AddItem.js","components/comment/Comment.js","components/comment/AddComment.js","components/items/ModalItem.js","components/items/EditItemModal.js","components/collection/Sort.js","components/collection/Filter.js","components/pages/Collection.js","components/pages/Search.js","components/alerts/AlertError.js","components/alerts/AlertStatus.js","App.js","redux/userReducer.js","redux/errorReducer.js","redux/itemReducer.js","redux/collectionReducer.js","redux/homeReducer.js","redux/searchReducer.js","redux/allCollectionsReducer.js","redux/rootReducer.js","index.js"],"names":["UserPicture","picture","name","styles","className","style","backgroundImage","API_URL","GET_USER","SET_USER","RESET_USER","IS_LOGIN","DELETE_USER","SET_ADMIN","REMOVE_ADMIN","BLOCK_USER","UNBLOCK_USER","SET_ERROR","CLEAR_ERROR","SET_ITEM","GET_ITEM","GET_COLLECTION","SORT_COLLECTION","CHANGE_ASCENDING","GET_HOME","SET_SEARCH","SWITCH_LANG","GET_ALLCOLLECTIONS","START_LOADING_PAGE","END_LOADING_PAGE","SET_NOTIFY","ERROR_CLEARALL","START_LOADING_COLLECTIONS","END_LOADING_COLLECTIONS","START_LOADING_COLLECTION","END_LOADING_COLLECTION","TOGGLE_MODE","clearErrorAll","type","payload","error","notify","loading","setNotify","state","getAllCollections","id","dispatch","a","Axios","get","params","response","data","setError","setSearch","searchText","startLoadingPage","sessionStorage","setItem","JSON","stringify","items","endLoadingPage","getHome","firstLoad","getState","getCollection","collection","_id","setUser","user","getItem","text","message","isLogin","localStorage","resetUser","token","undefined","lang","connect","userData","props","useSelector","search","useDispatch","history","useHistory","useState","searchTextInput","setSearchTextInput","useEffect","onSearch","e","preventDefault","trim","push","darkMode","to","Header","collections","data-toggle","data-target","aria-controls","aria-expanded","aria-label","home","onSubmit","value","onChange","target","placeholder","onClick","class","checked","mode","post","headers","for","userPhoto","aria-haspopup","displayName","background","removeItem","window","location","reload","logOut","logIn","register","ItemLike","likes","homeAction","liked","setLiked","likesNumber","setLikesNumber","itemId","console","log","usersId","findIndex","number","cursor","MainPicture","size","Item","itemProps","author","year","title","collection_id","useLocation","delete","width","height","date","Date","toLocaleDateString","pathname","userRole","owner","item","edit","SwiperCore","use","Navigation","Pagination","A11y","lastAdded","like","useCallback","length","navigation","pagination","clickable","spaceBetween","slidesPerView","breakpoints","576","768","1200","map","i","Scrollbar","tags","scrollbar","draggable","992","tag","useRef","mostLike","HomeItem","Spinner","role","interval","setInterval","clearInterval","useInputValue","field","setValue","bind","event","required","clear","btn","backgroundColor","display","alignItems","color","boxShadow","padding","borderRadius","border","fontSize","fontWeight","fontFamily","div","span","VkAuth","checkLoginState","setState","isProcessing","callback","handleClick","isLoaded","disabled","VK","Auth","login","this","sdkLoaded","asyncInit","loadSdkAsync","apiId","vkAsyncInit","init","el","document","createElement","src","async","getElementsByTagName","appendChild","buttonProps","containerStyle","Component","email","password","remember","createRef","errorLoading","setErrorLoading","errorMessage","setErrorMessage","resGoogle","resVk","idToken","tokenId","vkId","session","first_name","last_name","signIn","htmlFor","emailAdress","autoFocus","ref","rememberMe","clientId","buttonText","onSuccess","passwordCheck","Register","signUp","emailAddress","passwordConfirm","FileInput","setPicture","onDrop","acceptedFiles","forEach","file","reader","FileReader","readAsDataURL","onload","result","useDropzone","maxFiles","accept","getRootProps","getInputProps","isDragActive","dragAndDrop","alt","AddCollectionModal","setTitle","topic","setTopic","description","setDescription","setAuthor","comments","setComments","setYear","URLSearchParams","tabIndex","aria-labelledby","aria-hidden","position","collectionSettings","data-dismiss","aria-describedby","defaultChecked","close","save","BtnAddCollection","SpinnerComponent","CollectionsItems","source","CollectionCard","explore","closeModal","current","click","allCollections","CardCollection","userProfile","setUserProfile","getProfileData","gap","parseFloat","registerDate","component","rest","render","nextPathname","users","setUsers","flack","setFlack","actionsUsers","setActionsUsers","keys","sort","key","b","compare","slice","setTimeout","blur","action","deleteUser","setAdmin","err","removeAdmin","blockUser","unblockUser","getUsers","marginBottom","readOnly","filter","userForAction","ind","Admin","permission","baseTagifySettings","blacklist","maxTags","dropdown","enabled","AddItemModal","tagifyRef","itemAuthor","setItemAuthor","itemDate","setItemDate","tagifySettings","tagifyProps","setTagifyProps","fetchItems","lastProps","whitelist","getTags","settings","itemSettings","valueAsNumber","addItem","AddItem","card","Comment","userId","comment","modal","userName","commentId","textDecoration","AddComment","commentBtn","setComment","addComment","collectionId","leaveComment","maxLength","onKeyPress","code","shiftKey","item_id","$","on","ModalItem","EditItemModal","Object","toISOString","substr","saveItem","Sort","sortOptions","selectedSort","setSelectedSort","toLowerCase","ascending","Filter","setFilter","pictureCheck","dateFrom","dateTo","defaultValue","apply","clearObj","reset","RegExp","match","AlertError","AlertStatus","loadingCollection","userRes","addClass","removeClass","exact","path","Home","Login","Profile","Collection","Search","initialState","parse","rootReducer","combineReducers","store","createStore","compose","applyMiddleware","thunk","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b98781bd.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport './UserPicture.css'\r\n\r\nfunction UserPicture({ picture, name, styles }) {\r\n\r\n    return (\r\n        <>\r\n            {picture ? \r\n                <div className=\"user-picture\" style={{backgroundImage: `url(${picture})`, ...styles}}></div> :\r\n                name && <div className=\"user-picture text-uppercase\" style={{...styles}}>{name[0]}</div>\r\n            } \r\n        </>                                   \r\n    )\r\n}\r\n\r\nexport default UserPicture","export const API_URL = 'https://collections-itransition.herokuapp.com'","export const GET_USER = 'GET_USER'\r\n\r\nexport const SET_USER = 'SET_USER'\r\n\r\nexport const RESET_USER = 'RESET_USER'\r\n\r\nexport const GET_GOOGLE_USER = 'GET_GOOGLE_USER'\r\n\r\nexport const IS_LOGIN = 'IS_LOGIN'\r\n\r\nexport const DELETE_USER = 'DELETE_USER'\r\n\r\nexport const SET_ADMIN = 'SET_ADMIN'\r\n\r\nexport const REMOVE_ADMIN = 'REMOVE_ADMIN'\r\n\r\nexport const BLOCK_USER = 'BLOCK_USER'\r\n\r\nexport const UNBLOCK_USER = 'UNBLOCK_USER'\r\n\r\nexport const SET_ERROR = 'SET_ERROR'\r\n\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\r\n\r\nexport const SET_ITEM = 'SET_ITEM'\r\n\r\nexport const GET_ITEM = 'GET_ITEM'\r\n\r\nexport const GET_COLLECTION = 'GET_COLLECTION'\r\n\r\nexport const SORT_COLLECTION = 'SORT_COLLECTION'\r\n\r\nexport const CHANGE_ASCENDING = 'CHANGE_ASCENDING'\r\n\r\nexport const GET_HOME = 'GET_HOME'\r\n\r\nexport const SET_SEARCH = 'SET_SEARCH'\r\n\r\nexport const SWITCH_LANG = 'SWITCH_LANG'\r\n\r\nexport const GET_ALLCOLLECTIONS = 'GET_ALLCOLLECTIONS'\r\n\r\nexport const START_LOADING_PAGE = 'START_LOADING_PAGE'\r\n\r\nexport const END_LOADING_PAGE = 'END_LOADING_PAGE'\r\n\r\nexport const SET_NOTIFY = 'SET_NOTIFY'\r\n\r\nexport const ERROR_CLEARALL = 'ERROR_CLEARALL'\r\n\r\nexport const START_LOADING_COLLECTIONS = 'START_LOADING_COLLECTIONS' \r\n\r\nexport const END_LOADING_COLLECTIONS = 'END_LOADING_COLLECTIONS' \r\n\r\nexport const START_LOADING_COLLECTION = 'START_LOADING_COLLECTION' \r\n\r\nexport const END_LOADING_COLLECTION = 'END_LOADING_COLLECTION' \r\n\r\nexport const TOGGLE_MODE = 'TOGGLE_MODE'","import Axios from 'axios'\r\nimport { API_URL } from '../config'\r\n\r\nimport { GET_USER, SET_USER, RESET_USER, SET_ERROR, DELETE_USER, \r\n    SET_ADMIN, REMOVE_ADMIN, BLOCK_USER, UNBLOCK_USER, \r\n    CLEAR_ERROR, SET_ITEM, GET_COLLECTION, GET_ITEM, SORT_COLLECTION, \r\n    GET_HOME, SET_SEARCH, SWITCH_LANG, GET_ALLCOLLECTIONS, START_LOADING_PAGE, \r\n    END_LOADING_PAGE, ERROR_CLEARALL, SET_NOTIFY, START_LOADING_COLLECTIONS, END_LOADING_COLLECTIONS, TOGGLE_MODE } from \"./types\";\r\n\r\n\r\nexport function toggleMode(mode) {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            if(!getState().userData.userData.token) {\r\n                dispatch({\r\n                    type: TOGGLE_MODE,\r\n                    payload: mode\r\n                })\r\n                return\r\n            }\r\n\r\n            await Axios.post(`${API_URL}/api/user/darkMode`, {\r\n                mode\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': getState().userData.userData.token\r\n                }\r\n            })\r\n    \r\n            dispatch({\r\n                type: TOGGLE_MODE,\r\n                payload: mode\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function clearErrorAll() {\r\n    return {\r\n        type: ERROR_CLEARALL,\r\n        payload: {\r\n            error: '',\r\n            notify: false,\r\n            loading: false\r\n        }\r\n    }        \r\n}\r\n\r\nexport function setNotify(state) {\r\n    return {\r\n        type: SET_NOTIFY,\r\n        payload: state\r\n    }\r\n}\r\n\r\nexport function getAllCollections(id) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({type: START_LOADING_COLLECTIONS})\r\n            const response = await Axios.get(`${API_URL}/api/collections/`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n            dispatch({\r\n                type: GET_ALLCOLLECTIONS,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({type: END_LOADING_COLLECTIONS})\r\n        }\r\n    }\r\n}\r\n\r\nexport function switchLang(lang) {\r\n    return async (dispatch, getState) => {\r\n        const token = getState().userData.userData.token\r\n\r\n        if(!token) {\r\n            dispatch({\r\n                type: SWITCH_LANG,\r\n                payload: lang\r\n            })\r\n\r\n            localStorage.setItem('lang', lang)\r\n        }\r\n\r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/switchLang`, {\r\n                lang\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': token\r\n                }\r\n            })\r\n    \r\n            dispatch({\r\n                type: SWITCH_LANG,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function setSearch(searchText) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(startLoadingPage())\r\n\r\n            const response = await Axios.get(`${API_URL}/api/item/search`, {\r\n                params: {\r\n                    searchText\r\n                }\r\n            })\r\n\r\n            sessionStorage.setItem('search-items', JSON.stringify(response.data))\r\n            sessionStorage.setItem('search-text', searchText)\r\n\r\n            dispatch({\r\n                type: SET_SEARCH,\r\n                payload: {\r\n                    items: response.data,\r\n                    searchText\r\n                }\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function getHome(firstLoad) {\r\n    return async (dispatch, getState) => {\r\n        if(firstLoad)\r\n            dispatch(startLoadingPage())\r\n        try {\r\n            if(getState().error.error) {\r\n                return\r\n            }\r\n\r\n            const response = await Axios.get(`${API_URL}/api/user/home`)\r\n\r\n            dispatch({\r\n                type: GET_HOME,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            if(firstLoad)\r\n                dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function sortCollection(key) {\r\n    return {\r\n        type: SORT_COLLECTION,\r\n        payload: key\r\n    }\r\n}\r\n\r\nexport function getCollection(id) {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            if(getState().error.error) {\r\n                return\r\n            }\r\n\r\n            if(!getState().collection.collection.collection) {\r\n                dispatch(startLoadingPage()) \r\n            } else if(getState().collection.collection.collection._id !== id) {\r\n                dispatch(startLoadingPage()) \r\n            }           \r\n\r\n            const response = await Axios.get(`${API_URL}/api/collections/collection`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_COLLECTION,\r\n                payload: response.data\r\n            })            \r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function setUser(user) {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: SET_USER,\r\n            payload: user\r\n        })\r\n    }\r\n}\r\n\r\nexport function setItem(item) {\r\n    return {\r\n        type: SET_ITEM,\r\n        payload: item\r\n    }\r\n}\r\n\r\nexport function getItem(id) {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get(`${API_URL}/api/item/`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_ITEM,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n}\r\n\r\nexport function blockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/block`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: BLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: BLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function deleteUser(token, users) {\r\n    return async dispatch => {\r\n        users.forEach(async (id) => {\r\n            try {\r\n                await Axios.delete(`${API_URL}/api/user/delete`, {\r\n                    params: {\r\n                        id\r\n                    },\r\n                    headers: {\r\n                        'x-auth-token': token        \r\n                        }\r\n                    }\r\n                )\r\n                \r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: DELETE_USER\r\n                })\r\n            }\r\n        })\r\n        \r\n        dispatch({\r\n            type: DELETE_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setAdmin(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/setAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: SET_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: SET_ADMIN\r\n        })\r\n    }\r\n}\r\n\r\nexport function unblockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/unblock`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: UNBLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: UNBLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setError(error) {\r\n    let text = ''\r\n\r\n    if(error.response) {\r\n        text = error.response.data.message || error.response.data.error.message\r\n    }\r\n    else text = 'Connection error. Please try again later:('\r\n\r\n    return {\r\n        type: SET_ERROR,\r\n        payload: text\r\n    }\r\n}\r\n\r\nexport function clearError() {\r\n    return {\r\n            type: CLEAR_ERROR,\r\n            payload: ''\r\n        }\r\n}\r\n\r\nexport function startLoadingPage() {\r\n    return {\r\n        type: START_LOADING_PAGE\r\n    }\r\n}\r\n\r\nexport function endLoadingPage() {\r\n    return {\r\n        type: END_LOADING_PAGE\r\n    }\r\n}\r\n\r\nexport function removeAdmin(token, users, err) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/removeAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: REMOVE_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: REMOVE_ADMIN,\r\n        })\r\n    }\r\n}\r\n\r\nexport function isLogin() {\r\n    return localStorage.getItem('token') || sessionStorage.getItem('token')\r\n}\r\n\r\nexport function resetUser() {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: RESET_USER,\r\n            payload: {\r\n                token: undefined,\r\n                user: {\r\n                    lang: 'en'\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function getUser() {\r\n    return async dispatch => {\r\n        const token = localStorage.getItem('token') || sessionStorage.getItem('token')\r\n\r\n        if(!token){\r\n            resetUser()\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const tokenRes = await Axios.post(\r\n            `${API_URL}/api/user/verifyToken`,\r\n            null,\r\n            { headers: { \"x-auth-token\": token } }\r\n            )\r\n\r\n            if (tokenRes.data) {\r\n            const userRes = await Axios.get(`${API_URL}/api/user/`, {\r\n                headers: { \"x-auth-token\": token },\r\n            });\r\n            \r\n            dispatch({ \r\n                type: GET_USER,\r\n                payload: {\r\n                    token,\r\n                    user: userRes.data\r\n                }\r\n            })\r\n            }\r\n        } catch (error) {\r\n            dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n        }\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\nimport { isLogin, resetUser, setSearch, toggleMode } from '../../redux/actions'\r\n\r\nimport './Header.scss'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Header(props){\r\n    const { userData } = props\r\n    const { searchText } = useSelector(state => state.search)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const [searchTextInput, setSearchTextInput] = useState(searchText)\r\n\r\n    useEffect(() => {\r\n        setSearchTextInput(searchText)\r\n    }, [searchText])\r\n\r\n    const logout = () => {\r\n        dispatch(resetUser())    \r\n\r\n        localStorage.removeItem('token')\r\n        sessionStorage.removeItem('token')\r\n\r\n        window.location.reload()\r\n    }\r\n\r\n    const onSearch = (e) => {\r\n        e.preventDefault()\r\n\r\n        if(searchTextInput.trim()) {\r\n            dispatch(setSearch(searchTextInput))\r\n        }\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <nav className={`navbar navbar-expand-md navbar-${!userData.user.darkMode ? 'light bg-light' : 'dark bg-dark'}`}>\r\n                <Link className=\"navbar-brand\" to=\"/\">{lang.Header.collections[userData.user.lang]}</Link>\r\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarsExample02\" aria-controls=\"navbarsExample02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span className=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n\r\n                <div className=\"collapse navbar-collapse\" id=\"navbarsExample02\">\r\n                    <ul className=\"navbar-nav mr-auto\">\r\n                        <li className=\"nav-item active\">\r\n                            <Link className=\"nav-link\" to=\"/\">{lang.Header.home[userData.user.lang]}</Link>\r\n                        </li>\r\n                    </ul>\r\n                    <form className=\"form-inline\" id=\"item-search\" onSubmit={onSearch}>\r\n                        <input className=\"form-control w-100\" value={searchTextInput} onChange={(e) => setSearchTextInput(e.target.value)} type=\"text\" placeholder=\"Search\"/>\r\n                        <span onClick={onSearch}><Icon.Search/></span>\r\n                    </form>\r\n                    <div class=\"custom-control custom-switch ml-3\">\r\n                        <input checked={userData.user.darkMode} onChange={(e) => dispatch(toggleMode(e.target.checked))} type=\"checkbox\" class=\"custom-control-input\" id=\"customSwitch1\"/>\r\n                        <label class=\"custom-control-label\" for=\"customSwitch1\"></label>\r\n                    </div>\r\n                    {!dispatch(isLogin) && !userData.token?\r\n                    <div className=\"d-flex flex-column ml-md-3 align-items-md-center\">\r\n                        <Link to=\"/login\">{lang.Header.logIn[userData.user.lang]}</Link>\r\n                        <Link to=\"/register\">{lang.Header.register[userData.user.lang]}</Link>\r\n                    </div> :\r\n                    <div className=\"flex-column ml-md-3 mt-1 mt-md-0 avatar\">\r\n                        <div className=\"btn-group\">\r\n                            {userData.token ? <button type=\"button\" className={`btn dropdown-toggle bg-dark${!userData.user.userPhoto && ' text-light'}`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                            </button> :\r\n                            <button type=\"button\" className={`btn dropdown-toggle`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <div style={{background: 'grey'}}></div>\r\n                            </button>}\r\n                            <div className=\"dropdown-menu dropdown-menu-md-right\">\r\n                                {userData.user && <button className=\"dropdown-item\" onClick={() => history.push(`/profile?id=${userData.user.id}`)}>{userData.user.displayName}</button>}\r\n                                <button className=\"dropdown-item\" onClick={() => logout()}>{lang.Header.logOut[userData.user.lang]}</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    }\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Header)","import React from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { switchLang } from '../../redux/actions'\r\n\r\nimport './Footer.scss'\r\n\r\nfunction Footer(props) {\r\n    const dispatch = useDispatch()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    return (\r\n        <footer className={`footer py-3 bg-${userData.user.darkMode ? 'dark' : 'light'} mt-3`}>\r\n            <div className=\"container d-flex justify-content-end\">\r\n                <select className=\"form-control select-lang\" value={props.userData.user.lang} onChange={(e) => dispatch(switchLang(e.target.value))}>\r\n                    <option value=\"ru\">ru</option>\r\n                    <option value=\"en\">en</option>\r\n                </select>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Footer)","import React, { useState, useEffect } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\nimport Axios from 'axios'\r\nimport { getCollection, getItem } from '../../redux/actions'\r\nimport { API_URL } from '../../config'\r\n\r\nfunction ItemLike({ likes, id, homeAction }) {\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const [liked, setLiked] = useState(false)\r\n    const [likesNumber, setLikesNumber] = useState(0)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        setLiked((userData.user && likes.usersId.findIndex(e => e === `${userData.user.id}`)) >= 0)\r\n        setLikesNumber(likes.number)\r\n    }, [likes, userData])\r\n\r\n    async function toggleLike() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/like`, {\r\n                itemId: id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            if(typeof homeAction === 'function') {\r\n                homeAction()\r\n            }  \r\n            else {\r\n                dispatch(getCollection(collection._id))\r\n                dispatch(getItem(id))\r\n            }\r\n     \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <span onClick={toggleLike} style={{cursor: 'pointer'}} className=\"ml-auto\">\r\n                {liked ? \r\n                <Icon.HeartFill className=\"item-liked\"/>\r\n                : <Icon.Heart className=\"item-unliked\"/>} {likesNumber}\r\n            </span>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ItemLike","import React from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './MainPicture.scss'\r\n\r\nfunction MainPicture({ picture, className, styles }) {\r\n    return (\r\n        <div className={className}>\r\n            {picture ? \r\n            <div className=\"main-picture\" style={{backgroundImage: `url(${picture})`, ...styles}}>\r\n            </div>:\r\n            <div className=\"main-picture\"  style={styles}>\r\n                <Icon.Image size={30}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MainPicture","import React from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\nimport Axios from 'axios'\r\nimport Like from './ItemLike'\r\nimport MainPicture from '../mainPicture/MainPicture'\r\n\r\nimport { clearErrorAll, getCollection, setError, setItem, setNotify } from '../../redux/actions'\r\nimport { useHistory } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport { API_URL } from '../../config'\r\n\r\nimport './Item.scss'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Item(props) {\r\n    const { author, year, title, _id, picture, collection_id } = props.itemProps\r\n    const likes = props.itemProps.likes\r\n    const { homeAction } = props\r\n\r\n    const location = useLocation()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function toCollection(e) {\r\n        history.push(`/collection?collection_id=${collection_id}&item_id=${_id}`)\r\n    }\r\n\r\n    async function deleteItem() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch(setNotify(true))\r\n            await Axios.delete(`${API_URL}/api/item/delete`, {\r\n                params: {\r\n                    id: _id,\r\n                    collection_id\r\n                },\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getCollection(collection_id))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card border item\" \r\n            style={{width: '12rem'}}\r\n            >\r\n                <MainPicture picture={picture} title={title} styles={{height: 100}} className=\"card-img-top\"/>\r\n                <div className=\"card-body\" onClick={(e) => toCollection(e)} style={{cursor: 'pointer'}}>\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <ul className=\"list-group list-group-flush\">\r\n                        {author &&\r\n                        <li className=\"list-group-item\">{lang.Item.author[userData.user.lang]}: {author}</li>}\r\n                        {year && \r\n                        <li className=\"list-group-item\">{lang.Item.date[userData.user.lang]}: {new Date(year).toLocaleDateString()}</li>}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"d-flex card-footer\">\r\n                    {location.pathname === '/collection' \r\n                    && (userData.user.userRole === 'admin' || collection.owner === userData.user.id) &&\r\n                    <>\r\n                        <span \r\n                            style={{cursor: 'pointer'}}\r\n                            data-toggle=\"modal\"\r\n                            data-target=\"#editItem\"\r\n                            onClick={(e) => {\r\n                                dispatch(setItem({...props.itemProps}))                           \r\n                            }}\r\n                        >\r\n                            {lang.Item.edit[userData.user.lang]}\r\n                        </span>\r\n                        <span className=\"ml-1\" style={{cursor: 'pointer'}} onClick={deleteItem}>\r\n                            <Icon.TrashFill className=\"text-danger\"/>\r\n                        </span>\r\n                    </>\r\n                    }\r\n                    <Like likes={likes} id={_id} homeAction={homeAction}/>\r\n                </div>\r\n            </div>      \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport './Slider.scss'\r\n\r\nimport Item from '../items/Item'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction LastAdded({ lastAdded }){\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex justify-content-center pb-5 pt-5\">\r\n                <Item itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {lastAdded.length > 0 && \r\n            <>\r\n                <h2>Last added</h2>\r\n                <Swiper\r\n                navigation\r\n                pagination={{ clickable: true }}\r\n                spaceBetween={50}\r\n                slidesPerView={1}\r\n                breakpoints={{\r\n                    576: {\r\n                        slidesPerView: 2\r\n                    },\r\n                    768: {\r\n                        slidesPerView: 3\r\n                    },\r\n                    1200: {\r\n                        slidesPerView: 4\r\n                    }\r\n                }}\r\n                >\r\n                    {lastAdded.map(carouselItem)}\r\n                </Swiper>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(LastAdded)","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Scrollbar } from 'swiper';\r\n\r\nimport './Tags.scss'\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\nimport { setSearch } from '../../redux/actions';\r\n\r\nSwiperCore.use([Scrollbar]);\r\n\r\nfunction Tags({ tags }){\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function searchTag(tag){\r\n        dispatch(setSearch(tag))\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} onClick={() => searchTag(e.text)}>\r\n                <div className=\"border text-center rounded bg-light text-dark tag\" style={{cursor: 'pointer'}}>\r\n                    {e.text}\r\n                </div>        \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-2 mb-2\">\r\n            {tags.length > 0 &&\r\n            <Swiper\r\n            spaceBetween={50}\r\n            slidesPerView={2}\r\n            scrollbar={{ draggable: true }}\r\n            className=\"d-flex justify-content-center pb-3\"\r\n            breakpoints={{\r\n                576: {\r\n                    slidesPerView: 4\r\n                },\r\n                768: {\r\n                    slidesPerView: 5\r\n                },\r\n                992: {\r\n                    slidesPerView: 6\r\n                },\r\n                1200: {\r\n                    slidesPerView: 8\r\n                }\r\n            }}\r\n            >\r\n                {tags.map(carouselItem)}\r\n            </Swiper>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(Tags)","import React, { useRef } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport $ from 'jquery'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\n\r\nimport Like from './ItemLike'\r\nimport MainPicture from '../mainPicture/MainPicture'\r\n\r\nimport { getItem, setItem } from '../../redux/actions'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Item(props) {\r\n    const { author, year, title, _id, picture, collection_id } = props.itemProps\r\n    const likes = props.itemProps.likes\r\n    const { homeAction } = props\r\n\r\n    const location = useLocation()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const card = useRef()\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function hover() {\r\n        $(card.current).toggleClass('border-primary')\r\n    }\r\n\r\n    function toCollection(e) {\r\n        dispatch(getItem(_id))\r\n\r\n        history.push(`/collection?collection_id=${collection_id}`)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"row w-100 justify-content-center\">\r\n                <div className=\"d-flex row col-8 bg-light border rounded\">\r\n                    <div className=\"d-flex flex-column col-md-6 justify-content-between p-2 order-md-1 order-2\">\r\n                        <div className=\"d-flex flex-column text-center\">\r\n                            <h4>{title}</h4>\r\n                            <div className=\"text-left mt-3\">\r\n                                <ul className=\"list-group\">\r\n                                    {author && <li className=\"list-group-item\">Author: {author}</li>}\r\n                                    {year && <li className=\"list-group-item\">Date: {new Date(year).toLocaleDateString()}</li>}\r\n                                </ul>\r\n                            </div>   \r\n                        </div>\r\n                        <div className=\"d-flex justify-content-between mt-1\">\r\n                            <button className=\"btn btn-primary\" onClick={toCollection}>View item</button>\r\n                            <Like likes={likes} id={_id}/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 p-2 p-md-0 order-1 order-md-2\">\r\n                        <MainPicture picture={picture}/>\r\n                    </div>\r\n                </div>\r\n            </div>     \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport HomeItem from '../items/HomeItem'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction MostLike({ mostLike }){\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex pb-5 pt-5 justify-content-center\">\r\n                <HomeItem itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {mostLike.length > 0 && \r\n            <>\r\n            <h2>Most like</h2>\r\n            <Swiper\r\n            navigation\r\n            pagination={{ clickable: true }}\r\n            spaceBetween={50}\r\n            slidesPerView={1}\r\n            >\r\n                {mostLike.map(carouselItem)}\r\n            </Swiper>\r\n        </>    \r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(MostLike)","import React from 'react'\r\nimport './Spinner.scss'\r\n\r\nfunction Spinner(){\r\n    return (\r\n        <div className=\"spinner d-flex w-100 justify-content-center align-items-center\">\r\n            <div className=\"spinner-grow text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner","import React, { useEffect } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { clearErrorAll, getHome } from '../../redux/actions'\r\n\r\nimport LastAdded from '../homeSections/LastAdded'\r\nimport Tags from '../homeSections/Tags'\r\nimport MostLike from '../homeSections/MostLike'\r\n\r\nimport lang from '../../lang.json'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nfunction Home(props){\r\n    const { loading } = useSelector(state => state.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(clearErrorAll())\r\n        dispatch(getHome(true))\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            dispatch(getHome())\r\n        }, 2000)\r\n        \r\n        return () => clearInterval(interval)\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {!loading &&\r\n            <>\r\n                <Tags/>\r\n                <div className=\"row text-center\">\r\n                    <div className=\"col-12 \">\r\n                        <LastAdded/>\r\n                    </div>\r\n                    <div className=\"col-12 most-like\">\r\n                        <MostLike/>\r\n                    </div>\r\n                </div>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Home)","import { useState } from 'react'\r\n\r\nexport default function useInputValue(field, placeholder, name, style){\r\n    const [value, setValue] = useState('');\r\n\r\n    return {\r\n        bind: {\r\n            value,\r\n            type: field,\r\n            style,\r\n            id: `${name || field}Input`,\r\n            className: 'form-control mb-2',\r\n            placeholder: placeholder || field,\r\n            name: name || field,\r\n            onChange: event => setValue(event.target.value),\r\n            required: true\r\n        },\r\n        clear: () => setValue(''),\r\n        value: () => value\r\n    }\r\n}","import React, { Component } from 'react';\r\n\r\nimport Icon24LogoVK from '@vkontakte/icons/dist/24/logo_vk_color';\r\n\r\nconst styles = {\r\n    btn: {\r\n        backgroundColor: 'rgb(255, 255, 255)',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        color: 'rgba(0, 0, 0, 0.54)',\r\n        boxShadow: 'rgba(0, 0, 0, 0.24) 0px 2px 2px 0px, rgba(0, 0, 0, 0.24) 0px 0px 1px 0px',\r\n        padding: 0,\r\n        borderRadius: 2,\r\n        border: '1px solid transparent',\r\n        fontSize: 14,\r\n        fontWeight: 500,\r\n        fontFamily: 'Roboto, sans-serif'\r\n    },\r\n    div: {\r\n        background: 'rgb(255, 255, 255)',\r\n        padding: 10,\r\n        borderRadius: 2\r\n    },\r\n    span: {\r\n        padding: '10px 10px 10px 0px',\r\n        fontWeight: 500\r\n    }\r\n}\r\n\r\nexport default class VkAuth extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isLoaded: false,\r\n            isProcessing: false,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.sdkLoaded();\r\n        this.asyncInit();\r\n        this.loadSdkAsync();\r\n    }\r\n\r\n    asyncInit() {\r\n        const { apiId } = this.props;\r\n        window.vkAsyncInit = () => {\r\n        window.VK.init({ apiId });\r\n        this.setState({ isLoaded: true });\r\n        };\r\n    }\r\n\r\n    sdkLoaded() {\r\n        this.setState({ isLoaded: true });\r\n    }\r\n\r\n    loadSdkAsync() {\r\n        const el = document.createElement('script');\r\n        el.type = 'text/javascript';\r\n        el.src = 'https://vk.com/js/api/openapi.js?';\r\n        el.async = true;\r\n        el.id = 'vk-sdk';\r\n        document.getElementsByTagName('head')[0].appendChild(el);\r\n    }\r\n\r\n    checkLoginState = (response) => {\r\n        this.setState({ isProcessing: false });\r\n\r\n        this.props.callback(response);\r\n    };\r\n\r\n    handleClick = () => {\r\n        if (!this.state.isLoaded || this.state.isProcessing || this.props.disabled) {\r\n        return;\r\n        }\r\n        this.setState({ isProcessing: true });\r\n        window.VK.Auth.login(this.checkLoginState);\r\n    };\r\n\r\n    render() {\r\n        const { disabled, callback, apiId, containerStyle, ...buttonProps } = this.props;\r\n        return (\r\n        <button\r\n            {...buttonProps}\r\n            onClick={this.handleClick}\r\n            style={styles.btn}>\r\n            <div style={styles.div}>    \r\n                <Icon24LogoVK height={18}/>\r\n            </div>\r\n            <span style={styles.span}>\r\n                Login\r\n            </span>\r\n        </button >\r\n        );\r\n    }\r\n}","import React, { createRef, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { GoogleLogin } from 'react-google-login'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\n\r\nimport VkAuth from './VkAuth';\r\nimport { setUser } from '../../redux/actions'\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Login(props) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password')\r\n    const remember = createRef(false)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token) \r\n        history.push('/')\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && resVk.session && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n        \r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/login`, {email: email.value(), password: password.value(), idToken, vkId})\r\n             dispatch(setUser((response.data))) \r\n             if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n            history.push('/')\r\n            window.location.reload()\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">      \r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"form-signin\" onSubmit={(e) => login(e)}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">{lang.logIn.signIn[userData.user.lang]}</h1>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">{lang.logIn.emailAdress[userData.user.lang]}</label>\r\n                        <input {...email.bind} autoFocus/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">{lang.logIn.password[userData.user.lang]}</label>\r\n                        <input {...password.bind}/>\r\n                        <div className=\"checkbox mb-3\">\r\n                            <label>\r\n                                <input type=\"checkbox\" value=\"remember-me\" ref={remember}/> {lang.logIn.rememberMe[userData.user.lang]}\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">{lang.logIn.signIn[userData.user.lang]}</button>\r\n                    </form>       \r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Login);","import React, { useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { GoogleLogin } from 'react-google-login'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\nimport { setUser } from '../../redux/actions'\r\nimport VkAuth from './VkAuth'\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Register(props) {\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password', 'Password')\r\n    const passwordCheck = useInputValue('password', 'Confirm password', 'passwordCheck')\r\n    const name = useInputValue('text', 'Name', 'displayName')\r\n    const history = useHistory();\r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token)\r\n        history.push('/')\r\n\r\n    async function register(e) {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n            await Axios.post(`${API_URL}/api/user/register`, {\r\n                displayName: name.value(),\r\n                email: email.value(), \r\n                password: password.value(),\r\n                passwordCheck: passwordCheck.value(),\r\n            })\r\n    \r\n            history.push('/login')\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response.data.error.message)\r\n        }\r\n    }\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n\r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/login`, {email: email.value(), password: password.value(), idToken, vkId})\r\n\r\n            dispatch(setUser((response.data))) \r\n\r\n            if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n\r\n            history.push('/')\r\n            window.location.reload()\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">\r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"needs-validation\" onSubmit={register}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">{lang.Register.signUp[userData.user.lang]}</h1>\r\n                        <div>\r\n                            <label htmlFor=\"namelInput\" className=\"sr-only\">{lang.Register.name[userData.user.lang]}</label>\r\n                            <input {...name.bind} autoFocus/>\r\n                        </div>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">{lang.Register.emailAddress[userData.user.lang]}</label>\r\n                        <input {...email.bind}/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">{lang.Register.password[userData.user.lang]}</label>\r\n                        <input {...password.bind}/>\r\n                        <label htmlFor=\"passwordCheckInput\" className=\"sr-only\">{lang.Register.passwordConfirm[userData.user.lang]}</label>\r\n                        <input {...passwordCheck.bind}/>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">{lang.Register.signUp[userData.user.lang]}</button>\r\n                    </form>\r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Register);","import React, { useCallback } from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './FileInput.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction FileInput({ picture, setPicture }) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const onDrop = useCallback((acceptedFiles) => {\r\n        acceptedFiles.forEach((file) => {\r\n            const reader = new FileReader()          \r\n\r\n            reader.readAsDataURL(file)\r\n\r\n            reader.onload = () => {\r\n                setPicture(reader.result)\r\n            }\r\n        })\r\n        \r\n    }, [setPicture])\r\n\r\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({maxFiles: 1, accept: 'image/jpeg, image/png', onDrop});\r\n    \r\n    return (\r\n        <div className=\"d-flex flex-column w-100\">   \r\n            <div {...getRootProps()} \r\n            className=\"d-flex justify-content-center align-items-center border border-primary w-100 p-3 rounded  drag-zone\"\r\n            style={{height: `${isDragActive ? 70 : 50}px`}}>\r\n                <input {...getInputProps()} />\r\n                <span className=\"text-primary\">{isDragActive ? \r\n                <Icon.Upload size={30}/> :\r\n                lang.FileInput.dragAndDrop[userData.user.lang]}</span>\r\n            </div>\r\n            {picture && \r\n            <aside className=\"mt-1\">\r\n                <h5>Preview</h5>\r\n                <img src={picture} className=\"img-fluid rounded\" width=\"100\" alt=\"example\"/>\r\n            </aside>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileInput","import React, { useState } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\nimport { setError, endLoadingPage, startLoadingPage, setNotify, clearErrorAll, getAllCollections } from '../../redux/actions'\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddCollectionModal.css'\r\nimport { START_LOADING_COLLECTION, END_LOADING_COLLECTION } from '../../redux/types'\r\n\r\n\r\nfunction AddCollectionModal(params) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const location = useLocation()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [topic, setTopic] = useState('Books')\r\n    const [description, setDescription] = useState('')\r\n    const [author, setAuthor] = useState(false)\r\n    const [comments, setComments] = useState(true)\r\n    const [year, setYear] = useState(false)\r\n    const [picture, setPicture] = useState('')\r\n \r\n    console.log('Add: ' + author);\r\n\r\n    const id = new URLSearchParams(location.search).get('id')\r\n\r\n    async function addCollection() {\r\n        dispatch(clearErrorAll())\r\n        dispatch({\r\n            type: START_LOADING_COLLECTION\r\n        })\r\n        dispatch(setNotify(true))\r\n        try {  \r\n            await Axios.post(`${API_URL}/api/collections/upload`, {\r\n                owner: id,\r\n                title,\r\n                topic,\r\n                description,\r\n                author,\r\n                comments,\r\n                year,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })  \r\n            \r\n            setPicture('')\r\n            setAuthor(false)\r\n            setComments(true)\r\n            setTopic('Books')\r\n            setTitle('')\r\n            setYear(false)\r\n            setDescription('')\r\n\r\n            dispatch(getAllCollections(id))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({\r\n                type: END_LOADING_COLLECTION\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>  \r\n            <div className=\"modal fade\" id=\"addCollection\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>   \r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddCollectionModal.collectionSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddCollectionModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} className=\"form-control\" placeholder={lang.AddCollectionModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">{lang.AddCollectionModal.topic[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <select className=\"custom-select\" value={topic} id=\"inputGroupSelect01\" onChange={(e) => setTopic(e.target.value)}>\r\n                                        <option value=\"Books\">Books</option>\r\n                                        <option value=\"Alcohol\">Alcohol</option>\r\n                                        <option value=\"CS:GO Skins\">CS:GO Skins</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddCollectionModal.description[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <textarea className=\"form-control\" value={description} onChange={(e) => setDescription(e.target.value)} aria-label=\"With textarea\"></textarea>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={comments} onChange={(e) => setComments(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddCollectionModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={author} onChange={(e) => setAuthor(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddCollectionModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input defaultChecked={year} onChange={(e) => setYear(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddCollectionModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddCollectionModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={addCollection}>{lang.AddCollectionModal.save[userData.user.lang]}</button>\r\n                            </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddCollectionModal","import React from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport Modal from './AddCollectionModal'\r\n\r\nimport './BtnAddCollection.scss'\r\n\r\nfunction BtnAddCollection({ styles }) {\r\n    return (\r\n        <>\r\n            <div className=\"card add-collection bg-light text-primary\" data-toggle=\"modal\" data-target=\"#addCollection\" style={{width: '12rem', ...styles}}>\r\n                <div className=\"card-body d-flex justify-content-center align-items-center\" style={{height: '15rem'}}>\r\n                    <span><Icon.PlusCircle height={'50px'} width={'50px'}/></span>\r\n                </div>\r\n            </div>\r\n\r\n            <Modal/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BtnAddCollection","import React from 'react'\r\n\r\nexport default function SpinnerComponent() {\r\n    return (\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n        </div> \r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport MainPicture from '../mainPicture/MainPicture'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\nimport { clearErrorAll, endLoadingPage, getAllCollections, getCollection, setError, setNotify, startLoadingPage } from '../../redux/actions'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { title, topic, description, picture, _id, owner } = props \r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()\r\n\r\n    function editCollection() {\r\n        dispatch(getCollection(_id))\r\n    }\r\n\r\n    async function deleteCollection() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch(startLoadingPage())\r\n            dispatch(setNotify(true))\r\n            await Axios.delete(`${API_URL}/api/collections/delete`, {\r\n                params: {\r\n                    id: _id\r\n                },\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getAllCollections(owner))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card\">\r\n                <MainPicture picture={picture} />\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <h6 className=\"card-subtitle mb-2 text-muted\">{topic}</h6>\r\n                    <ReactMarkdown source={description}/>\r\n                </div>\r\n                <div className=\"card-footer d-flex align-items-center justify-content-between\">\r\n                    <Link to={`/collection?collection_id=${_id}`} className=\"btn btn-primary\">{lang.CollectionCard.explore[userData.user.lang]}</Link>\r\n                    {(userData.user && (userData.user.id === owner || userData.user.userRole === 'admin')) &&\r\n                    <div className=\"dropdown dropup\">\r\n                        <span id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" style={{cursor: 'pointer'}}>\r\n                            <Icon.ThreeDotsVertical/>\r\n                        </span>\r\n                        <div className=\"dropdown-menu dropdown-menu-left\" aria-labelledby=\"dropdownMenuButton\">\r\n                            <button className=\"dropdown-item\" type=\"button\" onClick={deleteCollection}><Icon.TrashFill className=\"text-danger\"/> Delete</button>\r\n                            <button className=\"dropdown-item\" type=\"button\" data-toggle=\"modal\" data-target=\"#editCollection\" onClick={editCollection}><Icon.PencilFill/> Edit</button>\r\n                        </div>\r\n                    </div> \r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React, { createRef, useEffect, useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\nimport './AddCollectionModal.css'\r\n\r\nimport lang from '../../lang.json'\r\nimport { getAllCollections } from '../../redux/actions'\r\n\r\nfunction AddCollectionModal({ id }) {\r\n    const closeModal = createRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [topic, setTopic] = useState('Books')\r\n    const [description, setDescription] = useState('')\r\n    const [author, setAuthor] = useState(false)\r\n    const [comments, setComments] = useState(true)\r\n    const [year, setYear] = useState(false)\r\n    const [picture, setPicture] = useState('')\r\n\r\n    useEffect(() => {\r\n        if(collection){\r\n            setTitle(collection.title)\r\n            setTopic(collection.topic)\r\n            setDescription(collection.description)\r\n            setAuthor(collection.author)\r\n            setComments(collection.comments)\r\n            setYear(collection.year)\r\n            setPicture(collection.picture)\r\n        }\r\n    }, [collection])\r\n\r\n    async function editCollection() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/collections/edit`, {\r\n                picture,\r\n                topic,\r\n                author,\r\n                comments,\r\n                year,\r\n                description,\r\n                title,\r\n                id: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getAllCollections(id))\r\n            closeModal.current.click()\r\n        } catch (error) {\r\n            \r\n        }        \r\n    }\r\n\r\n    return (\r\n        <>           \r\n            <div className=\"modal fade\" id=\"editCollection\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>   \r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddCollectionModal.collectionSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddCollectionModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} className=\"form-control\" placeholder={lang.AddCollectionModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">{lang.AddCollectionModal.topic[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <select className=\"custom-select\" value={topic} id=\"inputGroupSelect01\" onChange={(e) => setTopic(e.target.value)}>\r\n                                        <option value=\"Books\">Books</option>\r\n                                        <option value=\"Alcohol\">Alcohol</option>\r\n                                        <option value=\"CS:GO Skins\">CS:GO Skins</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddCollectionModal.description[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <textarea className=\"form-control\" value={description} onChange={(e) => setDescription(e.target.value)} aria-label=\"With textarea\"></textarea>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={comments} onChange={(e) => setComments(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddCollectionModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={author} onChange={(e) => setAuthor(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddCollectionModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input defaultChecked={year} onChange={(e) => console.log(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddCollectionModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" ref={closeModal}>{lang.AddCollectionModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={editCollection}>{lang.AddCollectionModal.save[userData.user.lang]}</button>\r\n                            </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddCollectionModal","import React, { useCallback, useEffect } from 'react'\r\n\r\nimport SpinnerComponent from '../spinner/SpinnerComponent'\r\nimport CardCollection from './CardCollection'\r\nimport './CollectionsItems.scss'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getAllCollections } from '../../redux/actions'\r\nimport EditModal from './EditCollectionModal'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { id } = props \r\n    const dispatch = useDispatch()\r\n\r\n    const { collections, loading } = useSelector(state => state.allCollections)\r\n\r\n    useEffect(() => {\r\n        dispatch(getAllCollections(id))    \r\n    }, [dispatch, id])\r\n\r\n    return (\r\n        <>\r\n            {loading && \r\n            <div className=\"text-center mt-2\">\r\n                <SpinnerComponent/>\r\n            </div>\r\n            }\r\n            {collections.length && !loading && \r\n            <div className=\"d-flex collections-container flex-wrap justify-content-center  mt-3\">\r\n                {collections.map((e) => (\r\n                    <CardCollection key={e._id} {...e}/>\r\n                ))}\r\n                <EditModal id={id}/>\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React, { useState, useEffect } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { useSelector, connect, useDispatch } from 'react-redux'\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\nimport UserPicture from '../userPicture/UserPicture' \r\nimport AddBtn from '../collection/BtnAddCollection'\r\nimport AddModal from '../collection/AddCollectionModal'\r\n\r\n\r\nimport './Profile.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport { clearErrorAll, endLoadingPage, setError, startLoadingPage } from '../../redux/actions'\r\nimport CollectionsItems from '../collection/CollectionsItems'\r\n\r\nfunction Profile({ userData }) {\r\n    const { loading } = useSelector(state => state.error)\r\n    const { collections } = useSelector(state => state.allCollections) \r\n    const [userProfile, setUserProfile] = useState({});  \r\n    const location = useLocation();\r\n    const id = new URLSearchParams(location.search).get('id')\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        const getProfileData = async () => {\r\n            dispatch(clearErrorAll())\r\n            dispatch(startLoadingPage())\r\n            console.log(id)\r\n\r\n            try {\r\n                const response = await Axios.get(`${API_URL}/api/user/profile`, {\r\n                    params: {\r\n                        id \r\n                    }\r\n                })\r\n                setUserProfile(response.data)\r\n            } catch (error) {\r\n                dispatch(setError(error))\r\n            }\r\n            finally {\r\n                dispatch(endLoadingPage())\r\n            }\r\n        };\r\n\r\n        getProfileData()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    return (\r\n        <>\r\n            {loading && !userProfile.user && <Spinner/>}\r\n            {userProfile.user && \r\n            <>\r\n                <div className=\"d-flex mt-3 align-items-center flex-md-row flex-column\" style={{gap: '3rem'}}>\r\n                    <div className=\"d-flex flex-column\">\r\n                        <div className={`text-center p-3 ${userData.user.darkMode && 'text-light bg-dark'}`} style={{borderRadius: 10}}>\r\n                            <UserPicture picture={userProfile.user.userPhoto} name={userProfile.user.displayName} styles={{width: 180, height: 180, fontSize: '5rem'}}/>\r\n                            <h4>{userProfile.user.displayName}</h4>\r\n                            <span>{userProfile.user.userRole}</span>\r\n                        </div>\r\n                        {userData.user.userRole === 'admin' && \r\n                        <div \r\n                        className={`bg-${userData.user.darkMode ? 'dark' : 'light'} text-center p-3 mt-1`} \r\n                        style={{borderRadius: 10}}>\r\n                            <Link to=\"/admin\" className={`btn btn-${!userData.user.darkMode ? 'dark' : 'light'}`}>Admin panel</Link>\r\n                        </div>}\r\n                    </div>\r\n                    <div className={`bg-${userData.user.darkMode ? 'dark' : 'light'} p-3 w-100`} style={{borderRadius: 10}}>\r\n                        <h2>About</h2>\r\n                        <ul className=\"list-group list-group-flush\">\r\n                            <li className=\"list-group-item\">Email: {userProfile.user.email}</li>\r\n                            <li className=\"list-group-item\">Register date: {new Date(parseFloat(userProfile.user.registerDate)).toLocaleDateString()}</li>\r\n                            <li className=\"list-group-item\">Number of collections: {collections.length}</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                {(userData.user.userRole === 'admin' || userData.user.id === id) &&\r\n                <div className=\"text-center mt-2\">\r\n                    <AddBtn styles={{width: '100%'}}/>\r\n                    <AddModal/>\r\n                </div>\r\n                }\r\n                <CollectionsItems id={id}/>\r\n            </>\r\n            }    \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData\r\n\r\nexport default connect(mapStateToProps, null)(Profile)","import React from 'react';\r\nimport { useDispatch, connect } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { isLogin } from '../../redux/actions';\r\n\r\nconst PrivateRoute = ({component: Component, ...rest}) => {\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <Route {...rest} render={props => (\r\n            dispatch(isLogin) ?\r\n                <Component {...props} />\r\n            : <Redirect to={{pathname: \"/login\", state: {nextPathname: props.location.pathname}}}/>\r\n        )} />\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute)","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport { deleteUser, setAdmin, removeAdmin, blockUser, unblockUser } from '../../redux/actions';\r\nimport { API_URL } from '../../config'\r\n\r\nfunction Users() {\r\n    const [users, setUsers] = useState([])\r\n    const [flack, setFlack] = useState(false)\r\n    const [actionsUsers, setActionsUsers] = useState([])\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const { userData } = useSelector(state => state.userData)\r\n    const error = useSelector(state => state.error)\r\n    const dispatch = useDispatch()\r\n    const keys = ['displayName', 'email', 'registerDate', 'userRole']\r\n\r\n    useEffect(() => {\r\n        const getUsers = async () => {\r\n            if(!userData.token)\r\n                return;\r\n            try {\r\n                const response = await Axios.get(`${API_URL}/api/user/users`, {\r\n                    headers: {\r\n                        'x-auth-token': userData.token \r\n                    }\r\n                })\r\n      \r\n                if(response.data) {\r\n                    setUsers(response.data)\r\n                }\r\n    \r\n            } catch (error) {\r\n                setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n                setErrorLoading(true)\r\n            }\r\n        }\r\n\r\n        getUsers()\r\n    }, [userData, users.length])\r\n\r\n    useEffect(() => {\r\n        setErrorMessage(error.error.message)\r\n        error.error.message && setErrorLoading(true)\r\n    }, [error])\r\n\r\n    function compare(a, b, key, flack) {\r\n        if (a[key] === b[key]) return 0;\r\n        if (a[key] > b[key]) return flack ? 1 : -1; \r\n        if (a[key] < b[key]) return flack ? -1 : 1;\r\n    }\r\n\r\n    function sort(e, key) {\r\n        setFlack(!flack)\r\n        setUsers(users.sort((a, b) => compare(a, b, key, flack)).slice())\r\n        setTimeout(() => {\r\n            e.target.blur()\r\n        }, 100)\r\n    }\r\n\r\n    function userForAction(e, id) {\r\n        if(e.target.checked)\r\n            setActionsUsers([...actionsUsers, id])\r\n        else setActionsUsers(actionsUsers.filter(e => e !== id))\r\n    }\r\n\r\n    function action(title) {\r\n        switch (title) {\r\n            case 'delete':\r\n                dispatch(deleteUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'setAdmin':\r\n                dispatch(setAdmin(userData.token, actionsUsers))\r\n                break;\r\n            case 'removeAdmin':\r\n                dispatch(removeAdmin(userData.token, actionsUsers, error))\r\n                break; \r\n            case 'block':\r\n                dispatch(blockUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'unblock':  \r\n                dispatch(unblockUser(userData.token, actionsUsers))\r\n                break;  \r\n            default:\r\n                break;\r\n        }       \r\n\r\n        setUsers([])\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {(!users.length || errorMessage) && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n\r\n        {users.length ? \r\n        <>\r\n            <div className=\"d-flex flex-column w-100 mb-2\">\r\n                <div className=\"d-flex flex-xl-row flex-column align-items-center\">\r\n                    <div className=\"btn-group btn-group-sm-sm mr-xl-auto mb-xl-0 mb-1\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'displayName')}>Name</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'email')}>Email</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'registerDate')}>Register date</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'userRole')}>User role</button>\r\n                    </div>\r\n                    <div className=\"btn-group btn-group-sm-sm\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('delete')}>Delete <Icon.TrashFill/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('block')}>Blocked <Icon.LockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('unblock')}>Unblocked <Icon.UnlockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('setAdmin')}>Set admin <Icon.PersonPlusFill style={{marginBottom: 3}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('removeAdmin')}>Remove admin <Icon.PersonXFill style={{marginBottom: 3}}/></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <table className=\"table table-bordered table-hover table-responsive-md\">\r\n                <caption>List of users</caption>\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th>Select</th>\r\n                        <th>Name</th>\r\n                        <th>Email</th>\r\n                        <th>Regiser Date</th>\r\n                        <th>User role</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map((e, i) => {\r\n                        return (\r\n                        <tr key={i} className={`${e['blocked'] && 'table-danger'}${actionsUsers.findIndex(user => user === e['_id']) > -1 ? ' table-primary' : ''}`}>\r\n                            <td>\r\n                                <div className=\"text-center\">\r\n                                    <input id={e['_id']} type=\"checkbox\" readOnly checked={actionsUsers.findIndex(user => user === e['_id']) > -1} className=\"form-check-label\" onClick={(event) => userForAction(event, e['_id'])}/>\r\n                                </div>\r\n                            </td>\r\n                            {keys.map((key, ind) => (\r\n                                <td key={ind}>{key === 'displayName' ?\r\n                                <Link className=\"text-decoration-none\" to={`/profile?id=${e['_id']}`}>{e['blocked'] ? \r\n                                    <> {e[key]} <Icon.LockFill style={{marginBottom: 4}}/> </> : \r\n                                    e[key]}</Link> :\r\n                                e[key]}</td>\r\n                            ))}            \r\n                        </tr>\r\n                        )\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </>:<></>}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Users)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Users from '../users/Users'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Admin(props){\r\n    return (\r\n        <>\r\n            {props.userData.token && props.userData.user.userRole !== 'admin' ? \r\n            <h1>{lang.Admin.permission[props.userData.user.lang]} :(</h1> :\r\n            <Users/>} \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Admin)","import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\nimport Axios from 'axios'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { getCollection, setNotify, clearErrorAll, setError } from '../../redux/actions'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddItem.scss'\r\nimport { END_LOADING_COLLECTION, START_LOADING_COLLECTION } from '../../redux/types'\r\n\r\nconst baseTagifySettings = {\r\n    blacklist: [\"xxx\", \"yyy\", \"zzz\"],\r\n    maxTags: 5,\r\n    placeholder: \"type something\",\r\n    dropdown: {\r\n      enabled: 0\r\n    }\r\n  }\r\n\r\nfunction AddItemModal(props) {\r\n    const {author, year, comments, id} = props\r\n\r\n    const tagifyRef = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [itemAuthor, setItemAuthor] = useState('')\r\n    const [itemDate, setItemDate] = useState('')\r\n    const [tagifySettings] = useState([])\r\n    const [tagifyProps, setTagifyProps] = useState({})\r\n    const [picture, setPicture] = useState('')\r\n\r\n    \r\n    const fetchItems = useCallback(() => {\r\n        dispatch(getCollection(id))            \r\n    }, [id, dispatch]) \r\n\r\n    async function addItem() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch({type: START_LOADING_COLLECTION})\r\n            dispatch(setNotify(true))\r\n\r\n            await Axios.post(`${API_URL}/api/item/add`, {\r\n                title,\r\n                date: itemDate,\r\n                author: itemAuthor,\r\n                tags: tagifyRef.current.value,\r\n                id,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            fetchItems()\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({type: END_LOADING_COLLECTION})\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getTags = async () => {\r\n            try {\r\n                setTagifyProps({loading: true})\r\n\r\n                const response = await Axios.get(`${API_URL}/api/item/tags`)\r\n\r\n                setTagifyProps((lastProps) => ({\r\n                    ...lastProps,\r\n                    whitelist: response.data.map(e => e.text),\r\n                    loading: false\r\n\r\n                }))\r\n            } catch (error) {\r\n                \r\n            }\r\n            \r\n        }\r\n        getTags()\r\n    }, [])\r\n\r\n    const settings = {\r\n        ...baseTagifySettings,\r\n        ...tagifySettings\r\n      }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"addItem\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>\r\n                        <>\r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddItemModal.itemSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={comments} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddItemModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={author} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddItemModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input disabled defaultChecked={year} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddItemModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddItemModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={title} \r\n                                    onChange={(e) => setTitle(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder={lang.AddItemModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                {author && \r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddItemModal.author[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={itemAuthor}\r\n                                    onChange={(e) => setItemAuthor(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder={lang.AddItemModal.author[userData.user.lang]} aria-label=\"Author\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                }\r\n                                {year &&\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddItemModal.date[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    onChange={(e) => setItemDate(e.target.valueAsNumber)} \r\n                                    type=\"date\" className=\"form-control\" placeholder={lang.AddItemModal.date[userData.user.lang]} aria-label=\"Date\"/>\r\n                                </div>\r\n                                }\r\n                                <div className=\"input-group mb-3\">\r\n                                    <Tags\r\n                                    tagifyRef={tagifyRef}\r\n                                    settings={settings}\r\n                                    {...tagifyProps}\r\n                                    placeholder={lang.AddItemModal.tags['en']}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddItemModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={addItem}>{lang.AddItemModal.addItem[userData.user.lang]}</button>\r\n                            </div> \r\n                        </>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default AddItemModal","import React, { useRef } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport AddModal from './AddItemModal'\r\n\r\nimport './AddItem.scss'\r\n\r\nfunction AddItem(props) {\r\n    const card = useRef()\r\n\r\n    return (\r\n        <>\r\n            <div ref={card} className=\"card add-item bg-light\" data-toggle=\"modal\" data-target=\"#addItem\" style={{width: '12rem'}}>\r\n                <div className=\"card-body d-flex justify-content-center align-items-center\" style={{height: '15rem'}}>\r\n                    <span><Icon.PlusCircle height={'50px'} width={'50px'}/></span>\r\n                </div>\r\n            </div>\r\n\r\n            <AddModal {...props}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddItem","import React, {  } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\nimport { API_URL } from '../../config'\r\nimport './Comment.css'\r\nimport { getItem } from '../../redux/actions'\r\n\r\nfunction Comment(props) {\r\n    const { userPhoto, userId, date, comment, modal, userName, owner, _id } = props \r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    async function removeComment() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/removeComment`, {\r\n                commentId: _id,\r\n                itemId: item._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n            \r\n            dispatch(getItem(item._id))\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center comment-header justify-content-between p-1 border border-primary\">\r\n                    <div className=\"d-flex align-items-center\"> \r\n                        <Link \r\n                        onClick={() => modal.current.click()}\r\n                        to={`/profile?id=${userId}`}\r\n                        style={{textDecoration: 'none'}}\r\n                        >\r\n                        <UserPicture picture={userPhoto} name={userName}/>    \r\n                        </Link>\r\n                        <span className=\"pl-1\">{userName}</span>\r\n                    </div>\r\n                    <div>\r\n                        {new Date(date).toLocaleDateString()}\r\n                        {(userData.user && (userId=== owner || userData.user.userRole === 'admin')) && <span className=\"ml-1\" style={{cursor: 'pointer'}} onClick={removeComment}><Icon.X/></span>}\r\n                    </div>\r\n                </div>  \r\n                <div className=\"border p-2\">\r\n                    <ReactMarkdown source={comment}/>\r\n                </div> \r\n            </div> \r\n    )\r\n}\r\n\r\nexport default Comment","import React, { useState, useRef } from 'react'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\n\r\nimport { getItem } from '../../redux/actions'\r\nimport { API_URL } from '../../config'\r\n\r\nimport './AddComment.css'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction AddComment(props) {\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const commentBtn = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [comment, setComment] = useState('')\r\n\r\n    function confirmKey(e) {\r\n        if(e.code === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault()\r\n            addComment()\r\n        }\r\n    }\r\n\r\n    async function addComment() {\r\n        if(!comment.trim()) {\r\n            return\r\n        }\r\n\r\n        setComment('')\r\n\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/comment`, {\r\n                comment,\r\n                itemId: item._id,\r\n                collectionId: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getItem(item._id))\r\n            commentBtn.current.blur()\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {userData.user && \r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center p-1 border border-primary\">\r\n                    <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                    <span className=\"pl-1\">{userData.user.displayName}</span>\r\n                </div>  \r\n                <div className=\"d-flex border p-2\">\r\n                    <textarea placeholder={lang.AddComment.leaveComment[userData.user.lang]} value={comment} \r\n                    onChange={(e) => setComment(e.target.value)} \r\n                    maxLength=\"200\" \r\n                    className=\"form-control mr-1\"\r\n                    onKeyPress={confirmKey}></textarea>\r\n                    <button className=\"btn btn-outline-primary btn-comment\" disabled={!comment.length} ref={commentBtn} onClick={addComment}>\r\n                        <Icon.ArrowRightCircle/>\r\n                    </button>\r\n                </div> \r\n            </div> \r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddComment","import React, { useRef, useEffect } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport { useSelector, connect, useDispatch } from 'react-redux'\r\nimport 'bootstrap/js/dist/modal'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\n\r\nimport './ModalItem.css'\r\nimport $ from 'jquery'\r\n\r\nimport Comment from '../comment/Comment'\r\nimport AddComment from '../comment/AddComment'\r\nimport Like from './ItemLike'\r\n\r\nimport { getItem } from '../../redux/actions'\r\n\r\nimport lang from '../../lang.json'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\n\r\nfunction ModalItem(props) {\r\n    const { item } = useSelector(state => state.item)\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const history = useHistory()\r\n\r\n    const location = useLocation()\r\n\r\n    const item_id = new URLSearchParams(location.search).get('item_id')\r\n\r\n    const modal = useRef()\r\n\r\n    useEffect(() => {\r\n        if(item_id)\r\n            $('#item').modal('show')\r\n        if(!item_id) {\r\n            history.push(`/collection?collection_id=${collection._id}`)\r\n            $('#item').modal('hide')             \r\n\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [item_id])   \r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(async () => {\r\n            if(!item._id) {\r\n                return\r\n            }\r\n            dispatch(getItem(item._id))\r\n        }, 3000)\r\n\r\n        return () => clearInterval(interval)\r\n    })\r\n\r\n    function clearItem() {\r\n        $('#item').on('hide.bs.modal', (e) => {\r\n            \r\n            console.log('hide')\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal fade\" ref={modal} tabIndex=\"-1\" id=\"item\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">{item.title}</h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={clearItem}>\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        {item.picture &&\r\n                        <img src={item.picture} className=\"img-fluid rounded\" alt={item.title}/>}\r\n                        <ul className=\"list-group mt-1\">\r\n                            {item.author && <li className=\"list-group-item\">{lang.ModalItem.author[userData.user.lang]}: {item.author}</li>}\r\n                            {item.year && <li className=\"list-group-item\">{lang.ModalItem.date[userData.user.lang]}: {new Date(item.year).toLocaleDateString()}</li>}\r\n                        </ul>\r\n                        {item.tags && item.tags.length > 0 && <Tags value={item.tags} readOnly className=\"mt-1\"/>}\r\n                        {item.likes &&\r\n                        <div className=\"d-flex justify-content-end\">\r\n                             <Like likes={item.likes} id={item._id}/>\r\n                        </div>}\r\n                    </div>\r\n                    <div className=\"d-flex modal-footer justify-content-start\">\r\n                        {collection.comments &&\r\n                        <>\r\n                            <AddComment />\r\n                            {item.comments ? item.comments.map((e,i) => <Comment key={i} {...e} owner={userData.user && userData.user.id}/>) :\r\n                            <p>Loading...</p>}\r\n                        </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.item;\r\n\r\nexport default connect(mapStateToProps, null)(ModalItem)","import React, { useState, useRef, useEffect } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\nimport Axios from 'axios'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { clearErrorAll, getCollection, setError, setNotify } from '../../redux/actions'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddItem.scss'\r\nimport { END_LOADING_COLLECTION, START_LOADING_COLLECTION } from '../../redux/types'\r\n\r\nconst baseTagifySettings = {\r\n    blacklist: [\"xxx\", \"yyy\", \"zzz\"],\r\n    maxTags: 5,\r\n    placeholder: \"type something\",\r\n    dropdown: {\r\n      enabled: 0\r\n    }\r\n  }\r\n\r\nfunction EditItemModal(props) {\r\n    const tagifyRef = useRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [itemAuthor, setItemAuthor] = useState('')\r\n    const [itemDate, setItemDate] = useState('')\r\n    const [tagifySettings] = useState([])\r\n    const [tagifyProps, setTagifyProps] = useState({})\r\n    const [picture, setPicture] = useState('')\r\n\r\n    useEffect(() => {\r\n        if(Object.keys(item).length) {\r\n            setTitle(item.title)\r\n            setItemAuthor(item.author)\r\n            setItemDate(item.year)\r\n            setPicture(item.picture)\r\n        }\r\n    }, [item])\r\n\r\n    async function saveItem() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch({type: START_LOADING_COLLECTION})\r\n            dispatch(setNotify(true))\r\n\r\n            await Axios.post(`${API_URL}/api/item/edit`, {\r\n                picture,\r\n                title,\r\n                author: itemAuthor,\r\n                tags: tagifyRef.current.value,\r\n                date: itemDate,\r\n                id: item._id,\r\n                collection_id: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getCollection(collection._id))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({type: END_LOADING_COLLECTION})\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getTags = async () => {\r\n            try {\r\n                setTagifyProps({loading: true})\r\n\r\n                const response = await Axios.get(`${API_URL}/api/item/tags`)\r\n\r\n                setTagifyProps((lastProps) => ({\r\n                    ...lastProps,\r\n                    whitelist: response.data.map(e => e.text),\r\n                    loading: false\r\n\r\n                }))\r\n            } catch (error) {\r\n                \r\n            }\r\n        }\r\n        getTags()\r\n    }, [])\r\n\r\n    const settings = {\r\n        ...baseTagifySettings,\r\n        ...tagifySettings\r\n      }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"editItem\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n                <div className=\"modal-content\" style={{position: 'relative'}}>\r\n                    <>\r\n                        <div className=\"modal-header\">\r\n                            <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.EditItemModal.itemSettings[userData.user.lang]}</h5>\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\" id=\"basic-addon1\">{lang.EditItemModal.title[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                value={title} \r\n                                onChange={(e) => setTitle(e.target.value)}\r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.title[userData.user.lang]} \r\n                                />\r\n                            </div>\r\n                            <div className=\"input-group mb-3\">\r\n                                <FileInput picture={picture} setPicture={setPicture}/>\r\n                            </div>\r\n                            {collection.author && \r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\" id=\"basic-addon1\">{lang.EditItemModal.author[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                value={itemAuthor}\r\n                                onChange={(e) => setItemAuthor(e.target.value)}\r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.author[userData.user.lang]} \r\n                                aria-label=\"Author\" \r\n                                aria-describedby=\"basic-addon1\"/>\r\n                            </div>\r\n                            }\r\n                            {collection.year &&\r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">{lang.EditItemModal.date[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                onChange={(e) => setItemDate(e.target.valueAsNumber)} \r\n                                type=\"date\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.date[userData.user.lang]} \r\n                                aria-label=\"Date\"\r\n                                value={itemDate ? new Date(itemDate).toISOString().substr(0, 10) : ''}/>\r\n                            </div>\r\n                            }\r\n                            <div className=\"input-group mb-3\">\r\n                                <Tags\r\n                                tagifyRef={tagifyRef}\r\n                                settings={settings}\r\n                                {...tagifyProps}\r\n                                placeholder={lang.EditItemModal.tags['en']}\r\n                                value={item.tags}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddItemModal.close[userData.user.lang]}</button>\r\n                            <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={saveItem}>{lang.EditItemModal.saveItem[userData.user.lang]}</button>\r\n                        </div> \r\n                    </>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditItemModal","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport { sortCollection } from '../../redux/actions'\r\nimport { CHANGE_ASCENDING } from '../../redux/types'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Sort() {\r\n    const { sortOptions, collection }  = useSelector(state => state.collection)\r\n    const [selectedSort, setSelectedSort] = useState(sortOptions.key)\r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()  \r\n\r\n    useEffect(() => {\r\n        dispatch(sortCollection(selectedSort.toLowerCase()))\r\n    }, [selectedSort, dispatch])\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center mb-3 w-100 px-2 p-sm-0\">\r\n            <span className={`${userData.user.darkMode && 'text-light'}`}>{lang.Sort.sort[userData.user.lang]}</span>\r\n            <select className=\"form-control ml-2\" value={selectedSort} id=\"inputGroupSelect01\" onChange={(e) => setSelectedSort(e.target.value)}>\r\n                <option value=\"Title\">{lang.Sort.title[userData.user.lang]}</option>\r\n                <option value=\"Likes\">{lang.Sort.likes[userData.user.lang]}</option>\r\n                {collection.collection.author && <option value=\"Author\">{lang.Sort.author[userData.user.lang]}</option>}\r\n                {collection.collection.year && <option value=\"Date\">{lang.Sort.date[userData.user.lang]}</option>}\r\n                {collection.collection.comments && <option value=\"Comments\">{lang.Sort.comments[userData.user.lang]}</option>}\r\n            </select>\r\n            <span \r\n            className=\"ml-2\" \r\n            onClick={() => dispatch({type: CHANGE_ASCENDING})}\r\n            style={{cursor: 'pointer'}}\r\n            >\r\n                {sortOptions.ascending ? <Icon.SortUp size={20}/> : <Icon.SortDown size={20}/>}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sort","import React, { useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Filter({ filter, setFilter }) {\r\n    const { collection }  = useSelector(state => state.collection.collection)\r\n    const pictureCheck = useRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    function reset() {\r\n        const clearObj = {}\r\n\r\n        for (const key in filter) {\r\n            clearObj[key] = key === 'apply' ? filter[key] : undefined\r\n        }\r\n\r\n        pictureCheck.current.checked = false\r\n\r\n        setFilter({...clearObj})\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center flex-column mb-3 w-100 px-2 p-sm-0\">\r\n            <button className=\"btn btn-primary mb-2 ml-auto w-100\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                Filters\r\n            </button>\r\n\r\n            <div className=\"collapse w-100\" id=\"collapseExample\">\r\n                <div className=\"card card-body\">\r\n                    <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">{lang.Filter.title[userData.user.lang]}</span>\r\n                        </div>\r\n                        <input value={filter.title || ''} type=\"text\" className=\"form-control\" onChange={(e) => setFilter({...filter, title: e.target.value})} placeholder={lang.Filter.title[userData.user.lang]} aria-describedby=\"basic-addon1\"/>\r\n                    </div>\r\n                    {collection.author && <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">{lang.Filter.author[userData.user.lang]}</span>\r\n                        </div>\r\n                        <input value={filter.author || ''} onChange={(e) => setFilter({...filter, author: e.target.value})} type=\"text\" className=\"form-control\" placeholder={lang.Filter.author[userData.user.lang]} aria-describedby=\"basic-addon1\"/>\r\n                    </div>}\r\n                    {collection.year && <div className=\"d-flex align-items-center mb-3\">\r\n                        <input value={(filter.dateFrom && new Date(filter.dateFrom).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateFrom: new Date(e.target.value)})} className=\"form-control\"/>\r\n                        <span className=\"mx-2\">-</span>\r\n                        <input value={(filter.dateTo && new Date(filter.dateTo).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateTo: new Date(e.target.value)})} className=\"form-control\"/>\r\n                    </div>}\r\n                    <div className=\"form-check mb-3\">\r\n                        <input ref={pictureCheck} onChange={(e) => setFilter({...filter, picture: e.target.checked})} className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\"/>\r\n                        <label className=\"form-check-label\" htmlFor=\"defaultCheck1\">\r\n                        {lang.Filter.picture[userData.user.lang]}\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"d-flex custom-control custom-switch justify-content-end\">\r\n                        <input defaultValue={false} type=\"checkbox\" onChange={(e) => setFilter({...filter, apply: e.target.checked})} className=\"custom-control-input\" id=\"customSwitch1\"/>\r\n                        <label className=\"custom-control-label\" htmlFor=\"customSwitch1\">{lang.Filter.apply[userData.user.lang]}</label>\r\n                    </div>\r\n                    <button className=\"btn btn-danger\" onClick={reset}>{lang.Filter.reset[userData.user.lang]}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React, { useEffect, useState } from 'react'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { useLocation, Link } from 'react-router-dom'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport AddItem from '../items/AddItem'\r\nimport Item from '../items/Item'\r\nimport ViewModal from '../items/ModalItem'\r\nimport EditModal from '../items/EditItemModal'\r\nimport Sort from '../collection/Sort'\r\nimport Filter from '../collection/Filter'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nimport { clearErrorAll, getCollection, getItem } from '../../redux/actions'\r\nimport lang from '../../lang.json'\r\n\r\nimport './Collection.scss'\r\n\r\nfunction Collection(props){\r\n    const [filter, setFilter] = useState({\r\n        apply: false\r\n    })\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection, items } = useSelector(state => state.collection.collection)\r\n    const { sortOptions } = useSelector(state => state.collection)\r\n    const { loading, error } = useSelector(state => state.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const location = useLocation()\r\n    const id = new URLSearchParams(location.search).get('collection_id')\r\n    const item_id = new URLSearchParams(location.search).get('item_id')\r\n\r\n    useEffect(() => {\r\n        if(item_id) {\r\n            dispatch(getItem(item_id))\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [item_id])\r\n\r\n    useEffect(() => {\r\n        dispatch(clearErrorAll())\r\n        dispatch(getCollection(id))\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        if(!error && !loading) {\r\n            const interval = setInterval(() => {\r\n                dispatch(getCollection(id))\r\n            }, 2000)\r\n\r\n            return () => clearInterval(interval)\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    function filterOptions(e) {\r\n        if(!filter.apply) {\r\n            return true\r\n        }\r\n\r\n        if(filter.title && filter.title.trim()) {\r\n            const ref = new RegExp(`${filter.title}`, 'gi')\r\n            if(!e.title.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.author && filter.author.trim()) {\r\n            const ref = new RegExp(`${filter.author}`, 'gi')\r\n\r\n            if(!e.author.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.dateFrom && filter.dateTo) {\r\n            const current = new Date(e.year)\r\n\r\n            if(current < filter.dateFrom || current > filter.dateTo) {\r\n                return false\r\n            }\r\n        } \r\n\r\n        if(filter.picture && !e.picture) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    function compare(a, b) {\r\n        if(!a || !b){\r\n            return\r\n        }\r\n\r\n        switch (sortOptions.key) {\r\n            case 'likes':\r\n                if (a.likes.number > b.likes.number) return sortOptions.ascending ? 1 : -1; \r\n                if (a.likes.number === b.likes.number) return 0; \r\n                if (a.likes.number < b.likes.number) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'date':\r\n                if (a['year'] > b['year']) return sortOptions.ascending ? 1 : -1; \r\n                if (a['year'] === b['year']) return 0; \r\n                if (a['year'] < b['year']) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'comments':\r\n                if (a['comments'].length > b['comments'].length) return sortOptions.ascending ? 1 : -1; \r\n                if (a['comments'].length === b['comments'].length) return 0; \r\n                if (a['comments'].length < b['comments'].length) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            default:\r\n                if (a[sortOptions.key] > b[sortOptions.key]) return sortOptions.ascending ? 1 : -1; \r\n                if (a[sortOptions.key] === b[sortOptions.key]) return 0; \r\n                if (a[sortOptions.key] < b[sortOptions.key]) return sortOptions.ascending ? -1 : 1;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {collection && !loading &&\r\n            <>\r\n                <Link  \r\n                to={`/profile?id=${collection.owner}`}\r\n                >Back to profile</Link>\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2 className={`${userData.user.darkMode && 'text-light'}`}>{collection.title}</h2>\r\n                    <h3 className=\"badge badge-primary\">{collection.topic}</h3>\r\n                    <ReactMarkdown className={`${userData.user.darkMode && 'text-light'}`} source={collection.description}/>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"row\">\r\n                    <Sort/>\r\n                    <Filter filter={filter} setFilter={setFilter}/>\r\n                </div>\r\n                <div className=\"d-flex justify-content-around flex-wrap item-container\">\r\n                    {items.filter(filterOptions).sort(compare).map((e) => <Item key={e._id} itemProps={e} collectionId={id}/>)}\r\n                    {userData.user && (userData.user.id === collection.owner || userData.user.userRole === 'admin') \r\n                    && <AddItem comments={collection.comments} author={collection.author} year={collection.year} id={id}/>}\r\n                    <ViewModal/>\r\n                    <EditModal/>\r\n                </div>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Collection)","import React from 'react'\r\nimport { connect, useSelector } from 'react-redux'\r\nimport Item from '../items/Item';\r\n\r\nimport './Search.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport Spinner from '../spinner/Spinner';\r\n\r\nfunction Search(props){\r\n    const { items, searchText } = props\r\n    const { loading } = useSelector(state => state.error)\r\n    \r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {!loading && <div className=\"d-flex flex-wrap search-items-container\">\r\n                {items.length ?\r\n                <div className=\"d-flex flex-column\">\r\n                    <h4>Here's what we found for {searchText}</h4>\r\n                    <div className=\"d-flex flex-wrap\" style={{gap: '2rem'}}>\r\n                        {items.map((e) => <Item itemProps={e} key={e._id}/>)}\r\n                    </div>\r\n                </div>\r\n                :\r\n                'Nothing was found for your request :('}\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.search;\r\n\r\nexport default connect(mapStateToProps, null)(Search)","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { clearErrorAll } from '../../redux/actions'\r\n\r\nimport './AlertError.scss'\r\n\r\nfunction AlertError() {\r\n    const { error, loading } = useSelector(state => state.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <>\r\n            {!loading && error && <div className=\"alert alert-warning alert-danger fade-in show mt-1\" role=\"alert\">\r\n                {error}\r\n                <button type=\"button\" className=\"close\" aria-label=\"Close\" data-dismiss=\"alert\" onClick={() => dispatch(clearErrorAll())}>\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AlertError","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { clearErrorAll } from '../../redux/actions'\r\nimport SpinnerComponent from '../spinner/SpinnerComponent'\r\n\r\nimport './AlertError.scss'\r\n\r\nfunction AlertStatus() {\r\n    const { loading, error, notify } = useSelector(state => state.error)\r\n    const { loadingCollection } = useSelector(state => state.collection)\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <>\r\n            {notify && !error &&\r\n                <div className=\"alert alert-primary fade-in\" role=\"alert\">\r\n                    {loading || loadingCollection ?\r\n                    <SpinnerComponent/>   \r\n                    : <span>Successfully uploaded</span>}\r\n                    <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={() => dispatch(clearErrorAll())}>\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AlertStatus","import './App.scss';\nimport { useEffect } from 'react'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\nimport { connect, useDispatch } from 'react-redux'\nimport $ from 'jquery'\n\nimport Header from './components/layout/Header'\nimport Footer from './components/layout/Footer'\nimport Home from './components/pages/Home'\nimport Login from './components/auth/Login'\nimport Register from './components/auth/Register'\nimport Profile from './components/pages/Profile'\nimport PrivateRoute from './components/routes/PrivateRoute'\nimport Admin from './components/pages/Admin'\nimport Collection from './components/pages/Collection'\nimport Search from './components/pages/Search'\n\nimport { getUser } from './redux/actions';\nimport AlertError from './components/alerts/AlertError';\nimport AlertStatus from './components/alerts/AlertStatus';\n\nfunction App({ userData }) {\n  const dispatch = useDispatch()\n  \n  useEffect(() => {\n    dispatch(getUser())\n  }, [dispatch])\n\n  useEffect(() => {\n    if(userData.user.darkMode)\n      $('#root').addClass('dark')\n    else $('#root').removeClass('dark')  \n  }, [userData])\n\n  return (\n      <BrowserRouter>\n          <Header/>         \n          <div className=\"container\">\n            <AlertError/>\n            <AlertStatus/>\n            <Switch>\n                <Route exact path='/' component={Home}/>\n                <Route path=\"/login\" component={Login}/>\n                <Route path=\"/register\" component={Register}/>\n                <Route path=\"/profile:id?\" component={Profile}/>\n                <Route path=\"/collection:collection_id?\" exact component={Collection}/>\n                <Route path=\"/search\" exact component={Search}/>\n                <PrivateRoute path=\"/admin\" component={Admin}/>\n            </Switch>\n          </div>\n          <Footer/>\n      </BrowserRouter>\n  );\n}\n\nconst mapStateToProps = state => state.userData\n\nexport default connect(mapStateToProps, null)(App);\n","import { GET_USER, IS_LOGIN, RESET_USER, SET_USER, DELETE_USER, SET_ADMIN, REMOVE_ADMIN, \r\n    BLOCK_USER, UNBLOCK_USER, SWITCH_LANG, TOGGLE_MODE } from \"./types\";\r\n\r\nconst initialState = {\r\n    userData: {\r\n        token: undefined,\r\n        user: {\r\n            lang: localStorage.getItem('lang') || 'en',\r\n            darkMode: false\r\n        }\r\n    }\r\n}\r\n\r\nexport const userReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData, \r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case SET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case RESET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case SWITCH_LANG:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                user: {\r\n                    ...state.userData.user,\r\n                    lang: action.payload\r\n                }\r\n                }\r\n            }\r\n        case TOGGLE_MODE:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                user: {\r\n                    ...state.userData.user,\r\n                    darkMode: action.payload\r\n                }\r\n                }\r\n            }               \r\n        case DELETE_USER:\r\n            return state\r\n        case SET_ADMIN:\r\n            return state\r\n        case REMOVE_ADMIN:\r\n            return state\r\n        case BLOCK_USER:\r\n            return state\r\n        case UNBLOCK_USER:\r\n            return state\r\n        case IS_LOGIN:\r\n            return state\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_ERROR, CLEAR_ERROR, START_LOADING_PAGE, END_LOADING_PAGE, ERROR_CLEARALL, SET_NOTIFY } from \"./types\"\r\n\r\nconst initialState = {\r\n    error: '',\r\n    notify: false,\r\n    loading: false\r\n}\r\n\r\nexport const errorReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ERROR:\r\n            return {...state, error: action.payload}\r\n        case CLEAR_ERROR:\r\n            return  {...state, error: ''} \r\n        case START_LOADING_PAGE:\r\n            return {...state, loading: true}\r\n        case END_LOADING_PAGE:\r\n            return {...state, loading: false}\r\n        case ERROR_CLEARALL:\r\n            return {...state, ...action.payload}\r\n        case SET_NOTIFY:\r\n            return {...state, notify: action.payload}          \r\n        default:\r\n            return state    \r\n    }\r\n}","import { GET_ITEM, SET_ITEM } from \"./types\";\r\n\r\nconst initialState = {\r\n    item: {}\r\n}\r\n\r\nexport const itemReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }\r\n        case GET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_COLLECTION, SORT_COLLECTION, CHANGE_ASCENDING, START_LOADING_COLLECTION, END_LOADING_COLLECTION } from \"./types\";\r\n\r\nconst initialState = {\r\n    collection: {},\r\n    sortOptions: {\r\n        key: 'Date',\r\n        ascending: true\r\n    },\r\n    loadingCollection: false\r\n}\r\n\r\nexport const collectionReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_COLLECTION:\r\n            return {\r\n                ...state, collection: action.payload\r\n            }\r\n        case SORT_COLLECTION:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    key: action.payload\r\n                }\r\n            }\r\n        case CHANGE_ASCENDING:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    ascending: !state.sortOptions.ascending\r\n                }\r\n            }\r\n        case START_LOADING_COLLECTION: \r\n            return {\r\n                ...state, loadingCollection: true\r\n            }\r\n        case END_LOADING_COLLECTION:\r\n            return {\r\n                ...state, loadingCollection: false\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_HOME } from \"./types\";\r\n\r\nconst initialState = {\r\n    tags: [],\r\n    lastAdded: [],\r\n    mostLike: []\r\n}\r\n\r\nexport const homeReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_HOME: \r\n            return {...state, \r\n                tags: action.payload.tags, \r\n                lastAdded: action.payload.lastAdded,\r\n                mostLike: action.payload.mostLike \r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_SEARCH } from \"./types\";\r\n\r\nconst initialState = {\r\n    items: JSON.parse(sessionStorage.getItem('search-items')) || {}, \r\n    searchText: sessionStorage.getItem('search-text') || ''\r\n}\r\n\r\nexport const searchReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_SEARCH:\r\n            return {\r\n                ...state, items: action.payload.items, searchText: action.payload.searchText\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_ALLCOLLECTIONS, START_LOADING_COLLECTIONS, END_LOADING_COLLECTIONS } from \"./types\";\r\n\r\nconst initialState = {\r\n    collections: {},\r\n    loading: false\r\n}\r\n\r\nexport const allCollectionsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_ALLCOLLECTIONS:\r\n            return {\r\n                ...state, collections: action.payload\r\n            }\r\n        case START_LOADING_COLLECTIONS:\r\n            return {\r\n                ...state, loading: true\r\n            }\r\n        case END_LOADING_COLLECTIONS:\r\n            return {\r\n                ...state, loading: false\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from 'redux'\r\n\r\nimport { userReducer } from './userReducer'\r\nimport { errorReducer } from './errorReducer'\r\nimport { itemReducer } from './itemReducer'\r\nimport { collectionReducer } from './collectionReducer'\r\nimport { homeReducer } from './homeReducer'\r\nimport { searchReducer } from './searchReducer'\r\nimport { allCollectionsReducer } from './allCollectionsReducer'\r\n\r\nexport const rootReducer = combineReducers({\r\n    userData: userReducer,\r\n    error: errorReducer,\r\n    item: itemReducer,\r\n    collection: collectionReducer,\r\n    home: homeReducer,\r\n    search: searchReducer,\r\n    allCollections: allCollectionsReducer\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\nimport { applyMiddleware, compose, createStore } from 'redux'\n\nimport './index.css';\nimport App from './App';\nimport { rootReducer } from './redux/rootReducer';\n\nconst store = createStore(rootReducer, compose(\n  applyMiddleware(\n    thunk\n  )\n))\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n        <App/>\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}