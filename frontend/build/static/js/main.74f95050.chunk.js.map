{"version":3,"sources":["components/userPicture/UserPicture.js","redux/types.js","redux/actions.js","components/layout/Header.js","components/items/ItemLike.js","components/items/ItemPicture.js","components/items/Item.js","components/homeSections/LastAdded.js","components/homeSections/Tags.js","components/homeSections/MostLike.js","components/pages/Home.js","helpers/useInputValue.js","components/auth/VkAuth.js","components/spinner/Spinner.js","components/auth/Login.js","components/auth/Register.js","components/fileInput/FileInput.js","components/collection/AddCollectionModal.js","components/pages/Profile.js","components/pages/Dashboard.js","components/routes/PrivateRoute.js","components/users/Users.js","components/pages/Admin.js","components/collection/CollectionCard.js","components/collection/CollectionsItems.js","components/pages/AllCollections.js","components/items/AddItemModal.js","components/items/AddItem.js","components/comment/Comment.js","components/comment/AddComment.js","components/items/ModalItem.js","components/collection/Sort.js","components/collection/Filter.js","components/pages/Collection.js","components/pages/Search.js","App.js","redux/userReducer.js","redux/errorReducer.js","redux/itemReducer.js","redux/collectionReducer.js","redux/homeReducer.js","redux/searchReducer.js","redux/rootReducer.js","index.js"],"names":["UserPicture","picture","name","className","style","backgroundImage","GET_USER","SET_USER","RESET_USER","IS_LOGIN","DELETE_USER","SET_ADMIN","REMOVE_ADMIN","BLOCK_USER","UNBLOCK_USER","SET_ERROR","CLEAR_ERROR","SET_ITEM","GET_ITEM","GET_COLLECTION","SORT_COLLECTION","CHANGE_ASCENDING","GET_HOME","SET_SEARCH","setSearch","searchText","dispatch","a","Axios","get","params","response","localStorage","setItem","JSON","stringify","data","type","payload","items","console","log","getHome","getCollection","id","setUser","user","getItem","setError","error","isLogin","sessionStorage","resetUser","token","undefined","connect","state","userData","props","useSelector","search","useDispatch","history","useHistory","useState","searchTextInput","setSearchTextInput","useEffect","onSearch","e","preventDefault","trim","push","to","data-toggle","data-target","aria-controls","aria-expanded","aria-label","onSubmit","value","onChange","target","placeholder","onClick","userPhoto","aria-haspopup","displayName","background","removeItem","ItemLike","likes","homeAction","collection","liked","setLiked","likesNumber","setLikesNumber","post","itemId","headers","_id","usersId","findIndex","number","cursor","ItemPicture","styles","size","Item","itemProps","author","year","title","collection_id","card","useRef","hover","$","current","toggleClass","ref","onMouseEnter","onMouseLeave","width","height","Date","toLocaleDateString","SwiperCore","use","Navigation","Pagination","A11y","home","lastAdded","like","useCallback","length","navigation","pagination","clickable","spaceBetween","slidesPerView","map","i","Scrollbar","tags","scrollbar","draggable","tag","text","mostLike","interval","setInterval","clearInterval","useInputValue","field","setValue","bind","event","required","clear","btn","backgroundColor","display","alignItems","color","boxShadow","padding","borderRadius","border","fontSize","fontWeight","fontFamily","div","span","VkAuth","checkLoginState","setState","isProcessing","callback","handleClick","isLoaded","disabled","window","VK","Auth","login","this","sdkLoaded","asyncInit","loadSdkAsync","apiId","vkAsyncInit","init","el","document","createElement","src","async","getElementsByTagName","appendChild","buttonProps","containerStyle","Component","Spinner","errorLoading","errorMessage","role","email","password","remember","createRef","setErrorLoading","setErrorMessage","resGoogle","resVk","idToken","tokenId","checked","vkId","session","first_name","last_name","message","htmlFor","autoFocus","clientId","buttonText","onSuccess","passwordCheck","FileInput","setPicture","onDrop","acceptedFiles","forEach","file","reader","FileReader","readAsDataURL","onload","result","useDropzone","maxFiles","accept","getRootProps","getInputProps","isDragActive","fileSettings","path","alt","AddCollectionModal","closeModal","setTitle","topic","setTopic","description","setDescription","setAuthor","comments","setComments","setYear","uploading","setUploading","startLoad","endLoad","close","owner","click","tabIndex","aria-labelledby","aria-hidden","position","data-dismiss","aria-describedby","defaultChecked","userProfile","setUserProfile","location","useLocation","URLSearchParams","getProfileData","blocked","registerDate","userRole","component","rest","render","pathname","nextPathname","users","setUsers","flack","setFlack","actionsUsers","setActionsUsers","keys","sort","key","b","compare","slice","setTimeout","blur","action","delete","deleteUser","setAdmin","err","removeAdmin","blockUser","unblockUser","getUsers","marginBottom","readOnly","filter","userForAction","ind","CollectionsItems","source","collections","setCollections","getCollections","baseTagifySettings","blacklist","maxTags","dropdown","enabled","AddItemModal","tagifyRef","itemAuthor","setItemAuthor","itemDate","setItemDate","tagifySettings","tagifyProps","setTagifyProps","fetchItems","date","loading","lastProps","whitelist","getTags","settings","valueAsNumber","AddItem","Comment","userId","comment","modal","userName","item","commentId","textDecoration","AddComment","commentBtn","setComment","addComment","collectionId","maxLength","onKeyPress","code","shiftKey","Sort","sortOptions","selectedSort","setSelectedSort","toLowerCase","ascending","Filter","setFilter","pictureCheck","dateFrom","toISOString","substr","dateTo","defaultValue","apply","clearObj","RegExp","match","userRes","exact","Home","Login","Register","Profile","AllCollections","Collection","Search","Dashboard","Admin","initialState","parse","rootReducer","combineReducers","store","createStore","compose","applyMiddleware","thunk","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.74f95050.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport './UserPicture.css'\r\n\r\nfunction UserPicture({ picture, name }) {\r\n\r\n    return (\r\n        <>\r\n            {picture ? \r\n                <div className=\"user-picture\" style={{backgroundImage: `url(${picture})`}}></div>:\r\n                <div className=\"user-picture text-uppercase\">{name[0]}</div>\r\n            } \r\n        </>                                   \r\n    )\r\n}\r\n\r\nexport default UserPicture","export const GET_USER = 'GET_USER'\r\n\r\nexport const SET_USER = 'SET_USER'\r\n\r\nexport const RESET_USER = 'RESET_USER'\r\n\r\nexport const GET_GOOGLE_USER = 'GET_GOOGLE_USER'\r\n\r\nexport const IS_LOGIN = 'IS_LOGIN'\r\n\r\nexport const DELETE_USER = 'DELETE_USER'\r\n\r\nexport const SET_ADMIN = 'SET_ADMIN'\r\n\r\nexport const REMOVE_ADMIN = 'REMOVE_ADMIN'\r\n\r\nexport const BLOCK_USER = 'BLOCK_USER'\r\n\r\nexport const UNBLOCK_USER = 'UNBLOCK_USER'\r\n\r\nexport const SET_ERROR = 'SET_ERROR'\r\n\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\r\n\r\nexport const SET_ITEM = 'SET_ITEM'\r\n\r\nexport const GET_ITEM = 'GET_ITEM'\r\n\r\nexport const GET_COLLECTION = 'GET_COLLECTION'\r\n\r\nexport const SORT_COLLECTION = 'SORT_COLLECTION'\r\n\r\nexport const CHANGE_ASCENDING = 'CHANGE_ASCENDING'\r\n\r\nexport const GET_HOME = 'GET_HOME'\r\n\r\nexport const SET_SEARCH = 'SET_SEARCH'","import Axios from 'axios'\r\n\r\nimport { GET_USER, SET_USER, RESET_USER, SET_ERROR, DELETE_USER, \r\n    SET_ADMIN, REMOVE_ADMIN, BLOCK_USER, UNBLOCK_USER, \r\n    CLEAR_ERROR, SET_ITEM, GET_COLLECTION, GET_ITEM, SORT_COLLECTION, GET_HOME, SET_SEARCH } from \"./types\";\r\n\r\nexport function setSearch(searchText) {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get('/item/search', {\r\n                params: {\r\n                    searchText\r\n                }\r\n            })\r\n\r\n            localStorage.setItem('search-items', JSON.stringify(response.data))\r\n            localStorage.setItem('search-text', searchText)\r\n\r\n            dispatch({\r\n                type: SET_SEARCH,\r\n                payload: {\r\n                    items: response.data,\r\n                    searchText\r\n                }\r\n            })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}\r\n\r\nexport function getHome() {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get('/user/home')\r\n\r\n            dispatch({\r\n                type: GET_HOME,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}\r\n\r\nexport function sortCollection(key) {\r\n    return {\r\n        type: SORT_COLLECTION,\r\n        payload: key\r\n    }\r\n}\r\n\r\nexport function getCollection(id) {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get('/collections/collection', {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_COLLECTION,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n}\r\n\r\nexport function setUser(user) {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: SET_USER,\r\n            payload: user\r\n        })\r\n    }\r\n}\r\n\r\nexport function setItem(item) {\r\n    return {\r\n        type: SET_ITEM,\r\n        payload: item\r\n    }\r\n}\r\n\r\nexport function getItem(id) {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get('/item/', {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_ITEM,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n}\r\n\r\nexport function blockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`/user/block`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: BLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: BLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function deleteUser(token, users) {\r\n    return async dispatch => {\r\n        users.forEach(async (id) => {\r\n            try {\r\n                await Axios.delete(`/user/delete`, {\r\n                    params: {\r\n                        id\r\n                    },\r\n                    headers: {\r\n                        'x-auth-token': token        \r\n                        }\r\n                    }\r\n                )\r\n                \r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: DELETE_USER\r\n                })\r\n            }\r\n        })\r\n        \r\n        dispatch({\r\n            type: DELETE_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setAdmin(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`/user/setAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: SET_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: SET_ADMIN\r\n        })\r\n    }\r\n}\r\n\r\nexport function unblockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`/user/unblock`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: UNBLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: UNBLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setError(error) {\r\n    if(!error) {\r\n        error = 'Connection error. Please try again later:('\r\n    }\r\n\r\n    return dispatch => {\r\n        dispatch({\r\n            type: SET_ERROR,\r\n            payload: error\r\n        })\r\n    }\r\n}\r\n\r\nexport function clearError() {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: CLEAR_ERROR,\r\n            payload: ''\r\n        })\r\n    }\r\n}\r\n\r\nexport function removeAdmin(token, users, err) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`/user/removeAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: REMOVE_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: REMOVE_ADMIN,\r\n        })\r\n    }\r\n}\r\n\r\nexport function isLogin() {\r\n    return localStorage.getItem('token') || sessionStorage.getItem('token')\r\n}\r\n\r\nexport function resetUser() {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: RESET_USER,\r\n            payload: {\r\n                token: undefined,\r\n                user: undefined\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function getUser() {\r\n    return async dispatch => {\r\n        const token = localStorage.getItem('token') || sessionStorage.getItem('token')\r\n\r\n        if(!token){\r\n            resetUser()\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const tokenRes = await Axios.post(\r\n            \"user/verifyToken\",\r\n            null,\r\n            { headers: { \"x-auth-token\": token } }\r\n            )\r\n\r\n            if (tokenRes.data) {\r\n            const userRes = await Axios.get(\"user/\", {\r\n                headers: { \"x-auth-token\": token },\r\n            });\r\n            \r\n            dispatch({ \r\n                type: GET_USER,\r\n                payload: {\r\n                    token,\r\n                    user: userRes.data\r\n                }\r\n            })\r\n            }\r\n        } catch (error) {\r\n            dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n        }\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\nimport { isLogin, resetUser, setSearch } from '../../redux/actions'\r\n\r\nimport './Header.scss'\r\n\r\nfunction Header(props){\r\n    const userData = useSelector(state => state.userData)\r\n    const { searchText } = useSelector(state => state.search)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const [searchTextInput, setSearchTextInput] = useState(searchText)\r\n\r\n    useEffect(() => {\r\n        setSearchTextInput(searchText)\r\n    }, [searchText])\r\n\r\n    const logout = () => {\r\n        dispatch(resetUser())    \r\n\r\n        localStorage.removeItem('token')\r\n        sessionStorage.removeItem('token')\r\n\r\n        history.push('/login')\r\n    }\r\n\r\n    const onSearch = (e) => {\r\n        e.preventDefault()\r\n\r\n        if(searchTextInput.trim()) {\r\n            dispatch(setSearch(searchTextInput))\r\n        }\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <nav className=\"navbar navbar-expand-md navbar-light bg-light\">\r\n                <Link className=\"navbar-brand\" to=\"/\">Collections</Link>\r\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarsExample02\" aria-controls=\"navbarsExample02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span className=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n\r\n                <div className=\"collapse navbar-collapse\" id=\"navbarsExample02\">\r\n                    <ul className=\"navbar-nav mr-auto\">\r\n                        {userData.token &&\r\n                        <>\r\n                            <li className=\"nav-item active\">\r\n                                <Link className=\"nav-link\" to=\"/\">Home</Link>\r\n                            </li>\r\n                            <li className=\"nav-item active\">\r\n                                <Link className=\"nav-link\" to={`/collections?id=${userData.user.id}`}>My collections</Link>\r\n                            </li>\r\n                        </>\r\n                        }   \r\n                    </ul>\r\n                    <form className=\"form-inline\" id=\"item-search\" onSubmit={onSearch}>\r\n                        <input className=\"form-control w-100\" value={searchTextInput} onChange={(e) => setSearchTextInput(e.target.value)} type=\"text\" placeholder=\"Search\"/>\r\n                        <span onClick={onSearch}><Icon.Search/></span>\r\n                    </form>\r\n                    {!dispatch(isLogin) && !userData.token?\r\n                    <div className=\"d-flex flex-column ml-md-3 align-items-md-center\">\r\n                        <Link to=\"/login\">Log in</Link>\r\n                        <Link to=\"/register\">Register</Link>\r\n                    </div> :\r\n                    <div className=\"d-flex flex-column ml-md-3\">\r\n                        <div className=\"btn-group\">\r\n                            {userData.user ? <button type=\"button\" className={`btn dropdown-toggle bg-dark${!userData.user.userPhoto && ' text-light'}`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                            </button> :\r\n                            <button type=\"button\" className={`btn dropdown-toggle`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <div style={{background: 'grey'}}></div>\r\n                            </button>}\r\n                            <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                {userData.user && <button className=\"dropdown-item\" onClick={() => history.push(`/profile?id=${userData.user.id}`)}>{userData.user.displayName}</button>}\r\n                                <button className=\"dropdown-item\" onClick={() => logout()}>Log out</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    }\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Header)","import React, { useState, useEffect } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\nimport Axios from 'axios'\r\nimport { getCollection, getItem } from '../../redux/actions'\r\n\r\nfunction ItemLike(props) {\r\n    const  { likes, id, homeAction }  = props\r\n\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const userData = useSelector(state => state.userData)\r\n\r\n    const [liked, setLiked] = useState(false)\r\n    const [likesNumber, setLikesNumber] = useState(0)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        setLiked((userData.user && likes.usersId.findIndex(e => e === `${userData.user.id}`)) >= 0)\r\n        setLikesNumber(likes.number)\r\n    }, [likes, userData])\r\n\r\n    async function toggleLike() {\r\n        try {\r\n            await Axios.post('/item/like', {\r\n                itemId: id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            if(typeof homeAction === 'function') {\r\n                homeAction()\r\n            }  \r\n            else {\r\n                dispatch(getCollection(collection._id))\r\n                dispatch(getItem(id))\r\n            }\r\n     \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <span onClick={toggleLike} style={{cursor: 'pointer'}} className=\"ml-auto\">\r\n                {liked ? \r\n                <Icon.HeartFill className=\"item-liked\"/>\r\n                : <Icon.Heart className=\"item-unliked\"/>} {likesNumber}\r\n            </span>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ItemLike","import React from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './ItemPicture.css'\r\n\r\nfunction ItemPicture({ picture, className, styles }) {\r\n    return (\r\n        <div className={className}>\r\n            {picture ? \r\n            <div className=\"item-picture\" style={{backgroundImage: `url(${picture})`, ...styles}}>\r\n            </div>:\r\n            <div className=\"item-picture\"  style={styles}>\r\n                <Icon.Image size={30}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ItemPicture","import React, { useRef } from 'react'\r\nimport $ from 'jquery'\r\nimport {  useDispatch } from 'react-redux'\r\n\r\nimport Like from './ItemLike'\r\nimport Picture from './ItemPicture'\r\n\r\nimport { getItem } from '../../redux/actions'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nfunction Item(props) {\r\n    const { author, year, title, _id, picture, collection_id } = props.itemProps\r\n    const likes = props.itemProps.likes\r\n    const { homeAction } = props\r\n\r\n    const card = useRef()\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function hover() {\r\n        $(card.current).toggleClass('border-primary')\r\n    }\r\n\r\n    function toCollection() {\r\n        history.push(`/collections/collection?collection_id=${collection_id}`)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card border\" ref={card}  onMouseEnter={hover} onMouseLeave={hover} style={{width: '12rem'}}>\r\n                <Picture picture={picture} title={title} styles={{height: 100}} className=\"card-img-top\"/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <ul className=\"list-group list-group-flush\">\r\n                        {author &&\r\n                        <li className=\"list-group-item\">Author: {author}</li>}\r\n                        {year && \r\n                        <li className=\"list-group-item\">Date: {new Date(year).toLocaleDateString()}</li>}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"d-flex card-footer\">\r\n                    <span \r\n                        data-toggle=\"modal\" \r\n                        data-target=\"#item\"\r\n                        style={{cursor: 'pointer'}}\r\n                        onClick={() => {\r\n                            dispatch(getItem(_id))\r\n                            if(typeof homeAction === 'function') {\r\n                                toCollection()\r\n                            }\r\n                        }}\r\n                    >\r\n                        More\r\n                    </span>\r\n                    <Like likes={likes} id={_id} homeAction={homeAction}/>\r\n                </div>\r\n            </div>      \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport Item from '../items/Item'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction LastAdded(props){\r\n    const { lastAdded } = useSelector(state => state.home)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex justify-content-center pb-5 pt-5\">\r\n                <Item itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n        {lastAdded.length && \r\n        <Swiper\r\n        navigation\r\n        pagination={{ clickable: true }}\r\n        spaceBetween={50}\r\n        slidesPerView={2}\r\n        >\r\n            {lastAdded.map(carouselItem)}\r\n        </Swiper>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(LastAdded)","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Scrollbar } from 'swiper';\r\n\r\nimport './Tags.scss'\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\nimport { setSearch } from '../../redux/actions';\r\n\r\nSwiperCore.use([Scrollbar]);\r\n\r\nfunction Tags(props){\r\n    const { tags } = useSelector(state => state.home)\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function searchTag(tag){\r\n        dispatch(setSearch(tag))\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} onClick={() => searchTag(e.text)}>\r\n                <div className=\"border text-center rounded bg-light text-dark tag\" style={{cursor: 'pointer'}}>\r\n                    {e.text}\r\n                </div>        \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-2 mb-2\">\r\n            {tags.length &&\r\n            <Swiper\r\n            spaceBetween={50}\r\n            slidesPerView={8}\r\n            scrollbar={{ draggable: true }}\r\n            className=\"d-flex justify-content-center pb-3\"\r\n            >\r\n                {tags.map(carouselItem)}\r\n            </Swiper>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(Tags)","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport Item from '../items/Item'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction MostLike(props){\r\n    const { mostLike } = useSelector(state => state.home)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex pb-5 pt-5 justify-content-center\">\r\n                <Item itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n        {mostLike.length && \r\n        <Swiper\r\n        navigation\r\n        pagination={{ clickable: true }}\r\n        spaceBetween={50}\r\n        slidesPerView={1}\r\n        >\r\n            {mostLike.map(carouselItem)}\r\n        </Swiper>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(MostLike)","import React, { useEffect } from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nimport LastAdded from '../homeSections/LastAdded'\r\nimport Tags from '../homeSections/Tags'\r\nimport MostLike from '../homeSections/MostLike'\r\n\r\nfunction Home(props){\r\n    const dispatch = useDispatch()\r\n\r\n    dispatch(getHome())\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            dispatch(getHome())\r\n        }, 2000)\r\n        \r\n        return () => clearInterval(interval)\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            <Tags/>\r\n            <div className=\"row text-center\">\r\n                <div className=\"col-8\">\r\n                    <h2>Recently added</h2>\r\n                    <LastAdded/>\r\n                </div>\r\n                <div className=\"col-4\">\r\n                    <h2>Most like</h2>\r\n                    <MostLike/>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Home)","import { useState } from 'react'\r\n\r\nexport default function useInputValue(field, placeholder, name, style){\r\n    const [value, setValue] = useState('');\r\n\r\n    return {\r\n        bind: {\r\n            value,\r\n            type: field,\r\n            style,\r\n            id: `${name || field}Input`,\r\n            className: 'form-control mb-2',\r\n            placeholder: placeholder || field,\r\n            name: name || field,\r\n            onChange: event => setValue(event.target.value),\r\n            required: true\r\n        },\r\n        clear: () => setValue(''),\r\n        value: () => value\r\n    }\r\n}","import React, { Component } from 'react';\r\n\r\nimport Icon24LogoVK from '@vkontakte/icons/dist/24/logo_vk_color';\r\n\r\nconst styles = {\r\n    btn: {\r\n        backgroundColor: 'rgb(255, 255, 255)',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        color: 'rgba(0, 0, 0, 0.54)',\r\n        boxShadow: 'rgba(0, 0, 0, 0.24) 0px 2px 2px 0px, rgba(0, 0, 0, 0.24) 0px 0px 1px 0px',\r\n        padding: 0,\r\n        borderRadius: 2,\r\n        border: '1px solid transparent',\r\n        fontSize: 14,\r\n        fontWeight: 500,\r\n        fontFamily: 'Roboto, sans-serif'\r\n    },\r\n    div: {\r\n        background: 'rgb(255, 255, 255)',\r\n        padding: 10,\r\n        borderRadius: 2\r\n    },\r\n    span: {\r\n        padding: '10px 10px 10px 0px',\r\n        fontWeight: 500\r\n    }\r\n}\r\n\r\nexport default class VkAuth extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isLoaded: false,\r\n            isProcessing: false,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.sdkLoaded();\r\n        this.asyncInit();\r\n        this.loadSdkAsync();\r\n    }\r\n\r\n    asyncInit() {\r\n        const { apiId } = this.props;\r\n        window.vkAsyncInit = () => {\r\n        window.VK.init({ apiId });\r\n        this.setState({ isLoaded: true });\r\n        };\r\n    }\r\n\r\n    sdkLoaded() {\r\n        this.setState({ isLoaded: true });\r\n    }\r\n\r\n    loadSdkAsync() {\r\n        const el = document.createElement('script');\r\n        el.type = 'text/javascript';\r\n        el.src = 'https://vk.com/js/api/openapi.js?';\r\n        el.async = true;\r\n        el.id = 'vk-sdk';\r\n        document.getElementsByTagName('head')[0].appendChild(el);\r\n    }\r\n\r\n    checkLoginState = (response) => {\r\n        this.setState({ isProcessing: false });\r\n\r\n        this.props.callback(response);\r\n    };\r\n\r\n    handleClick = () => {\r\n        if (!this.state.isLoaded || this.state.isProcessing || this.props.disabled) {\r\n        return;\r\n        }\r\n        this.setState({ isProcessing: true });\r\n        window.VK.Auth.login(this.checkLoginState);\r\n    };\r\n\r\n    render() {\r\n        const { disabled, callback, apiId, containerStyle, ...buttonProps } = this.props;\r\n        return (\r\n        <button\r\n            {...buttonProps}\r\n            onClick={this.handleClick}\r\n            style={styles.btn}>\r\n            <div style={styles.div}>    \r\n                <Icon24LogoVK height={18}/>\r\n            </div>\r\n            <span style={styles.span}>\r\n                Login\r\n            </span>\r\n        </button >\r\n        );\r\n    }\r\n}","import React from 'react'\r\nimport './Spinner.css'\r\n\r\nfunction Spinner({ errorLoading, errorMessage }){\r\n    return (\r\n        <>\r\n        {!errorLoading ? <div className=\"text-center\">\r\n            <div className=\"spinner-border text-primary spinner-grow-lg\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n           </div>\r\n        </div> : <div className=\"alert alert-danger fade-in\" role=\"alert\">\r\n                    {errorMessage}\r\n                </div>\r\n        }\r\n        </>        \r\n    )\r\n}\r\n\r\nexport default Spinner","import React, { createRef, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { GoogleLogin } from 'react-google-login'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\n\r\nimport VkAuth from './VkAuth';\r\nimport { setUser } from '../../redux/actions'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\n\r\nfunction Login(props) {\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password')\r\n    const remember = createRef(false)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const userData = useSelector(state => state.userData)\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token) \r\n        history.push('/')\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && resVk.session && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n        \r\n        try {\r\n            const response = await Axios.post('/user/login', {email: email.value(), password: password.value(), idToken, vkId})\r\n             dispatch(setUser((response.data))) \r\n             if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n             history.push('/')\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">      \r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"form-signin\" onSubmit={(e) => login(e)}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">Sign in</h1>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">Email address</label>\r\n                        <input {...email.bind} autoFocus/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">Password</label>\r\n                        <input {...password.bind}/>\r\n                        <div className=\"checkbox mb-3\">\r\n                            <label>\r\n                                <input type=\"checkbox\" value=\"remember-me\" ref={remember}/> Remember me\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>\r\n                    </form>       \r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Login);","import React, { useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { GoogleLogin } from 'react-google-login'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\nimport { setUser } from '../../redux/actions'\r\nimport VkAuth from './VkAuth'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nfunction Register(props) {\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password', 'Password')\r\n    const passwordCheck = useInputValue('password', 'Confirm password', 'passwordCheck')\r\n    const name = useInputValue('text', 'Name', 'displayName')\r\n    const history = useHistory();\r\n    const userData = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token)\r\n        history.push('/')\r\n\r\n    async function register(e) {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n            await Axios.post('/user/register', {\r\n                displayName: name.value(),\r\n                email: email.value(), \r\n                password: password.value(),\r\n                passwordCheck: passwordCheck.value(),\r\n            })\r\n    \r\n            history.push('/login')        \r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response.data.error.message)\r\n        }\r\n    }\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n\r\n        try {\r\n            const response = await Axios.post('/user/login', {email: email.value(), password: password.value(), idToken, vkId})\r\n\r\n            dispatch(setUser((response.data))) \r\n\r\n            if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n\r\n            history.push('/')\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">\r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"needs-validation\" onSubmit={register}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">Sign up</h1>\r\n                        <div>\r\n                            <label htmlFor=\"namelInput\" className=\"sr-only\">Name</label>\r\n                            <input {...name.bind} autoFocus/>\r\n                        </div>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">Email address</label>\r\n                        <input {...email.bind}/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">Password</label>\r\n                        <input {...password.bind}/>\r\n                        <label htmlFor=\"passwordCheckInput\" className=\"sr-only\">Password confirm</label>\r\n                        <input {...passwordCheck.bind}/>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign up</button>\r\n                    </form>\r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Register);","import React, { useCallback } from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './FileInput.css'\r\n\r\nfunction FileInput({ picture, setPicture }) {\r\n    const onDrop = useCallback((acceptedFiles) => {\r\n        acceptedFiles.forEach((file) => {\r\n            const reader = new FileReader()          \r\n\r\n            reader.readAsDataURL(file)\r\n\r\n            reader.onload = () => {\r\n                setPicture(reader.result)\r\n            }\r\n        })\r\n        \r\n    }, [setPicture])\r\n\r\n    const {acceptedFiles, getRootProps, getInputProps, isDragActive} = useDropzone({maxFiles: 1, accept: 'image/jpeg, image/png', onDrop});\r\n    \r\n    const fileSettings = acceptedFiles.map(file => (\r\n        <span key={file.path}>\r\n            {file.path} - {file.size} bytes<br/>\r\n        </span>\r\n    ));\r\n\r\n    return (\r\n        <div className=\"d-flex flex-column w-100\">   \r\n            <div {...getRootProps()} \r\n            className=\"d-flex justify-content-center align-items-center border border-primary w-100 p-3 rounded  drag-zone\"\r\n            style={{height: `${isDragActive ? 70 : 50}px`}}>\r\n                <input {...getInputProps()} />\r\n                <span className=\"text-primary\">{isDragActive ? \r\n                <Icon.Upload size={30}/> :\r\n                \"Drag 'n' drop picture here, or click to select\"}</span>\r\n            </div>\r\n            {picture && \r\n            <aside className=\"mt-1\">\r\n                <h5>Preview</h5>\r\n                {fileSettings}\r\n                <img src={picture} className=\"img-fluid rounded\" width=\"100\" alt=\"example\"/>\r\n            </aside>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileInput","import React, { createRef, useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport FileInput from '../fileInput/FileInput'\r\n\r\nimport './AddCollectionModal.css'\r\n\r\nfunction AddCollectionModal(params) {\r\n    const closeModal = createRef()\r\n\r\n    const userData = useSelector(state => state.userData)\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [topic, setTopic] = useState('Books')\r\n    const [description, setDescription] = useState('')\r\n    const [author, setAuthor] = useState(false)\r\n    const [comments, setComments] = useState(true)\r\n    const [year, setYear] = useState(false)\r\n    const [picture, setPicture] = useState('')\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const [uploading, setUploading] = useState(false)\r\n\r\n \r\n\r\n    function startLoad() {\r\n        setUploading(true)\r\n        setErrorLoading(false)\r\n        setErrorMessage('')\r\n    }\r\n\r\n    function endLoad() {\r\n        setUploading(false)\r\n        setErrorLoading(false)\r\n        setErrorMessage('')\r\n\r\n        setTitle('')\r\n        setPicture('')\r\n        setAuthor('')\r\n        setDescription('')\r\n        setYear('')\r\n        setComments(true)\r\n    }\r\n\r\n    async function addCollection() {\r\n        const close = closeModal.current\r\n\r\n        try {  \r\n            startLoad()\r\n\r\n            await Axios.post('/collections/upload', {\r\n                owner: userData.user.id,\r\n                title,\r\n                topic,\r\n                description,\r\n                author,\r\n                comments,\r\n                year,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })          \r\n\r\n            endLoad()\r\n            close.click()        \r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            console.log(error)\r\n            setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#addCollection\">\r\n                Add collection\r\n            </button>\r\n\r\n            \r\n            <div className=\"modal fade\" id=\"addCollection\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                {uploading && <Spinner errorMessage={errorMessage} errorLoading={errorLoading}/>}\r\n\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>   \r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">Collection settings</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">Title</span>\r\n                                    </div>\r\n                                    <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} className=\"form-control\" placeholder=\"Title\" aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">Topic</label>\r\n                                    </div>\r\n                                    <select className=\"custom-select\" value={topic} id=\"inputGroupSelect01\" onChange={(e) => setTopic(e.target.value)}>\r\n                                        <option value=\"Books\">Books</option>\r\n                                        <option value=\"Alcohol\">Alcohol</option>\r\n                                        <option value=\"CS:GO Skins\">CS:GO Skins</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">Description</span>\r\n                                    </div>\r\n                                    <textarea className=\"form-control\" value={description} onChange={(e) => setDescription(e.target.value)} aria-label=\"With textarea\"></textarea>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={comments} onChange={(e) => setComments(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">Comments</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={author} onChange={(e) => setAuthor(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">Author</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input defaultChecked={year} onChange={(e) => setYear(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">Year</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" ref={closeModal}>Close</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={addCollection}>Save changes</button>\r\n                            </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddCollectionModal","import React, { useState, useEffect } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { useSelector, connect } from 'react-redux'\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport AddCollection from '../collection/AddCollectionModal'\r\n\r\nfunction Profile() {\r\n    const userData = useSelector(state => state.userData)\r\n    const [userProfile, setUserProfile] = useState({});  \r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const location = useLocation();\r\n    const id = new URLSearchParams(location.search).get('id')\r\n\r\n    useEffect(() => {\r\n        const getProfileData = async () => {\r\n            try {\r\n                const response = await Axios.get('/user/profile', {\r\n                    params: {\r\n                        id \r\n                    }\r\n                })\r\n                \r\n                setUserProfile(response.data)\r\n            } catch (error) {\r\n                setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n                setErrorLoading(true)\r\n            }\r\n        };\r\n\r\n        getProfileData()\r\n    }, [id])\r\n\r\n    return (\r\n        <>\r\n            {!userProfile.user ? \r\n            <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/> :\r\n            userProfile.user ?\r\n                <div className=\"d-flex\">\r\n                    <div className=\"card col-md-6\">\r\n                        <div className=\"card-body\">\r\n                            <h5 className=\"card-title\">{userProfile.user.displayName}</h5>\r\n                            <div className=\"card-body\">\r\n                                {!userProfile.user.blocked ?\r\n                                <>\r\n                                    <div className=\"card-header\">Info</div>\r\n                                    <ul className=\"list-group list-group-flush\">\r\n                                        <li className=\"list-group-item\">Email: {userProfile.user.email}</li>\r\n                                        <li className=\"list-group-item\">Register date: {userProfile.user.registerDate}</li>\r\n                                        <li className=\"list-group-item\">Role: {userProfile.user.userRole}</li>\r\n                                        <li className=\"list-group-item\">\r\n                                            <Link to={`/collections?id=${userProfile.user.id}`}>Collections</Link>\r\n                                        </li>\r\n                                    </ul>\r\n                                </> :\r\n                                <h5 className=\"text-danger\">User has been blocked</h5>}\r\n                                {userData.user && userData.user.id === id && !userData.user.blocked && userData.user.userRole === 'admin'\r\n                                && <Link to=\"/admin\" className=\"btn btn-primary\">Admin panel</Link>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {(userData.user && (userData.user['id'] === id || userData.user['userRole'] === 'admin')) && <div className=\"col-md-6\">\r\n                        <AddCollection/>\r\n                    </div>}\r\n            </div>: <h2>No user with this id :(</h2>}\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Profile)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nfunction Dashboard(props){\r\n    return (\r\n        <h1>It's Dashboard</h1>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Dashboard)","import React from 'react';\r\nimport { useDispatch, connect } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { isLogin } from '../../redux/actions';\r\n\r\nconst PrivateRoute = ({component: Component, ...rest}) => {\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <Route {...rest} render={props => (\r\n            dispatch(isLogin) ?\r\n                <Component {...props} />\r\n            : <Redirect to={{pathname: \"/login\", state: {nextPathname: props.location.pathname}}}/>\r\n        )} />\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute)","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport { deleteUser, setAdmin, removeAdmin, blockUser, unblockUser } from '../../redux/actions';\r\n\r\nfunction Users() {\r\n    const [users, setUsers] = useState([])\r\n    const [flack, setFlack] = useState(false)\r\n    const [actionsUsers, setActionsUsers] = useState([])\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const userData = useSelector(state => state.userData)\r\n    const error = useSelector(state => state.error)\r\n    const dispatch = useDispatch()\r\n    const keys = ['displayName', 'email', 'registerDate', 'userRole']\r\n\r\n    useEffect(() => {\r\n        const getUsers = async () => {\r\n            if(!userData.token)\r\n                return;\r\n            try {\r\n                const response = await Axios.get('/user/users', {\r\n                    headers: {\r\n                        'x-auth-token': userData.token \r\n                    }\r\n                })\r\n      \r\n                if(response.data) {\r\n                    setUsers(response.data)\r\n                }\r\n    \r\n            } catch (error) {\r\n                setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n                setErrorLoading(true)\r\n            }\r\n        }\r\n\r\n        getUsers()\r\n    }, [userData, users.length])\r\n\r\n    useEffect(() => {\r\n        setErrorMessage(error.error.message)\r\n        error.error.message && setErrorLoading(true)\r\n    }, [error])\r\n\r\n    function compare(a, b, key, flack) {\r\n        if (a[key] === b[key]) return 0;\r\n        if (a[key] > b[key]) return flack ? 1 : -1; \r\n        if (a[key] < b[key]) return flack ? -1 : 1;\r\n    }\r\n\r\n    function sort(e, key) {\r\n        setFlack(!flack)\r\n        setUsers(users.sort((a, b) => compare(a, b, key, flack)).slice())\r\n        setTimeout(() => {\r\n            e.target.blur()\r\n        }, 100)\r\n    }\r\n\r\n    function userForAction(e, id) {\r\n        if(e.target.checked)\r\n            setActionsUsers([...actionsUsers, id])\r\n        else setActionsUsers(actionsUsers.filter(e => e !== id))\r\n    }\r\n\r\n    function action(title) {\r\n        switch (title) {\r\n            case 'delete':\r\n                dispatch(deleteUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'setAdmin':\r\n                dispatch(setAdmin(userData.token, actionsUsers))\r\n                break;\r\n            case 'removeAdmin':\r\n                dispatch(removeAdmin(userData.token, actionsUsers, error))\r\n                break; \r\n            case 'block':\r\n                dispatch(blockUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'unblock':  \r\n                dispatch(unblockUser(userData.token, actionsUsers))\r\n                break;  \r\n            default:\r\n                break;\r\n        }       \r\n\r\n        setUsers([])\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {(!users.length || errorMessage) && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n\r\n        {users.length ? \r\n        <>\r\n            <div className=\"d-flex flex-column w-100 mb-2\">\r\n                <div className=\"d-flex flex-xl-row flex-column align-items-center\">\r\n                    <div className=\"btn-group btn-group-sm-sm mr-xl-auto mb-xl-0 mb-1\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'displayName')}>Name</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'email')}>Email</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'registerDate')}>Register date</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'userRole')}>User role</button>\r\n                    </div>\r\n                    <div className=\"btn-group btn-group-sm-sm\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('delete')}>Delete <Icon.TrashFill/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('block')}>Blocked <Icon.LockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('unblock')}>Unblocked <Icon.UnlockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('setAdmin')}>Set admin <Icon.PersonPlusFill style={{marginBottom: 3}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('removeAdmin')}>Remove admin <Icon.PersonXFill style={{marginBottom: 3}}/></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <table className=\"table table-bordered table-hover table-responsive-md\">\r\n                <caption>List of users</caption>\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th>Select</th>\r\n                        <th>Name</th>\r\n                        <th>Email</th>\r\n                        <th>Regiser Date</th>\r\n                        <th>User role</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map((e, i) => {\r\n                        return (\r\n                        <tr key={i} className={`${e['blocked'] && 'table-danger'}${actionsUsers.findIndex(user => user === e['_id']) > -1 ? ' table-primary' : ''}`}>\r\n                            <td>\r\n                                <div className=\"text-center\">\r\n                                    <input id={e['_id']} type=\"checkbox\" readOnly checked={actionsUsers.findIndex(user => user === e['_id']) > -1} className=\"form-check-label\" onClick={(event) => userForAction(event, e['_id'])}/>\r\n                                </div>\r\n                            </td>\r\n                            {keys.map((key, ind) => (\r\n                                <td key={ind}>{key === 'displayName' ?\r\n                                <Link className=\"text-decoration-none\" to={`/profile?id=${e['_id']}`}>{e['blocked'] ? \r\n                                    <> {e[key]} <Icon.LockFill style={{marginBottom: 4}}/> </> : \r\n                                    e[key]}</Link> :\r\n                                e[key]}</td>\r\n                            ))}            \r\n                        </tr>\r\n                        )\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </>:<></>}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Users)","import React from 'react'\r\nimport { useSelector, connect } from 'react-redux'\r\n\r\nimport Users from '../users/Users'\r\n\r\nfunction Admin(props){\r\n    const userData = useSelector(state => state.userData)\r\n\r\n    return (\r\n        <>\r\n            {userData.token && userData.user.userRole !== 'admin' ? \r\n            <h1>You don't have permissions for this page :(</h1> :\r\n            <Users/>} \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Admin)","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport { useSelector } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nimport './CollectionsItems.css'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { title, topic, description, picture, _id, owner } = props \r\n\r\n    const location = useLocation()\r\n    const userData = useSelector(state => state.userData)\r\n\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    async function deleteCollection() {\r\n        try {\r\n            Axios.delete('/collections/delete', {\r\n                params: {\r\n                    id: _id\r\n                },\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n        } catch (error) {\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {(errorMessage) && <Spinner errorLoading={true} errorMessage={errorMessage}/>}\r\n            <div className=\"card\" style={{width: '18rem'}}>\r\n                <div className=\"card-img-top\" style={{backgroundImage: `url(${picture})`}} alt={title}/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <h6 className=\"card-subtitle mb-2 text-muted\">{topic}</h6>\r\n                    <ReactMarkdown source={description}/>\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                    <Link to={`${location.pathname}/collection?collection_id=${_id}`} className=\"btn btn-primary\">Explore</Link>\r\n                    {(userData.user && (userData.user.id === owner || userData.user.userRole === 'admin')) && <Icon.TrashFill className=\"text-danger ml-2 delete-collection\" onClick={deleteCollection}/>}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React, { useEffect, useState } from 'react'\r\nimport Axios from 'axios'\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport Card from './CollectionCard'\r\n\r\nimport './CollectionsItems.css'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { id } = props \r\n    const [collections, setCollections] = useState([])\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    useEffect(() => {\r\n        const getCollections = async () => {\r\n            try {\r\n                const response = await Axios.get('/collections/', {\r\n                    params: {\r\n                        id\r\n                    }\r\n                })\r\n\r\n                setCollections(response.data)\r\n            } catch (error) {\r\n                setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n                setErrorLoading(true)\r\n            }\r\n        }\r\n\r\n        getCollections()\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    return (\r\n        <>\r\n            {!collections.length ? <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>\r\n            :\r\n            <div className=\"d-flex collections-container flex-wrap justify-content-center justify-content-md-start\">\r\n                {collections.map((e) => (\r\n                    <Card key={e._id} {...e}/>\r\n                ))}\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nimport CollectionsItems from '../collection/CollectionsItems'\r\n\r\nfunction Collections(props){\r\n    // const userData = useSelector(state => state.userData)\r\n    const location = useLocation()\r\n    const id = new URLSearchParams(location.search).get('id')\r\n\r\n    return (\r\n        <>\r\n            <CollectionsItems id={id}/>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Collections)","import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\nimport Axios from 'axios'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { getCollection } from '../../redux/actions'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\n\r\nimport './AddItem.css'\r\n\r\nconst baseTagifySettings = {\r\n    blacklist: [\"xxx\", \"yyy\", \"zzz\"],\r\n    maxTags: 5,\r\n    placeholder: \"type something\",\r\n    dropdown: {\r\n      enabled: 0\r\n    }\r\n  }\r\n\r\nfunction AddItemModal(props) {\r\n    const {author, year, comments, id} = props\r\n\r\n    const closeModal = useRef()\r\n    const tagifyRef = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const userData = useSelector(state => state.userData)\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [itemAuthor, setItemAuthor] = useState('')\r\n    const [itemDate, setItemDate] = useState('')\r\n    const [tagifySettings] = useState([])\r\n    const [tagifyProps, setTagifyProps] = useState({})\r\n    const [picture, setPicture] = useState('')\r\n\r\n    const fetchItems = useCallback(() => {\r\n        dispatch(getCollection(id))            \r\n    }, [id, dispatch]) \r\n\r\n    async function addItem() {\r\n        try {\r\n            await Axios.post('/item/add', {\r\n                title,\r\n                date: itemDate,\r\n                author: itemAuthor,\r\n                tags: tagifyRef.current.value,\r\n                id,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            closeModal.current.click()\r\n            fetchItems()\r\n        } catch (error) {\r\n            console.log(error.response.data.message)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getTags = async () => {\r\n            try {\r\n                setTagifyProps({loading: true})\r\n\r\n                const response = await Axios.get('/item/tags')\r\n\r\n                setTagifyProps((lastProps) => ({\r\n                    ...lastProps,\r\n                    whitelist: response.data.map(e => e.text),\r\n                    loading: false\r\n\r\n                }))\r\n            } catch (error) {\r\n                \r\n            }\r\n            \r\n        }\r\n        getTags()\r\n    }, [])\r\n\r\n    const settings = {\r\n        ...baseTagifySettings,\r\n        ...tagifySettings\r\n      }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"addItem\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>\r\n                        <>\r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">Item settings</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={comments} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">Comments</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={author} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">Author</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input disabled defaultChecked={year} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">Year</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">Title</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={title} \r\n                                    onChange={(e) => setTitle(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder=\"Title\" aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                {author && \r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">Author</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={itemAuthor}\r\n                                    onChange={(e) => setItemAuthor(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder=\"Author\" aria-label=\"Author\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                }\r\n                                {year &&\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">Date</span>\r\n                                    </div>\r\n                                    <input \r\n                                    onChange={(e) => setItemDate(e.target.valueAsNumber)} \r\n                                    type=\"date\" className=\"form-control\" placeholder=\"Date\" aria-label=\"Date\"/>\r\n                                </div>\r\n                                }\r\n                                <div className=\"input-group mb-3\">\r\n                                    <Tags\r\n                                    tagifyRef={tagifyRef}\r\n                                    settings={settings}\r\n                                    {...tagifyProps}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" ref={closeModal}>Close</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={addItem}>Add item</button>\r\n                            </div> \r\n                        </>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default AddItemModal","import React, { useRef } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport $ from 'jquery'\r\n\r\nimport Modal from './AddItemModal'\r\n\r\nimport './AddItem.css'\r\n\r\nfunction AddItem(props) {\r\n    const card = useRef()\r\n\r\n    function hover() {\r\n        $(card.current).toggleClass('border-primary')\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div ref={card} className=\"card add-item bg-light\" data-toggle=\"modal\" data-target=\"#addItem\" onMouseEnter={hover} onMouseLeave={hover} style={{width: '12rem'}}>\r\n                <div className=\"card-body d-flex justify-content-center align-items-center\" style={{height: '15rem'}}>\r\n                    <span><Icon.PlusCircle height={'50px'} width={'50px'}/></span>\r\n                </div>\r\n            </div>\r\n\r\n            <Modal {...props}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddItem","import React, {  } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\n\r\nimport './Comment.css'\r\nimport { getItem } from '../../redux/actions'\r\n\r\nfunction Comment(props) {\r\n    const { userPhoto, userId, date, comment, modal, userName, owner, _id } = props \r\n\r\n    const userData = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    async function removeComment() {\r\n        try {\r\n            await Axios.post('/item/removeComment', {\r\n                commentId: _id,\r\n                itemId: item._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n            \r\n            dispatch(getItem(item._id))\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center comment-header justify-content-between p-1 border border-primary\">\r\n                    <div className=\"d-flex align-items-center\"> \r\n                        <Link \r\n                        onClick={() => modal.current.click()}\r\n                        to={`/profile?id=${userId}`}\r\n                        style={{textDecoration: 'none'}}\r\n                        >\r\n                        <UserPicture picture={userPhoto} name={userName}/>    \r\n                        </Link>\r\n                        <span className=\"pl-1\">{userName}</span>\r\n                    </div>\r\n                    <div>\r\n                        {new Date(date).toLocaleDateString()}\r\n                        {(userData.user && (userId=== owner || userData.user.userRole === 'admin')) && <span className=\"ml-1\" style={{cursor: 'pointer'}} onClick={removeComment}><Icon.X/></span>}\r\n                    </div>\r\n                </div>  \r\n                <div className=\"border p-2\">\r\n                    <ReactMarkdown source={comment}/>\r\n                </div> \r\n            </div> \r\n    )\r\n}\r\n\r\nexport default Comment","import React, { useState, useRef } from 'react'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\n\r\nimport { getItem } from '../../redux/actions'\r\n\r\nimport './AddComment.css'\r\n\r\nfunction AddComment(props) {\r\n    const userData = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const commentBtn = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [comment, setComment] = useState('')\r\n\r\n    function confirmKey(e) {\r\n        if(e.code === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault()\r\n            addComment()\r\n        }\r\n    }\r\n\r\n    async function addComment() {\r\n        if(!comment.trim()) {\r\n            return\r\n        }\r\n\r\n        setComment('')\r\n\r\n        try {\r\n            await Axios.post('/item/comment', {\r\n                comment,\r\n                itemId: item._id,\r\n                collectionId: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getItem(item._id))\r\n            commentBtn.current.blur()\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {userData.user && \r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center p-1 border border-primary\">\r\n                    <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                    <span className=\"pl-1\">{userData.user.displayName}</span>\r\n                </div>  \r\n                <div className=\"d-flex border p-2\">\r\n                    <textarea placeholder=\"Leave a comment...\" value={comment} \r\n                    onChange={(e) => setComment(e.target.value)} \r\n                    maxLength=\"200\" \r\n                    className=\"form-control mr-1\"\r\n                    onKeyPress={confirmKey}></textarea>\r\n                    <button className=\"btn btn-outline-primary btn-comment\" disabled={!comment.length} ref={commentBtn} onClick={addComment}>\r\n                        <Icon.ArrowRightCircle/>\r\n                    </button>\r\n                </div> \r\n            </div> \r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddComment","import React, { useRef, useEffect } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport { useSelector, connect, useDispatch } from 'react-redux'\r\n\r\nimport '@yaireo/tagify/dist/tagify.css'\r\n\r\nimport './ModalItem.css'\r\n\r\nimport Comment from '../comment/Comment'\r\nimport AddComment from '../comment/AddComment'\r\nimport Like from './ItemLike'\r\n\r\nimport { getItem } from '../../redux/actions'\r\n\r\nfunction ModalItem(props) {\r\n    const { item } = useSelector(state => state.item)\r\n    const userData = useSelector(state => state.userData) \r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const closeModal = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(async () => {\r\n            if(!item._id) {\r\n                return\r\n            }\r\n            dispatch(getItem(item._id))\r\n        }, 3000)\r\n\r\n        return () => clearInterval(interval)\r\n    })\r\n\r\n    return (\r\n        <div className=\"modal fade\" ref={closeModal} tabIndex=\"-1\" id=\"item\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">{item.title}</h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        {item.picture &&\r\n                        <img src={item.picture} className=\"img-fluid rounded\" alt={item.title}/>}\r\n                        <ul className=\"list-group mt-1\">\r\n                            {item.author && <li className=\"list-group-item\">Author: {item.author}</li>}\r\n                            {item.year && <li className=\"list-group-item\">Date: {new Date(item.year).toLocaleDateString()}</li>}\r\n                        </ul>\r\n                        {item.tags && item.tags.length > 0 && <Tags value={item.tags} readOnly className=\"mt-1\"/>}\r\n                        {item.likes &&\r\n                        <div className=\"d-flex justify-content-end\">\r\n                             <Like likes={item.likes} id={item._id}/>\r\n                        </div>}\r\n                    </div>\r\n                    <div className=\"d-flex modal-footer justify-content-start\">\r\n                        {collection.comments &&\r\n                        <>\r\n                            <AddComment />\r\n                            {item.comments ? item.comments.map((e,i) => <Comment key={i} {...e} modal={closeModal} owner={userData.user && userData.user.id}/>) :\r\n                            <p>Loading...</p>}\r\n                        </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.item;\r\n\r\nexport default connect(mapStateToProps, null)(ModalItem)","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport { sortCollection } from '../../redux/actions'\r\nimport { CHANGE_ASCENDING } from '../../redux/types'\r\n\r\nimport './CollectionsItems.css'\r\n\r\nfunction Sort() {\r\n    const { sortOptions, collection }  = useSelector(state => state.collection)\r\n    const [selectedSort, setSelectedSort] = useState(sortOptions.key)\r\n\r\n    const dispatch = useDispatch()  \r\n\r\n    useEffect(() => {\r\n        dispatch(sortCollection(selectedSort.toLowerCase()))\r\n    }, [selectedSort, dispatch])\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center mb-3 col-6\">\r\n            <span>Sort</span>\r\n            <select className=\"form-control ml-2\" value={selectedSort} id=\"inputGroupSelect01\" onChange={(e) => setSelectedSort(e.target.value)}>\r\n                <option value=\"Title\">Title</option>\r\n                <option value=\"Likes\">Likes</option>\r\n                {collection.collection.author && <option value=\"Author\">Author</option>}\r\n                {collection.collection.year && <option value=\"Date\">Date</option>}\r\n                {collection.collection.comments && <option value=\"Comments\">Comments</option>}\r\n            </select>\r\n            <span \r\n            className=\"ml-2\" \r\n            onClick={() => dispatch({type: CHANGE_ASCENDING})}\r\n            style={{cursor: 'pointer'}}\r\n            >\r\n                {sortOptions.ascending ? <Icon.SortUp size={20}/> : <Icon.SortDown size={20}/>}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sort","import React, { useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nfunction Filter({ filter, setFilter }) {\r\n    const { collection }  = useSelector(state => state.collection.collection)\r\n    const pictureCheck = useRef()\r\n\r\n    function reset() {\r\n        const clearObj = {}\r\n\r\n        for (const key in filter) {\r\n            clearObj[key] = key === 'apply' ? filter[key] : undefined\r\n        }\r\n\r\n        pictureCheck.current.checked = false\r\n\r\n        setFilter({...clearObj})\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center flex-column mb-3 col-6\">\r\n            <button className=\"btn btn-primary mb-2 ml-auto\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                <Icon.FunnelFill/>\r\n            </button>\r\n\r\n            <div className=\"collapse w-100\" id=\"collapseExample\">\r\n                <div className=\"card card-body\">\r\n                    <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">Title</span>\r\n                        </div>\r\n                        <input value={filter.title || ''} type=\"text\" className=\"form-control\" onChange={(e) => setFilter({...filter, title: e.target.value})} placeholder=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                    </div>\r\n                    {collection.author && <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">Author</span>\r\n                        </div>\r\n                        <input value={filter.author || ''} onChange={(e) => setFilter({...filter, author: e.target.value})} type=\"text\" className=\"form-control\" placeholder=\"Author\" aria-describedby=\"basic-addon1\"/>\r\n                    </div>}\r\n                    {collection.year && <div className=\"d-flex align-items-center mb-3\">\r\n                        <input value={(filter.dateFrom && new Date(filter.dateFrom).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateFrom: new Date(e.target.value)})} className=\"form-control\"/>\r\n                        <span className=\"mx-2\">-</span>\r\n                        <input value={(filter.dateTo && new Date(filter.dateTo).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateTo: new Date(e.target.value)})} className=\"form-control\"/>\r\n                    </div>}\r\n                    <div className=\"form-check mb-3\">\r\n                        <input ref={pictureCheck} onChange={(e) => setFilter({...filter, picture: e.target.checked})} className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\"/>\r\n                        <label className=\"form-check-label\" htmlFor=\"defaultCheck1\">\r\n                            Picture\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"d-flex custom-control custom-switch justify-content-end\">\r\n                        <input defaultValue={false} type=\"checkbox\" onChange={(e) => setFilter({...filter, apply: e.target.checked})} className=\"custom-control-input\" id=\"customSwitch1\"/>\r\n                        <label className=\"custom-control-label\" htmlFor=\"customSwitch1\">Apply</label>\r\n                    </div>\r\n                    <button className=\"btn btn-danger\" onClick={reset}>Reset</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React, { useEffect, useState } from 'react'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { useLocation, Link } from 'react-router-dom'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport AddItem from '../items/AddItem'\r\nimport Item from '../items/Item'\r\nimport Modal from '../items/ModalItem'\r\nimport Sort from '../collection/Sort'\r\nimport Filter from '../collection/Filter'\r\n\r\nimport { getCollection } from '../../redux/actions'\r\n\r\nfunction Collection(props){\r\n    const [filter, setFilter] = useState({\r\n        apply: false\r\n    })\r\n\r\n    const userData = useSelector(state => state.userData)\r\n    const { collection, items } = useSelector(state => state.collection.collection)\r\n    const { sortOptions } = useSelector(state => state.collection)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const location = useLocation()\r\n    const id = new URLSearchParams(location.search).get('collection_id')\r\n\r\n    useEffect(() => {\r\n        dispatch(getCollection(id))\r\n    }, [id, dispatch])\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            dispatch(getCollection(id))\r\n        }, 2000)\r\n\r\n        return () => clearInterval(interval)\r\n    }, [id, dispatch])\r\n\r\n    function filterOptions(e) {\r\n        if(!filter.apply) {\r\n            return true\r\n        }\r\n\r\n        if(filter.title && filter.title.trim()) {\r\n            const ref = new RegExp(`${filter.title}`, 'gi')\r\n            if(!e.title.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.author && filter.author.trim()) {\r\n            const ref = new RegExp(`${filter.author}`, 'gi')\r\n\r\n            if(!e.author.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.dateFrom && filter.dateTo) {\r\n            const current = new Date(e.year)\r\n\r\n            if(current < filter.dateFrom || current > filter.dateTo) {\r\n                return false\r\n            }\r\n        } \r\n\r\n        if(filter.picture && !e.picture) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    function compare(a, b) {\r\n        switch (sortOptions.key) {\r\n            case 'likes':\r\n                if (a.likes.number > b.likes.number) return sortOptions.ascending ? 1 : -1; \r\n                if (a.likes.number === b.likes.number) return 0; \r\n                if (a.likes.number < b.likes.number) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'date':\r\n                if (a['year'] > b['year']) return sortOptions.ascending ? 1 : -1; \r\n                if (a['year'] === b['year']) return 0; \r\n                if (a['year'] < b['year']) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'comments':\r\n                if (a['comments'].length > b['comments'].length) return sortOptions.ascending ? 1 : -1; \r\n                if (a['comments'].length === b['comments'].length) return 0; \r\n                if (a['comments'].length < b['comments'].length) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            default:\r\n                if (a[sortOptions.key] > b[sortOptions.key]) return sortOptions.ascending ? 1 : -1; \r\n                if (a[sortOptions.key] === b[sortOptions.key]) return 0; \r\n                if (a[sortOptions.key] < b[sortOptions.key]) return sortOptions.ascending ? -1 : 1;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {collection &&\r\n            <>\r\n                <Link to={`/collections?id=${collection.owner}`}>All collections</Link>\r\n\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{collection.title}</h2>\r\n                    <h3 className=\"badge badge-primary\">{collection.topic}</h3>\r\n                    <ReactMarkdown source={collection.description}/>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <Sort/>\r\n                    <Filter filter={filter} setFilter={setFilter}/>\r\n                </div>\r\n                <div className=\"d-flex justify-content-around flex-wrap\">\r\n                    {items.filter(filterOptions).sort(compare).map((e) => <Item key={e._id} itemProps={e} collectionId={id}/>)}\r\n                    {userData.user && (userData.user.id === collection.owner || userData.user.userRole === 'admin') \r\n                    && <AddItem comments={collection.comments} author={collection.author} year={collection.year} id={id}/>}\r\n                    <Modal />\r\n                </div>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Collection)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Item from '../items/Item';\r\n\r\nimport './Search.scss'\r\n\r\nfunction Home(props){\r\n    const { items } = props\r\n\r\n    return (\r\n        <>\r\n            <div className=\"d-flex flex-wrap search-items-container\">\r\n                {items.length ?\r\n                items.map((e) => <Item itemProps={e} key={e._id}/>):\r\n                'No items with that query'}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.search;\r\n\r\nexport default connect(mapStateToProps, null)(Home)","import './App.css';\nimport { useEffect } from 'react'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\nimport { connect, useDispatch } from 'react-redux'\n\nimport Header from './components/layout/Header'\nimport Home from './components/pages/Home'\nimport Login from './components/auth/Login'\nimport Register from './components/auth/Register'\nimport Profile from './components/pages/Profile'\nimport Dashboard from './components/pages/Dashboard'\nimport PrivateRoute from './components/routes/PrivateRoute'\nimport Admin from './components/pages/Admin'\nimport AllCollections from './components/pages/AllCollections'\nimport Collection from './components/pages/Collection'\nimport Search from './components/pages/Search'\n\nimport { getUser } from './redux/actions';\n\nfunction App() {\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(getUser())\n  }, [dispatch])\n\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n          <Header/>         \n          <div className=\"container pt-2\">\n            <Switch>\n                <Route exact path='/' component={Home}/>\n                <Route path=\"/login\" component={Login}/>\n                <Route path=\"/register\" component={Register}/>\n                <Route path=\"/profile:id?\" component={Profile}/>\n                <Route path=\"/collections:id?\" exact component={AllCollections}/>\n                <Route path=\"/collections/collection:collection_id?\" exact component={Collection}/>\n                <Route path=\"/search\" exact component={Search}/>\n                <PrivateRoute path=\"/dashboard\" component={Dashboard}/>\n                <PrivateRoute path=\"/admin\" component={Admin}/>\n            </Switch>\n          </div>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nconst mapStateToProps = state => state.userData\n\nexport default connect(mapStateToProps, null)(App);\n","import { GET_USER, IS_LOGIN, RESET_USER, SET_USER, DELETE_USER, SET_ADMIN, REMOVE_ADMIN, BLOCK_USER, UNBLOCK_USER } from \"./types\";\r\n\r\nconst initialState = {\r\n    userData: {\r\n        token: undefined,\r\n        user: undefined\r\n    }\r\n}\r\n\r\nexport const userReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_USER:\r\n            return { \r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n            }\r\n        case SET_USER:\r\n            return { \r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n            }\r\n        case RESET_USER:\r\n            return { \r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n            }   \r\n        case DELETE_USER:\r\n            return state\r\n        case SET_ADMIN:\r\n            return state\r\n        case REMOVE_ADMIN:\r\n            return state\r\n        case BLOCK_USER:\r\n            return state\r\n        case UNBLOCK_USER:\r\n            return state\r\n        case IS_LOGIN:\r\n            return state\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_ERROR, CLEAR_ERROR } from \"./types\"\r\n\r\nconst initialState = {\r\n    error: {\r\n        message: null\r\n    }\r\n}\r\n\r\nexport const errorReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ERROR:\r\n            return {\r\n                error:{\r\n                    message: action.payload \r\n                }\r\n            }\r\n        case CLEAR_ERROR:\r\n            return  {\r\n                error:{\r\n                    message: action.payload \r\n                }\r\n            }        \r\n        default:\r\n            return state    \r\n    }\r\n}","import { GET_ITEM, SET_ITEM } from \"./types\";\r\n\r\nconst initialState = {\r\n    item: {}\r\n}\r\n\r\nexport const itemReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }\r\n        case GET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_COLLECTION, SORT_COLLECTION, CHANGE_ASCENDING } from \"./types\";\r\n\r\nconst initialState = {\r\n    collection: {},\r\n    sortOptions: {\r\n        key: 'Date',\r\n        ascending: true\r\n    }\r\n}\r\n\r\nexport const collectionReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_COLLECTION:\r\n            return {\r\n                ...state, collection: action.payload\r\n            }\r\n        case SORT_COLLECTION:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    key: action.payload\r\n                }\r\n            }\r\n        case CHANGE_ASCENDING:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    ascending: !state.sortOptions.ascending\r\n                }\r\n            }     \r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_HOME } from \"./types\";\r\n\r\nconst initialState = {\r\n    tags: [],\r\n    lastAdded: [],\r\n    mostLike: []\r\n}\r\n\r\nexport const homeReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_HOME: \r\n            return {...state, \r\n                tags: action.payload.tags, \r\n                lastAdded: action.payload.lastAdded,\r\n                mostLike: action.payload.mostLike \r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_SEARCH } from \"./types\";\r\n\r\nconst initialState = {\r\n    items: JSON.parse(localStorage.getItem('search-items')) || {}, \r\n    searchText: localStorage.getItem('search-text') || ''\r\n}\r\n\r\nexport const searchReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_SEARCH:\r\n            return {\r\n                ...state, items: action.payload.items, searchText: action.payload.searchText\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from 'redux'\r\n\r\nimport { userReducer } from './userReducer'\r\nimport { errorReducer } from './errorReducer'\r\nimport { itemReducer } from './itemReducer'\r\nimport { collectionReducer } from './collectionReducer'\r\nimport { homeReducer } from './homeReducer'\r\nimport { searchReducer } from './searchReducer'\r\n\r\nexport const rootReducer = combineReducers({\r\n    userData: userReducer,\r\n    error: errorReducer,\r\n    item: itemReducer,\r\n    collection: collectionReducer,\r\n    home: homeReducer,\r\n    search: searchReducer\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\n\nimport './index.css';\nimport App from './App';\nimport { applyMiddleware, compose, createStore } from 'redux'\nimport { rootReducer } from './redux/rootReducer';\n\nconst store = createStore(rootReducer, compose(\n  applyMiddleware(\n    thunk\n  )\n))\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n        <App/>\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}