{"version":3,"sources":["components/userPicture/UserPicture.js","config.js","redux/types.js","redux/actions.js","components/layout/Header.js","components/layout/Footer.js","components/items/ItemLike.js","components/mainPicture/MainPicture.js","components/items/Item.js","components/homeSections/LastAdded.js","components/homeSections/Tags.js","components/items/HomeItem.js","components/homeSections/MostLike.js","components/spinner/Spinner.js","components/pages/Home.js","helpers/useInputValue.js","components/auth/VkAuth.js","components/auth/Login.js","components/auth/Register.js","components/fileInput/FileInput.js","components/collection/AddCollectionModal.js","components/collection/BtnAddCollection.js","components/spinner/SpinnerComponent.js","components/collection/CardCollection.js","components/collection/EditCollectionModal.js","components/collection/CollectionsItems.js","components/pages/Profile.js","components/routes/PrivateRoute.js","components/users/Users.js","components/pages/Admin.js","components/items/AddItemModal.js","components/items/AddItem.js","components/comment/Comment.js","components/comment/AddComment.js","components/items/ModalItem.js","components/items/EditItemModal.js","components/collection/Sort.js","components/collection/Filter.js","components/pages/Collection.js","components/pages/Search.js","components/alerts/AlertError.js","components/alerts/AlertStatus.js","App.js","redux/userReducer.js","redux/errorReducer.js","redux/itemReducer.js","redux/collectionReducer.js","redux/homeReducer.js","redux/searchReducer.js","redux/allCollectionsReducer.js","redux/rootReducer.js","index.js"],"names":["UserPicture","picture","name","styles","className","style","backgroundImage","API_URL","GET_USER","SET_USER","RESET_USER","IS_LOGIN","DELETE_USER","SET_ADMIN","REMOVE_ADMIN","BLOCK_USER","UNBLOCK_USER","SET_ERROR","CLEAR_ERROR","SET_ITEM","GET_ITEM","GET_COLLECTION","SORT_COLLECTION","CHANGE_ASCENDING","GET_HOME","SET_SEARCH","SWITCH_LANG","GET_ALLCOLLECTIONS","START_LOADING_PAGE","END_LOADING_PAGE","SET_NOTIFY","ERROR_CLEARALL","START_LOADING_COLLECTIONS","END_LOADING_COLLECTIONS","START_LOADING_COLLECTION","END_LOADING_COLLECTION","clearErrorAll","type","payload","error","notify","loading","setNotify","state","getAllCollections","id","dispatch","a","Axios","get","params","response","data","setError","setSearch","searchText","localStorage","setItem","JSON","stringify","items","console","log","getHome","firstLoad","getState","startLoadingPage","endLoadingPage","getCollection","collection","_id","setUser","user","getItem","text","message","isLogin","sessionStorage","resetUser","token","undefined","lang","connect","userData","props","useSelector","search","useDispatch","history","useHistory","useState","searchTextInput","setSearchTextInput","useEffect","onSearch","e","preventDefault","trim","push","to","Header","collections","data-toggle","data-target","aria-controls","aria-expanded","aria-label","home","onSubmit","value","onChange","target","placeholder","onClick","userPhoto","aria-haspopup","displayName","background","removeItem","window","location","reload","logOut","logIn","register","post","headers","ItemLike","likes","homeAction","liked","setLiked","likesNumber","setLikesNumber","itemId","usersId","findIndex","number","cursor","MainPicture","size","Item","itemProps","author","year","title","collection_id","useLocation","width","height","pathname","date","Date","toLocaleDateString","userRole","owner","item","edit","SwiperCore","use","Navigation","Pagination","A11y","lastAdded","like","useCallback","length","navigation","pagination","clickable","spaceBetween","slidesPerView","breakpoints","576","768","1200","map","i","Scrollbar","tags","scrollbar","draggable","992","tag","useRef","mostLike","HomeItem","Spinner","role","interval","setInterval","clearInterval","useInputValue","field","setValue","bind","event","required","clear","btn","backgroundColor","display","alignItems","color","boxShadow","padding","borderRadius","border","fontSize","fontWeight","fontFamily","div","span","VkAuth","checkLoginState","setState","isProcessing","callback","handleClick","isLoaded","disabled","VK","Auth","login","this","sdkLoaded","asyncInit","loadSdkAsync","apiId","vkAsyncInit","init","el","document","createElement","src","async","getElementsByTagName","appendChild","buttonProps","containerStyle","Component","email","password","remember","createRef","errorLoading","setErrorLoading","errorMessage","setErrorMessage","resGoogle","resVk","idToken","tokenId","checked","vkId","session","first_name","last_name","signIn","htmlFor","emailAdress","autoFocus","ref","rememberMe","clientId","buttonText","onSuccess","passwordCheck","Register","signUp","emailAddress","passwordConfirm","FileInput","setPicture","onDrop","acceptedFiles","forEach","file","reader","FileReader","readAsDataURL","onload","result","useDropzone","maxFiles","accept","getRootProps","getInputProps","isDragActive","dragAndDrop","alt","AddCollectionModal","setTitle","topic","setTopic","description","setDescription","setAuthor","comments","setComments","setYear","URLSearchParams","tabIndex","aria-labelledby","aria-hidden","position","collectionSettings","data-dismiss","aria-describedby","defaultChecked","close","save","BtnAddCollection","SpinnerComponent","CollectionsItems","delete","source","CollectionCard","explore","closeModal","current","click","allCollections","CardCollection","userProfile","setUserProfile","getProfileData","gap","parseFloat","registerDate","component","rest","render","nextPathname","users","setUsers","flack","setFlack","actionsUsers","setActionsUsers","keys","sort","key","b","compare","slice","setTimeout","blur","action","deleteUser","setAdmin","err","removeAdmin","blockUser","unblockUser","getUsers","marginBottom","readOnly","filter","userForAction","ind","Admin","permission","baseTagifySettings","blacklist","maxTags","dropdown","enabled","AddItemModal","tagifyRef","itemAuthor","setItemAuthor","itemDate","setItemDate","tagifySettings","tagifyProps","setTagifyProps","fetchItems","lastProps","whitelist","getTags","settings","itemSettings","valueAsNumber","addItem","AddItem","card","Comment","userId","comment","modal","userName","commentId","textDecoration","AddComment","commentBtn","setComment","addComment","collectionId","leaveComment","maxLength","onKeyPress","code","shiftKey","ModalItem","EditItemModal","Object","toISOString","substr","saveItem","Sort","sortOptions","selectedSort","setSelectedSort","toLowerCase","ascending","Filter","setFilter","pictureCheck","dateFrom","dateTo","defaultValue","apply","clearObj","reset","RegExp","match","AlertError","class","AlertStatus","loadingCollection","userRes","exact","path","Home","Login","Profile","Collection","Search","initialState","parse","rootReducer","combineReducers","store","createStore","compose","applyMiddleware","thunk","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7c212b54.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport './UserPicture.css'\r\n\r\nfunction UserPicture({ picture, name, styles }) {\r\n\r\n    return (\r\n        <>\r\n            {picture ? \r\n                <div className=\"user-picture\" style={{backgroundImage: `url(${picture})`, ...styles}}></div> :\r\n                name && <div className=\"user-picture text-uppercase\" style={{...styles}}>{name[0]}</div>\r\n            } \r\n        </>                                   \r\n    )\r\n}\r\n\r\nexport default UserPicture","export const API_URL = 'https://collections-itransition.herokuapp.com'","export const GET_USER = 'GET_USER'\r\n\r\nexport const SET_USER = 'SET_USER'\r\n\r\nexport const RESET_USER = 'RESET_USER'\r\n\r\nexport const GET_GOOGLE_USER = 'GET_GOOGLE_USER'\r\n\r\nexport const IS_LOGIN = 'IS_LOGIN'\r\n\r\nexport const DELETE_USER = 'DELETE_USER'\r\n\r\nexport const SET_ADMIN = 'SET_ADMIN'\r\n\r\nexport const REMOVE_ADMIN = 'REMOVE_ADMIN'\r\n\r\nexport const BLOCK_USER = 'BLOCK_USER'\r\n\r\nexport const UNBLOCK_USER = 'UNBLOCK_USER'\r\n\r\nexport const SET_ERROR = 'SET_ERROR'\r\n\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\r\n\r\nexport const SET_ITEM = 'SET_ITEM'\r\n\r\nexport const GET_ITEM = 'GET_ITEM'\r\n\r\nexport const GET_COLLECTION = 'GET_COLLECTION'\r\n\r\nexport const SORT_COLLECTION = 'SORT_COLLECTION'\r\n\r\nexport const CHANGE_ASCENDING = 'CHANGE_ASCENDING'\r\n\r\nexport const GET_HOME = 'GET_HOME'\r\n\r\nexport const SET_SEARCH = 'SET_SEARCH'\r\n\r\nexport const SWITCH_LANG = 'SWITCH_LANG'\r\n\r\nexport const GET_ALLCOLLECTIONS = 'GET_ALLCOLLECTIONS'\r\n\r\nexport const START_LOADING_PAGE = 'START_LOADING_PAGE'\r\n\r\nexport const END_LOADING_PAGE = 'END_LOADING_PAGE'\r\n\r\nexport const SET_NOTIFY = 'SET_NOTIFY'\r\n\r\nexport const ERROR_CLEARALL = 'ERROR_CLEARALL'\r\n\r\nexport const START_LOADING_COLLECTIONS = 'START_LOADING_COLLECTIONS' \r\n\r\nexport const END_LOADING_COLLECTIONS = 'END_LOADING_COLLECTIONS' \r\n\r\nexport const START_LOADING_COLLECTION = 'START_LOADING_COLLECTION' \r\n\r\nexport const END_LOADING_COLLECTION = 'END_LOADING_COLLECTION' ","import Axios from 'axios'\r\nimport { API_URL } from '../config'\r\n\r\nimport { GET_USER, SET_USER, RESET_USER, SET_ERROR, DELETE_USER, \r\n    SET_ADMIN, REMOVE_ADMIN, BLOCK_USER, UNBLOCK_USER, \r\n    CLEAR_ERROR, SET_ITEM, GET_COLLECTION, GET_ITEM, SORT_COLLECTION, \r\n    GET_HOME, SET_SEARCH, SWITCH_LANG, GET_ALLCOLLECTIONS, START_LOADING_PAGE, \r\n    END_LOADING_PAGE, ERROR_CLEARALL, SET_NOTIFY, START_LOADING_COLLECTIONS, END_LOADING_COLLECTIONS } from \"./types\";\r\n\r\n\r\nexport function clearErrorAll() {\r\n    return {\r\n        type: ERROR_CLEARALL,\r\n        payload: {\r\n            error: '',\r\n            notify: false,\r\n            loading: false\r\n        }\r\n    }        \r\n}\r\n\r\nexport function setNotify(state) {\r\n    return {\r\n        type: SET_NOTIFY,\r\n        payload: state\r\n    }\r\n}\r\n\r\nexport function getAllCollections(id) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({type: START_LOADING_COLLECTIONS})\r\n            const response = await Axios.get(`${API_URL}/api/collections/`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n            dispatch({\r\n                type: GET_ALLCOLLECTIONS,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({type: END_LOADING_COLLECTIONS})\r\n        }\r\n    }\r\n}\r\n\r\nexport function switchLang(lang) {\r\n    return async (dispatch, getState) => {\r\n        const token = getState().userData.userData.token\r\n\r\n        if(!token) {\r\n            dispatch({\r\n                type: SWITCH_LANG,\r\n                payload: lang\r\n            })\r\n\r\n            localStorage.setItem('lang', lang)\r\n        }\r\n\r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/switchLang`, {\r\n                lang\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': token\r\n                }\r\n            })\r\n    \r\n            dispatch({\r\n                type: SWITCH_LANG,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function setSearch(searchText) {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get(`${API_URL}/api/item/search`, {\r\n                params: {\r\n                    searchText\r\n                }\r\n            })\r\n\r\n            localStorage.setItem('search-items', JSON.stringify(response.data))\r\n            localStorage.setItem('search-text', searchText)\r\n\r\n            dispatch({\r\n                type: SET_SEARCH,\r\n                payload: {\r\n                    items: response.data,\r\n                    searchText\r\n                }\r\n            })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}\r\n\r\nexport function getHome(firstLoad) {\r\n    return async (dispatch, getState) => {\r\n        if(firstLoad)\r\n            dispatch(startLoadingPage())\r\n        try {\r\n            if(getState().error.error) {\r\n                return\r\n            }\r\n\r\n            const response = await Axios.get(`${API_URL}/api/user/home`)\r\n\r\n            dispatch({\r\n                type: GET_HOME,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            if(firstLoad)\r\n                dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function sortCollection(key) {\r\n    return {\r\n        type: SORT_COLLECTION,\r\n        payload: key\r\n    }\r\n}\r\n\r\nexport function getCollection(id) {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            if(getState().error.error) {\r\n                return\r\n            }\r\n\r\n            if(!getState().collection.collection.collection) {\r\n                dispatch(startLoadingPage()) \r\n            } else if(getState().collection.collection.collection._id !== id) {\r\n                dispatch(startLoadingPage()) \r\n            }           \r\n\r\n            const response = await Axios.get(`${API_URL}/api/collections/collection`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_COLLECTION,\r\n                payload: response.data\r\n            })            \r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n}\r\n\r\nexport function setUser(user) {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: SET_USER,\r\n            payload: user\r\n        })\r\n    }\r\n}\r\n\r\nexport function setItem(item) {\r\n    return {\r\n        type: SET_ITEM,\r\n        payload: item\r\n    }\r\n}\r\n\r\nexport function getItem(id) {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await Axios.get(`${API_URL}/api/item/`, {\r\n                params: {\r\n                    id\r\n                }\r\n            })\r\n\r\n            dispatch({\r\n                type: GET_ITEM,\r\n                payload: response.data\r\n            })\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n}\r\n\r\nexport function blockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/block`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: BLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: BLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function deleteUser(token, users) {\r\n    return async dispatch => {\r\n        users.forEach(async (id) => {\r\n            try {\r\n                await Axios.delete(`${API_URL}/api/user/delete`, {\r\n                    params: {\r\n                        id\r\n                    },\r\n                    headers: {\r\n                        'x-auth-token': token        \r\n                        }\r\n                    }\r\n                )\r\n                \r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: DELETE_USER\r\n                })\r\n            }\r\n        })\r\n        \r\n        dispatch({\r\n            type: DELETE_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setAdmin(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/setAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: SET_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: SET_ADMIN\r\n        })\r\n    }\r\n}\r\n\r\nexport function unblockUser(token, users) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/unblock`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: UNBLOCK_USER\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: UNBLOCK_USER\r\n        })\r\n    }\r\n}\r\n\r\nexport function setError(error) {\r\n    let text = ''\r\n\r\n    if(error.response) {\r\n        text = error.response.data.message || error.response.data.error.message\r\n    }\r\n    else text = 'Connection error. Please try again later:('\r\n\r\n    return {\r\n        type: SET_ERROR,\r\n        payload: text\r\n    }\r\n}\r\n\r\nexport function clearError() {\r\n    return {\r\n            type: CLEAR_ERROR,\r\n            payload: ''\r\n        }\r\n}\r\n\r\nexport function startLoadingPage() {\r\n    return {\r\n        type: START_LOADING_PAGE\r\n    }\r\n}\r\n\r\nexport function endLoadingPage() {\r\n    return {\r\n        type: END_LOADING_PAGE\r\n    }\r\n}\r\n\r\nexport function removeAdmin(token, users, err) {\r\n    return dispatch => {\r\n        users.forEach(async (id) => {            \r\n            try {\r\n                await Axios.post(`${API_URL}/api/user/removeAdmin`, {id}, {\r\n                    headers: {\r\n                        'x-auth-token': token\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n                dispatch({\r\n                    type: REMOVE_ADMIN\r\n                })\r\n            } \r\n        }) \r\n\r\n        dispatch({\r\n            type: REMOVE_ADMIN,\r\n        })\r\n    }\r\n}\r\n\r\nexport function isLogin() {\r\n    return localStorage.getItem('token') || sessionStorage.getItem('token')\r\n}\r\n\r\nexport function resetUser() {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: RESET_USER,\r\n            payload: {\r\n                token: undefined,\r\n                user: {\r\n                    lang: 'en'\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function getUser() {\r\n    return async dispatch => {\r\n        const token = localStorage.getItem('token') || sessionStorage.getItem('token')\r\n\r\n        if(!token){\r\n            resetUser()\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const tokenRes = await Axios.post(\r\n            `${API_URL}/api/user/verifyToken`,\r\n            null,\r\n            { headers: { \"x-auth-token\": token } }\r\n            )\r\n\r\n            if (tokenRes.data) {\r\n            const userRes = await Axios.get(`${API_URL}/api/user/`, {\r\n                headers: { \"x-auth-token\": token },\r\n            });\r\n            \r\n            dispatch({ \r\n                type: GET_USER,\r\n                payload: {\r\n                    token,\r\n                    user: userRes.data\r\n                }\r\n            })\r\n            }\r\n        } catch (error) {\r\n            dispatch(setError(error.response && error.response.data ? (error.response.data.message || error.response.data) : ''))\r\n        }\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\nimport { isLogin, resetUser, setSearch } from '../../redux/actions'\r\n\r\nimport './Header.scss'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Header(props){\r\n    const { userData } = props\r\n    const { searchText } = useSelector(state => state.search)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const [searchTextInput, setSearchTextInput] = useState(searchText)\r\n\r\n    useEffect(() => {\r\n        setSearchTextInput(searchText)\r\n    }, [searchText])\r\n\r\n    const logout = () => {\r\n        dispatch(resetUser())    \r\n\r\n        localStorage.removeItem('token')\r\n        sessionStorage.removeItem('token')\r\n\r\n        window.location.reload()\r\n    }\r\n\r\n    const onSearch = (e) => {\r\n        e.preventDefault()\r\n\r\n        if(searchTextInput.trim()) {\r\n            dispatch(setSearch(searchTextInput))\r\n        }\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <nav className=\"navbar navbar-expand-md navbar-light bg-light\">\r\n                <Link className=\"navbar-brand\" to=\"/\">{lang.Header.collections[userData.user.lang]}</Link>\r\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarsExample02\" aria-controls=\"navbarsExample02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span className=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n\r\n                <div className=\"collapse navbar-collapse\" id=\"navbarsExample02\">\r\n                    <ul className=\"navbar-nav mr-auto\">\r\n                        <li className=\"nav-item active\">\r\n                            <Link className=\"nav-link\" to=\"/\">{lang.Header.home[userData.user.lang]}</Link>\r\n                        </li>\r\n                    </ul>\r\n                    <form className=\"form-inline\" id=\"item-search\" onSubmit={onSearch}>\r\n                        <input className=\"form-control w-100\" value={searchTextInput} onChange={(e) => setSearchTextInput(e.target.value)} type=\"text\" placeholder=\"Search\"/>\r\n                        <span onClick={onSearch}><Icon.Search/></span>\r\n                    </form>\r\n                    {!dispatch(isLogin) && !userData.token?\r\n                    <div className=\"d-flex flex-column ml-md-3 align-items-md-center\">\r\n                        <Link to=\"/login\">{lang.Header.logIn[userData.user.lang]}</Link>\r\n                        <Link to=\"/register\">{lang.Header.register[userData.user.lang]}</Link>\r\n                    </div> :\r\n                    <div className=\"d-flex flex-column ml-md-3\">\r\n                        <div className=\"btn-group\">\r\n                            {userData.token ? <button type=\"button\" className={`btn dropdown-toggle bg-dark${!userData.user.userPhoto && ' text-light'}`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                            </button> :\r\n                            <button type=\"button\" className={`btn dropdown-toggle`} data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                <div style={{background: 'grey'}}></div>\r\n                            </button>}\r\n                            <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                {userData.user && <button className=\"dropdown-item\" onClick={() => history.push(`/profile?id=${userData.user.id}`)}>{userData.user.displayName}</button>}\r\n                                <button className=\"dropdown-item\" onClick={() => logout()}>{lang.Header.logOut[userData.user.lang]}</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    }\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Header)","import React from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport { switchLang } from '../../redux/actions'\r\n\r\nimport './Footer.scss'\r\n\r\nfunction Footer(props) {\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <footer className=\"footer py-3 bg-light mt-3\">\r\n            <div className=\"container d-flex justify-content-end\">\r\n                <select className=\"form-control select-lang\" value={props.userData.user.lang} onChange={(e) => dispatch(switchLang(e.target.value))}>\r\n                    <option value=\"ru\">ru</option>\r\n                    <option value=\"en\">en</option>\r\n                </select>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Footer)","import React, { useState, useEffect } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\nimport Axios from 'axios'\r\nimport { getCollection, getItem } from '../../redux/actions'\r\nimport { API_URL } from '../../config'\r\n\r\nfunction ItemLike({ likes, id, homeAction }) {\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const [liked, setLiked] = useState(false)\r\n    const [likesNumber, setLikesNumber] = useState(0)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        setLiked((userData.user && likes.usersId.findIndex(e => e === `${userData.user.id}`)) >= 0)\r\n        setLikesNumber(likes.number)\r\n    }, [likes, userData])\r\n\r\n    async function toggleLike() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/like`, {\r\n                itemId: id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            if(typeof homeAction === 'function') {\r\n                homeAction()\r\n            }  \r\n            else {\r\n                dispatch(getCollection(collection._id))\r\n                dispatch(getItem(id))\r\n            }\r\n     \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <span onClick={toggleLike} style={{cursor: 'pointer'}} className=\"ml-auto\">\r\n                {liked ? \r\n                <Icon.HeartFill className=\"item-liked\"/>\r\n                : <Icon.Heart className=\"item-unliked\"/>} {likesNumber}\r\n            </span>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ItemLike","import React from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './MainPicture.scss'\r\n\r\nfunction MainPicture({ picture, className, styles }) {\r\n    return (\r\n        <div className={className}>\r\n            {picture ? \r\n            <div className=\"main-picture\" style={{backgroundImage: `url(${picture})`, ...styles}}>\r\n            </div>:\r\n            <div className=\"main-picture\"  style={styles}>\r\n                <Icon.Image size={30}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MainPicture","import React, { useRef } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport $ from 'jquery'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\n\r\nimport Like from './ItemLike'\r\nimport MainPicture from '../mainPicture/MainPicture'\r\n\r\nimport { getItem, setItem } from '../../redux/actions'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport './Item.scss'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Item(props) {\r\n    const { author, year, title, _id, picture, collection_id } = props.itemProps\r\n    const likes = props.itemProps.likes\r\n    const { homeAction } = props\r\n\r\n    const location = useLocation()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function toCollection(e) {\r\n        dispatch(getItem(_id))\r\n\r\n        if(location.pathname === '/collection') {\r\n            return \r\n        }\r\n\r\n        history.push(`/collection?collection_id=${collection_id}`)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card border item\" \r\n            style={{width: '12rem'}}\r\n            >\r\n                <MainPicture picture={picture} title={title} styles={{height: 100}} className=\"card-img-top\"/>\r\n                <div className=\"card-body\" onClick={(e) => toCollection(e)} data-toggle=\"modal\" data-target=\"#item\" style={{cursor: 'pointer'}}>\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <ul className=\"list-group list-group-flush\">\r\n                        {author &&\r\n                        <li className=\"list-group-item\">{lang.Item.author[userData.user.lang]}: {author}</li>}\r\n                        {year && \r\n                        <li className=\"list-group-item\">{lang.Item.date[userData.user.lang]}: {new Date(year).toLocaleDateString()}</li>}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"d-flex card-footer\">\r\n                    {location.pathname === '/collection' \r\n                    && (userData.user.userRole === 'admin' || collection.owner === userData.user.id) &&\r\n                    <span \r\n                        style={{cursor: 'pointer'}}\r\n                        data-toggle=\"modal\"\r\n                        data-target=\"#editItem\"\r\n                        onClick={(e) => {\r\n                            dispatch(setItem({...props.itemProps}))                           \r\n                        }}\r\n                    >\r\n                        {lang.Item.edit[userData.user.lang]}\r\n                    </span>\r\n                    }\r\n                    <Like likes={likes} id={_id} homeAction={homeAction}/>\r\n                </div>\r\n            </div>      \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport './Slider.scss'\r\n\r\nimport Item from '../items/Item'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction LastAdded({ lastAdded }){\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex justify-content-center pb-5 pt-5\">\r\n                <Item itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {lastAdded.length > 0 && \r\n            <>\r\n                <h2>Last added</h2>\r\n                <Swiper\r\n                navigation\r\n                pagination={{ clickable: true }}\r\n                spaceBetween={50}\r\n                slidesPerView={1}\r\n                breakpoints={{\r\n                    576: {\r\n                        slidesPerView: 2\r\n                    },\r\n                    768: {\r\n                        slidesPerView: 3\r\n                    },\r\n                    1200: {\r\n                        slidesPerView: 4\r\n                    }\r\n                }}\r\n                >\r\n                    {lastAdded.map(carouselItem)}\r\n                </Swiper>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(LastAdded)","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Scrollbar } from 'swiper';\r\n\r\nimport './Tags.scss'\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\nimport { setSearch } from '../../redux/actions';\r\n\r\nSwiperCore.use([Scrollbar]);\r\n\r\nfunction Tags({ tags }){\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function searchTag(tag){\r\n        dispatch(setSearch(tag))\r\n\r\n        history.push('/search')\r\n    }\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} onClick={() => searchTag(e.text)}>\r\n                <div className=\"border text-center rounded bg-light text-dark tag\" style={{cursor: 'pointer'}}>\r\n                    {e.text}\r\n                </div>        \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-2 mb-2\">\r\n            {tags.length > 0 &&\r\n            <Swiper\r\n            spaceBetween={50}\r\n            slidesPerView={2}\r\n            scrollbar={{ draggable: true }}\r\n            className=\"d-flex justify-content-center pb-3\"\r\n            breakpoints={{\r\n                576: {\r\n                    slidesPerView: 4\r\n                },\r\n                768: {\r\n                    slidesPerView: 5\r\n                },\r\n                992: {\r\n                    slidesPerView: 6\r\n                },\r\n                1200: {\r\n                    slidesPerView: 8\r\n                }\r\n            }}\r\n            >\r\n                {tags.map(carouselItem)}\r\n            </Swiper>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(Tags)","import React, { useRef } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport $ from 'jquery'\r\nimport {  useDispatch, useSelector } from 'react-redux'\r\n\r\nimport Like from './ItemLike'\r\nimport MainPicture from '../mainPicture/MainPicture'\r\n\r\nimport { getItem, setItem } from '../../redux/actions'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Item(props) {\r\n    const { author, year, title, _id, picture, collection_id } = props.itemProps\r\n    const likes = props.itemProps.likes\r\n    const { homeAction } = props\r\n\r\n    const location = useLocation()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const card = useRef()\r\n\r\n    const history = useHistory()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    function hover() {\r\n        $(card.current).toggleClass('border-primary')\r\n    }\r\n\r\n    function toCollection(e) {\r\n        dispatch(getItem(_id))\r\n\r\n        history.push(`/collection?collection_id=${collection_id}`)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"row w-100 justify-content-center\">\r\n                <div className=\"d-flex row col-8 bg-light border rounded\">\r\n                    <div className=\"d-flex flex-column col-md-6 justify-content-between p-2 order-md-1 order-2\">\r\n                        <div className=\"d-flex flex-column text-center\">\r\n                            <h4>{title}</h4>\r\n                            <div className=\"text-left mt-3\">\r\n                                <ul className=\"list-group\">\r\n                                    {author && <li className=\"list-group-item\">Author: {author}</li>}\r\n                                    {year && <li className=\"list-group-item\">Date: {new Date(year).toLocaleDateString()}</li>}\r\n                                </ul>\r\n                            </div>   \r\n                        </div>\r\n                        <div className=\"d-flex justify-content-between mt-1\">\r\n                            <button className=\"btn btn-primary\" onClick={toCollection}>View item</button>\r\n                            <Like likes={likes} id={_id}/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 p-2 p-md-0 order-1 order-md-2\">\r\n                        <MainPicture picture={picture}/>\r\n                    </div>\r\n                </div>\r\n            </div>     \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import React, { useCallback } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport SwiperCore, { Navigation, Pagination, A11y } from 'swiper'\r\n\r\nimport 'swiper/swiper.scss'\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\nimport HomeItem from '../items/HomeItem'\r\nimport { getHome } from '../../redux/actions'\r\n\r\nSwiperCore.use([Navigation, Pagination, A11y])\r\n\r\nfunction MostLike({ mostLike }){\r\n    const dispatch = useDispatch()\r\n\r\n    const carouselItem = (e, i) => {\r\n        return (\r\n            <SwiperSlide key={`slide-${i}`} className=\"d-flex pb-5 pt-5 justify-content-center\">\r\n                <HomeItem itemProps={e} homeAction={like}/>    \r\n            </SwiperSlide>\r\n        )\r\n        \r\n    }\r\n\r\n    const like = useCallback(() => {\r\n        dispatch(getHome())\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {mostLike.length > 0 && \r\n            <>\r\n            <h2>Most like</h2>\r\n            <Swiper\r\n            navigation\r\n            pagination={{ clickable: true }}\r\n            spaceBetween={50}\r\n            slidesPerView={1}\r\n            >\r\n                {mostLike.map(carouselItem)}\r\n            </Swiper>\r\n        </>    \r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.home;\r\n\r\nexport default connect(mapStateToProps, null)(MostLike)","import React from 'react'\r\nimport './Spinner.scss'\r\n\r\nfunction Spinner(){\r\n    return (\r\n        <div className=\"spinner d-flex w-100 justify-content-center align-items-center\">\r\n            <div className=\"spinner-grow text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner","import React, { useCallback, useEffect } from 'react'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { clearErrorAll, getHome, startLoading } from '../../redux/actions'\r\n\r\nimport LastAdded from '../homeSections/LastAdded'\r\nimport Tags from '../homeSections/Tags'\r\nimport MostLike from '../homeSections/MostLike'\r\n\r\nimport lang from '../../lang.json'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nfunction Home(props){\r\n    const { loading } = useSelector(state => state.error)\r\n    const home = useSelector(state => state.home)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(clearErrorAll())\r\n        dispatch(getHome(true))\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            dispatch(getHome())\r\n        }, 2000)\r\n        \r\n        return () => clearInterval(interval)\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {!loading &&\r\n            <>\r\n                <Tags/>\r\n                <div className=\"row text-center\">\r\n                    <div className=\"col-12\">\r\n                        <LastAdded/>\r\n                    </div>\r\n                    <div className=\"col-12 most-like\">\r\n                        <MostLike/>\r\n                    </div>\r\n                </div>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Home)","import { useState } from 'react'\r\n\r\nexport default function useInputValue(field, placeholder, name, style){\r\n    const [value, setValue] = useState('');\r\n\r\n    return {\r\n        bind: {\r\n            value,\r\n            type: field,\r\n            style,\r\n            id: `${name || field}Input`,\r\n            className: 'form-control mb-2',\r\n            placeholder: placeholder || field,\r\n            name: name || field,\r\n            onChange: event => setValue(event.target.value),\r\n            required: true\r\n        },\r\n        clear: () => setValue(''),\r\n        value: () => value\r\n    }\r\n}","import React, { Component } from 'react';\r\n\r\nimport Icon24LogoVK from '@vkontakte/icons/dist/24/logo_vk_color';\r\n\r\nconst styles = {\r\n    btn: {\r\n        backgroundColor: 'rgb(255, 255, 255)',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        color: 'rgba(0, 0, 0, 0.54)',\r\n        boxShadow: 'rgba(0, 0, 0, 0.24) 0px 2px 2px 0px, rgba(0, 0, 0, 0.24) 0px 0px 1px 0px',\r\n        padding: 0,\r\n        borderRadius: 2,\r\n        border: '1px solid transparent',\r\n        fontSize: 14,\r\n        fontWeight: 500,\r\n        fontFamily: 'Roboto, sans-serif'\r\n    },\r\n    div: {\r\n        background: 'rgb(255, 255, 255)',\r\n        padding: 10,\r\n        borderRadius: 2\r\n    },\r\n    span: {\r\n        padding: '10px 10px 10px 0px',\r\n        fontWeight: 500\r\n    }\r\n}\r\n\r\nexport default class VkAuth extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isLoaded: false,\r\n            isProcessing: false,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.sdkLoaded();\r\n        this.asyncInit();\r\n        this.loadSdkAsync();\r\n    }\r\n\r\n    asyncInit() {\r\n        const { apiId } = this.props;\r\n        window.vkAsyncInit = () => {\r\n        window.VK.init({ apiId });\r\n        this.setState({ isLoaded: true });\r\n        };\r\n    }\r\n\r\n    sdkLoaded() {\r\n        this.setState({ isLoaded: true });\r\n    }\r\n\r\n    loadSdkAsync() {\r\n        const el = document.createElement('script');\r\n        el.type = 'text/javascript';\r\n        el.src = 'https://vk.com/js/api/openapi.js?';\r\n        el.async = true;\r\n        el.id = 'vk-sdk';\r\n        document.getElementsByTagName('head')[0].appendChild(el);\r\n    }\r\n\r\n    checkLoginState = (response) => {\r\n        this.setState({ isProcessing: false });\r\n\r\n        this.props.callback(response);\r\n    };\r\n\r\n    handleClick = () => {\r\n        if (!this.state.isLoaded || this.state.isProcessing || this.props.disabled) {\r\n        return;\r\n        }\r\n        this.setState({ isProcessing: true });\r\n        window.VK.Auth.login(this.checkLoginState);\r\n    };\r\n\r\n    render() {\r\n        const { disabled, callback, apiId, containerStyle, ...buttonProps } = this.props;\r\n        return (\r\n        <button\r\n            {...buttonProps}\r\n            onClick={this.handleClick}\r\n            style={styles.btn}>\r\n            <div style={styles.div}>    \r\n                <Icon24LogoVK height={18}/>\r\n            </div>\r\n            <span style={styles.span}>\r\n                Login\r\n            </span>\r\n        </button >\r\n        );\r\n    }\r\n}","import React, { createRef, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\nimport { GoogleLogin } from 'react-google-login'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\n\r\nimport VkAuth from './VkAuth';\r\nimport { setUser } from '../../redux/actions'\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Login(props) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password')\r\n    const remember = createRef(false)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token) \r\n        history.push('/')\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && resVk.session && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n        \r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/login`, {email: email.value(), password: password.value(), idToken, vkId})\r\n             dispatch(setUser((response.data))) \r\n             if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n             history.push('/')\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">      \r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"form-signin\" onSubmit={(e) => login(e)}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">{lang.logIn.signIn[userData.user.lang]}</h1>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">{lang.logIn.emailAdress[userData.user.lang]}</label>\r\n                        <input {...email.bind} autoFocus/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">{lang.logIn.password[userData.user.lang]}</label>\r\n                        <input {...password.bind}/>\r\n                        <div className=\"checkbox mb-3\">\r\n                            <label>\r\n                                <input type=\"checkbox\" value=\"remember-me\" ref={remember}/> {lang.logIn.rememberMe[userData.user.lang]}\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">{lang.logIn.signIn[userData.user.lang]}</button>\r\n                    </form>       \r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Login);","import React, { useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { GoogleLogin } from 'react-google-login'\r\nimport { connect, useDispatch, useSelector } from 'react-redux'\r\n\r\nimport useInputValue from '../../helpers/useInputValue'\r\nimport { setUser } from '../../redux/actions'\r\nimport VkAuth from './VkAuth'\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Register(props) {\r\n    const email = useInputValue('email', 'Email adress')\r\n    const password = useInputValue('password', 'Password')\r\n    const passwordCheck = useInputValue('password', 'Confirm password', 'passwordCheck')\r\n    const name = useInputValue('text', 'Name', 'displayName')\r\n    const history = useHistory();\r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    if(userData.token)\r\n        history.push('/')\r\n\r\n    async function register(e) {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n            await Axios.post(`${API_URL}/api/user/register`, {\r\n                displayName: name.value(),\r\n                email: email.value(), \r\n                password: password.value(),\r\n                passwordCheck: passwordCheck.value(),\r\n            })\r\n    \r\n            history.push('/login')        \r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response.data.error.message)\r\n        }\r\n    }\r\n\r\n    async function login(e, resGoogle, resVk) {\r\n        if(e)\r\n            e.preventDefault()\r\n\r\n        setErrorLoading(false)\r\n        setErrorMessage('Loading...')\r\n\r\n        const idToken = resGoogle && resGoogle.tokenId\r\n        const checked = false;\r\n        const vkId = resVk && {\r\n            email: resVk.session.user.id,\r\n            displayName: `${resVk.session.user.first_name} ${resVk.session.user.last_name}`\r\n        }\r\n\r\n        try {\r\n            const response = await Axios.post(`${API_URL}/api/user/login`, {email: email.value(), password: password.value(), idToken, vkId})\r\n\r\n            dispatch(setUser((response.data))) \r\n\r\n            if(checked){\r\n                localStorage.setItem('token', response.data.token)\r\n            }\r\n            else sessionStorage.setItem('token', response.data.token)\r\n\r\n            history.push('/')\r\n        } catch (error) {\r\n            setErrorLoading(true)\r\n            setErrorMessage('')\r\n            setErrorMessage(error.response ? error.response.data.error.message : 'Connection error. Please try again later:(')\r\n        }     \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {errorMessage && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n            <div className=\"d-flex justify-content-center\">\r\n                <div className=\"text-center w-50\">\r\n                    <form className=\"needs-validation\" onSubmit={register}>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">{lang.Register.signUp[userData.user.lang]}</h1>\r\n                        <div>\r\n                            <label htmlFor=\"namelInput\" className=\"sr-only\">{lang.Register.name[userData.user.lang]}</label>\r\n                            <input {...name.bind} autoFocus/>\r\n                        </div>\r\n                        <label htmlFor=\"emailInput\" className=\"sr-only\">{lang.Register.emailAddress[userData.user.lang]}</label>\r\n                        <input {...email.bind}/>\r\n                        <label htmlFor=\"passwordInput\" className=\"sr-only\">{lang.Register.password[userData.user.lang]}</label>\r\n                        <input {...password.bind}/>\r\n                        <label htmlFor=\"passwordCheckInput\" className=\"sr-only\">{lang.Register.passwordConfirm[userData.user.lang]}</label>\r\n                        <input {...passwordCheck.bind}/>\r\n                        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">{lang.Register.signUp[userData.user.lang]}</button>\r\n                    </form>\r\n                    <div className=\"d-flex mt-3\">\r\n                        <div className=\"mr-1\">\r\n                            <GoogleLogin \r\n                                clientId=\"327702379277-a035t5hfkakgfb0dt3111c7eiio2458p.apps.googleusercontent.com\"\r\n                                buttonText=\"Login\"\r\n                                onSuccess={(e) => login(null, e)}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <VkAuth apiId=\"7722772\" callback={(e) => login(null, null, e)}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Register);","import React, { useCallback } from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport './FileInput.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction FileInput({ picture, setPicture }) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const onDrop = useCallback((acceptedFiles) => {\r\n        acceptedFiles.forEach((file) => {\r\n            const reader = new FileReader()          \r\n\r\n            reader.readAsDataURL(file)\r\n\r\n            reader.onload = () => {\r\n                setPicture(reader.result)\r\n            }\r\n        })\r\n        \r\n    }, [setPicture])\r\n\r\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({maxFiles: 1, accept: 'image/jpeg, image/png', onDrop});\r\n    \r\n    return (\r\n        <div className=\"d-flex flex-column w-100\">   \r\n            <div {...getRootProps()} \r\n            className=\"d-flex justify-content-center align-items-center border border-primary w-100 p-3 rounded  drag-zone\"\r\n            style={{height: `${isDragActive ? 70 : 50}px`}}>\r\n                <input {...getInputProps()} />\r\n                <span className=\"text-primary\">{isDragActive ? \r\n                <Icon.Upload size={30}/> :\r\n                lang.FileInput.dragAndDrop[userData.user.lang]}</span>\r\n            </div>\r\n            {picture && \r\n            <aside className=\"mt-1\">\r\n                <h5>Preview</h5>\r\n                <img src={picture} className=\"img-fluid rounded\" width=\"100\" alt=\"example\"/>\r\n            </aside>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileInput","import React, { useState } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\nimport { setError, endLoadingPage, startLoadingPage, setNotify, clearErrorAll, getAllCollections } from '../../redux/actions'\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddCollectionModal.css'\r\nimport { START_LOADING_COLLECTION, END_LOADING_COLLECTION } from '../../redux/types'\r\n\r\n\r\nfunction AddCollectionModal(params) {\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const location = useLocation()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [topic, setTopic] = useState('Books')\r\n    const [description, setDescription] = useState('')\r\n    const [author, setAuthor] = useState(false)\r\n    const [comments, setComments] = useState(true)\r\n    const [year, setYear] = useState(false)\r\n    const [picture, setPicture] = useState('')\r\n \r\n    console.log('Add: ' + author);\r\n\r\n    const id = new URLSearchParams(location.search).get('id')\r\n\r\n    async function addCollection() {\r\n        dispatch(clearErrorAll())\r\n        dispatch({\r\n            type: START_LOADING_COLLECTION\r\n        })\r\n        dispatch(setNotify(true))\r\n        try {  \r\n            await Axios.post(`${API_URL}/api/collections/upload`, {\r\n                owner: id,\r\n                title,\r\n                topic,\r\n                description,\r\n                author,\r\n                comments,\r\n                year,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })  \r\n            \r\n            setPicture('')\r\n            setAuthor(false)\r\n            setComments(true)\r\n            setTopic('Books')\r\n            setTitle('')\r\n            setYear(false)\r\n            setDescription('')\r\n\r\n            dispatch(getAllCollections(id))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch({\r\n                type: END_LOADING_COLLECTION\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>  \r\n            <div className=\"modal fade\" id=\"addCollection\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>   \r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddCollectionModal.collectionSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddCollectionModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} className=\"form-control\" placeholder={lang.AddCollectionModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">{lang.AddCollectionModal.topic[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <select className=\"custom-select\" value={topic} id=\"inputGroupSelect01\" onChange={(e) => setTopic(e.target.value)}>\r\n                                        <option value=\"Books\">Books</option>\r\n                                        <option value=\"Alcohol\">Alcohol</option>\r\n                                        <option value=\"CS:GO Skins\">CS:GO Skins</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddCollectionModal.description[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <textarea className=\"form-control\" value={description} onChange={(e) => setDescription(e.target.value)} aria-label=\"With textarea\"></textarea>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={comments} onChange={(e) => setComments(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddCollectionModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={author} onChange={(e) => setAuthor(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddCollectionModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input defaultChecked={year} onChange={(e) => setYear(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddCollectionModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddCollectionModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={addCollection}>{lang.AddCollectionModal.save[userData.user.lang]}</button>\r\n                            </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddCollectionModal","import React from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport Modal from './AddCollectionModal'\r\n\r\nimport './BtnAddCollection.scss'\r\n\r\nfunction BtnAddCollection({ styles }) {\r\n    return (\r\n        <>\r\n            <div className=\"card add-collection bg-light text-primary\" data-toggle=\"modal\" data-target=\"#addCollection\" style={{width: '12rem', ...styles}}>\r\n                <div className=\"card-body d-flex justify-content-center align-items-center\" style={{height: '15rem'}}>\r\n                    <span><Icon.PlusCircle height={'50px'} width={'50px'}/></span>\r\n                </div>\r\n            </div>\r\n\r\n            <Modal/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BtnAddCollection","import React from 'react'\r\n\r\nexport default function SpinnerComponent() {\r\n    return (\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n        </div> \r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport MainPicture from '../mainPicture/MainPicture'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\nimport { clearErrorAll, endLoadingPage, getAllCollections, getCollection, setError, setNotify, startLoadingPage } from '../../redux/actions'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { title, topic, description, picture, _id, owner } = props \r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()\r\n\r\n    function editCollection() {\r\n        dispatch(getCollection(_id))\r\n    }\r\n\r\n    async function deleteCollection() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch(startLoadingPage())\r\n            dispatch(setNotify(true))\r\n            await Axios.delete(`${API_URL}/api/collections/delete`, {\r\n                params: {\r\n                    id: _id\r\n                },\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getAllCollections(owner))\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card\">\r\n                <MainPicture picture={picture} />\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{title}</h5>\r\n                    <h6 className=\"card-subtitle mb-2 text-muted\">{topic}</h6>\r\n                    <ReactMarkdown source={description}/>\r\n                </div>\r\n                <div className=\"card-footer d-flex align-items-center justify-content-between\">\r\n                    <Link to={`/collection?collection_id=${_id}`} className=\"btn btn-primary\">{lang.CollectionCard.explore[userData.user.lang]}</Link>\r\n                    {(userData.user && (userData.user.id === owner || userData.user.userRole === 'admin')) &&\r\n                    <div className=\"dropdown dropup\">\r\n                        <span id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" style={{cursor: 'pointer'}}>\r\n                            <Icon.ThreeDotsVertical/>\r\n                        </span>\r\n                        <div className=\"dropdown-menu dropdown-menu-left\" aria-labelledby=\"dropdownMenuButton\">\r\n                            <button className=\"dropdown-item\" type=\"button\" onClick={deleteCollection}><Icon.TrashFill className=\"text-danger\"/> Delete</button>\r\n                            <button className=\"dropdown-item\" type=\"button\" data-toggle=\"modal\" data-target=\"#editCollection\" onClick={editCollection}><Icon.PencilFill/> Edit</button>\r\n                        </div>\r\n                    </div> \r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React, { createRef, useEffect, useState } from 'react'\r\nimport Axios from 'axios'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\nimport './AddCollectionModal.css'\r\n\r\nimport lang from '../../lang.json'\r\nimport { getAllCollections } from '../../redux/actions'\r\n\r\nfunction AddCollectionModal({ id }) {\r\n    const closeModal = createRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [topic, setTopic] = useState('Books')\r\n    const [description, setDescription] = useState('')\r\n    const [author, setAuthor] = useState(false)\r\n    const [comments, setComments] = useState(true)\r\n    const [year, setYear] = useState(false)\r\n    const [picture, setPicture] = useState('')\r\n\r\n    useEffect(() => {\r\n        if(collection){\r\n            setTitle(collection.title)\r\n            setTopic(collection.topic)\r\n            setDescription(collection.description)\r\n            setAuthor(collection.author)\r\n            setComments(collection.comments)\r\n            setYear(collection.year)\r\n            setPicture(collection.picture)\r\n        }\r\n    }, [collection])\r\n\r\n    async function editCollection() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/collections/edit`, {\r\n                picture,\r\n                topic,\r\n                author,\r\n                comments,\r\n                year,\r\n                description,\r\n                title,\r\n                id: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getAllCollections(id))\r\n            closeModal.current.click()\r\n        } catch (error) {\r\n            \r\n        }        \r\n    }\r\n\r\n    return (\r\n        <>           \r\n            <div className=\"modal fade\" id=\"editCollection\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>   \r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddCollectionModal.collectionSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddCollectionModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} className=\"form-control\" placeholder={lang.AddCollectionModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">{lang.AddCollectionModal.topic[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <select className=\"custom-select\" value={topic} id=\"inputGroupSelect01\" onChange={(e) => setTopic(e.target.value)}>\r\n                                        <option value=\"Books\">Books</option>\r\n                                        <option value=\"Alcohol\">Alcohol</option>\r\n                                        <option value=\"CS:GO Skins\">CS:GO Skins</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddCollectionModal.description[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <textarea className=\"form-control\" value={description} onChange={(e) => setDescription(e.target.value)} aria-label=\"With textarea\"></textarea>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={comments} onChange={(e) => setComments(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddCollectionModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input defaultChecked={author} onChange={(e) => setAuthor(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddCollectionModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input defaultChecked={year} onChange={(e) => console.log(e.target.checked)} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddCollectionModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" ref={closeModal}>{lang.AddCollectionModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={editCollection}>{lang.AddCollectionModal.save[userData.user.lang]}</button>\r\n                            </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddCollectionModal","import React, { useCallback, useEffect } from 'react'\r\n\r\nimport SpinnerComponent from '../spinner/SpinnerComponent'\r\nimport CardCollection from './CardCollection'\r\nimport './CollectionsItems.scss'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getAllCollections } from '../../redux/actions'\r\nimport EditModal from './EditCollectionModal'\r\n\r\nfunction CollectionsItems(props) {\r\n    const { id } = props \r\n    const dispatch = useDispatch()\r\n\r\n    const { collections, loading } = useSelector(state => state.allCollections)\r\n\r\n    useEffect(() => {\r\n        dispatch(getAllCollections(id))    \r\n    }, [dispatch, id])\r\n\r\n    return (\r\n        <>\r\n            {loading && \r\n            <div className=\"text-center mt-2\">\r\n                <SpinnerComponent/>\r\n            </div>\r\n            }\r\n            {collections.length && !loading && \r\n            <div className=\"d-flex collections-container flex-wrap justify-content-center  mt-3\">\r\n                {collections.map((e) => (\r\n                    <CardCollection key={e._id} {...e}/>\r\n                ))}\r\n                <EditModal id={id}/>\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollectionsItems","import React, { useState, useEffect } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport { useSelector, connect, useDispatch } from 'react-redux'\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport { API_URL } from '../../config'\r\nimport UserPicture from '../userPicture/UserPicture' \r\nimport AddBtn from '../collection/BtnAddCollection'\r\nimport AddModal from '../collection/AddCollectionModal'\r\n\r\n\r\nimport './Profile.scss'\r\n\r\nimport lang from '../../lang.json'\r\nimport { clearErrorAll, endLoadingPage, setError, startLoadingPage } from '../../redux/actions'\r\nimport CollectionsItems from '../collection/CollectionsItems'\r\n\r\nfunction Profile({ userData }) {\r\n    const { loading } = useSelector(state => state.error)\r\n    const { collections } = useSelector(state => state.allCollections) \r\n    const [userProfile, setUserProfile] = useState({});  \r\n    const location = useLocation();\r\n    const id = new URLSearchParams(location.search).get('id')\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        const getProfileData = async () => {\r\n            dispatch(clearErrorAll())\r\n            dispatch(startLoadingPage())\r\n            console.log(id)\r\n\r\n            try {\r\n                const response = await Axios.get(`${API_URL}/api/user/profile`, {\r\n                    params: {\r\n                        id \r\n                    }\r\n                })\r\n                setUserProfile(response.data)\r\n            } catch (error) {\r\n                dispatch(setError(error))\r\n            }\r\n            finally {\r\n                dispatch(endLoadingPage())\r\n            }\r\n        };\r\n\r\n        getProfileData()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    return (\r\n        <>\r\n            {loading && !userProfile.user && <Spinner/>}\r\n            {userProfile.user && \r\n            <>\r\n                <div className=\"d-flex mt-3 align-items-center flex-md-row flex-column\" style={{gap: '3rem'}}>\r\n                    <div className=\"d-flex flex-column\">\r\n                        <div className=\"bg-light text-center p-3\" style={{borderRadius: 10}}>\r\n                            <UserPicture picture={userProfile.user.userPhoto} name={userProfile.user.displayName} styles={{width: 180, height: 180, fontSize: '5rem'}}/>\r\n                            <h4>{userProfile.user.displayName}</h4>\r\n                            <span>{userProfile.user.userRole}</span>\r\n                        </div>\r\n                        {userData.user.userRole === 'admin' && <div className=\"bg-light text-center p-3 mt-1\" style={{borderRadius: 10}}>\r\n                            <Link to=\"/admin\" className=\"btn btn-primary\">Admin panel</Link>\r\n                        </div>}\r\n                    </div>\r\n                    <div className=\"bg-light p-3 w-100\" style={{borderRadius: 10}}>\r\n                        <h2>About</h2>\r\n                        <ul className=\"list-group list-group-flush\">\r\n                            <li className=\"list-group-item\">Email: {userProfile.user.email}</li>\r\n                            <li className=\"list-group-item\">Register date: {new Date(parseFloat(userProfile.user.registerDate)).toLocaleDateString()}</li>\r\n                            <li className=\"list-group-item\">Number of collections: {collections.length}</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                {(userData.user.userRole === 'admin' || userData.user.id === id) &&\r\n                <div className=\"text-center mt-2\">\r\n                    <AddBtn styles={{width: '100%'}}/>\r\n                    <AddModal/>\r\n                </div>\r\n                }\r\n                <CollectionsItems id={id}/>\r\n            </>\r\n            }    \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData\r\n\r\nexport default connect(mapStateToProps, null)(Profile)","import React from 'react';\r\nimport { useDispatch, connect } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { isLogin } from '../../redux/actions';\r\n\r\nconst PrivateRoute = ({component: Component, ...rest}) => {\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <Route {...rest} render={props => (\r\n            dispatch(isLogin) ?\r\n                <Component {...props} />\r\n            : <Redirect to={{pathname: \"/login\", state: {nextPathname: props.location.pathname}}}/>\r\n        )} />\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute)","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Axios from 'axios'\r\nimport * as Icon from 'react-bootstrap-icons';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Spinner from '../spinner/Spinner'\r\nimport { deleteUser, setAdmin, removeAdmin, blockUser, unblockUser } from '../../redux/actions';\r\nimport { API_URL } from '../../config'\r\n\r\nfunction Users() {\r\n    const [users, setUsers] = useState([])\r\n    const [flack, setFlack] = useState(false)\r\n    const [actionsUsers, setActionsUsers] = useState([])\r\n    const [errorLoading, setErrorLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const { userData } = useSelector(state => state.userData)\r\n    const error = useSelector(state => state.error)\r\n    const dispatch = useDispatch()\r\n    const keys = ['displayName', 'email', 'registerDate', 'userRole']\r\n\r\n    useEffect(() => {\r\n        const getUsers = async () => {\r\n            if(!userData.token)\r\n                return;\r\n            try {\r\n                const response = await Axios.get(`${API_URL}/api/user/users`, {\r\n                    headers: {\r\n                        'x-auth-token': userData.token \r\n                    }\r\n                })\r\n      \r\n                if(response.data) {\r\n                    setUsers(response.data)\r\n                }\r\n    \r\n            } catch (error) {\r\n                setErrorMessage(error.response ? error.response.data.message : 'Connection error. Please try again later:(')\r\n                setErrorLoading(true)\r\n            }\r\n        }\r\n\r\n        getUsers()\r\n    }, [userData, users.length])\r\n\r\n    useEffect(() => {\r\n        setErrorMessage(error.error.message)\r\n        error.error.message && setErrorLoading(true)\r\n    }, [error])\r\n\r\n    function compare(a, b, key, flack) {\r\n        if (a[key] === b[key]) return 0;\r\n        if (a[key] > b[key]) return flack ? 1 : -1; \r\n        if (a[key] < b[key]) return flack ? -1 : 1;\r\n    }\r\n\r\n    function sort(e, key) {\r\n        setFlack(!flack)\r\n        setUsers(users.sort((a, b) => compare(a, b, key, flack)).slice())\r\n        setTimeout(() => {\r\n            e.target.blur()\r\n        }, 100)\r\n    }\r\n\r\n    function userForAction(e, id) {\r\n        if(e.target.checked)\r\n            setActionsUsers([...actionsUsers, id])\r\n        else setActionsUsers(actionsUsers.filter(e => e !== id))\r\n    }\r\n\r\n    function action(title) {\r\n        switch (title) {\r\n            case 'delete':\r\n                dispatch(deleteUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'setAdmin':\r\n                dispatch(setAdmin(userData.token, actionsUsers))\r\n                break;\r\n            case 'removeAdmin':\r\n                dispatch(removeAdmin(userData.token, actionsUsers, error))\r\n                break; \r\n            case 'block':\r\n                dispatch(blockUser(userData.token, actionsUsers))\r\n                break;\r\n            case 'unblock':  \r\n                dispatch(unblockUser(userData.token, actionsUsers))\r\n                break;  \r\n            default:\r\n                break;\r\n        }       \r\n\r\n        setUsers([])\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {(!users.length || errorMessage) && <Spinner errorLoading={errorLoading} errorMessage={errorMessage}/>}\r\n\r\n        {users.length ? \r\n        <>\r\n            <div className=\"d-flex flex-column w-100 mb-2\">\r\n                <div className=\"d-flex flex-xl-row flex-column align-items-center\">\r\n                    <div className=\"btn-group btn-group-sm-sm mr-xl-auto mb-xl-0 mb-1\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'displayName')}>Name</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'email')}>Email</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'registerDate')}>Register date</button>\r\n                        <button type=\"button\" className=\"btn btn-secondary\" onClick={(e) => sort(e, 'userRole')}>User role</button>\r\n                    </div>\r\n                    <div className=\"btn-group btn-group-sm-sm\" role=\"group\" aria-label=\"Basic example\">\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('delete')}>Delete <Icon.TrashFill/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('block')}>Blocked <Icon.LockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('unblock')}>Unblocked <Icon.UnlockFill style={{marginBottom: 4}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('setAdmin')}>Set admin <Icon.PersonPlusFill style={{marginBottom: 3}}/></button>\r\n                        <button type=\"button\" className=\"btn btn-secondary btn-danger\" disabled={!actionsUsers.length} onClick={() => action('removeAdmin')}>Remove admin <Icon.PersonXFill style={{marginBottom: 3}}/></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <table className=\"table table-bordered table-hover table-responsive-md\">\r\n                <caption>List of users</caption>\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th>Select</th>\r\n                        <th>Name</th>\r\n                        <th>Email</th>\r\n                        <th>Regiser Date</th>\r\n                        <th>User role</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map((e, i) => {\r\n                        return (\r\n                        <tr key={i} className={`${e['blocked'] && 'table-danger'}${actionsUsers.findIndex(user => user === e['_id']) > -1 ? ' table-primary' : ''}`}>\r\n                            <td>\r\n                                <div className=\"text-center\">\r\n                                    <input id={e['_id']} type=\"checkbox\" readOnly checked={actionsUsers.findIndex(user => user === e['_id']) > -1} className=\"form-check-label\" onClick={(event) => userForAction(event, e['_id'])}/>\r\n                                </div>\r\n                            </td>\r\n                            {keys.map((key, ind) => (\r\n                                <td key={ind}>{key === 'displayName' ?\r\n                                <Link className=\"text-decoration-none\" to={`/profile?id=${e['_id']}`}>{e['blocked'] ? \r\n                                    <> {e[key]} <Icon.LockFill style={{marginBottom: 4}}/> </> : \r\n                                    e[key]}</Link> :\r\n                                e[key]}</td>\r\n                            ))}            \r\n                        </tr>\r\n                        )\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </>:<></>}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Users)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Users from '../users/Users'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Admin(props){\r\n    return (\r\n        <>\r\n            {props.userData.token && props.userData.user.userRole !== 'admin' ? \r\n            <h1>{lang.Admin.permission[props.userData.user.lang]} :(</h1> :\r\n            <Users/>} \r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Admin)","import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\nimport Axios from 'axios'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { getCollection, setNotify, clearErrorAll, startLoadingPage, setError, endLoadingPage } from '../../redux/actions'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddItem.scss'\r\n\r\nconst baseTagifySettings = {\r\n    blacklist: [\"xxx\", \"yyy\", \"zzz\"],\r\n    maxTags: 5,\r\n    placeholder: \"type something\",\r\n    dropdown: {\r\n      enabled: 0\r\n    }\r\n  }\r\n\r\nfunction AddItemModal(props) {\r\n    const {author, year, comments, id} = props\r\n\r\n    const tagifyRef = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [itemAuthor, setItemAuthor] = useState('')\r\n    const [itemDate, setItemDate] = useState('')\r\n    const [tagifySettings] = useState([])\r\n    const [tagifyProps, setTagifyProps] = useState({})\r\n    const [picture, setPicture] = useState('')\r\n\r\n    \r\n    const fetchItems = useCallback(() => {\r\n        dispatch(getCollection(id))            \r\n    }, [id, dispatch]) \r\n\r\n    async function addItem() {\r\n        try {\r\n            dispatch(clearErrorAll())\r\n            dispatch(startLoadingPage())\r\n            dispatch(setNotify(true))\r\n\r\n            await Axios.post(`${API_URL}/api/item/add`, {\r\n                title,\r\n                date: itemDate,\r\n                author: itemAuthor,\r\n                tags: tagifyRef.current.value,\r\n                id,\r\n                picture\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            fetchItems()\r\n        } catch (error) {\r\n            dispatch(setError(error))\r\n        }\r\n        finally {\r\n            dispatch(endLoadingPage())\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getTags = async () => {\r\n            try {\r\n                setTagifyProps({loading: true})\r\n\r\n                const response = await Axios.get(`${API_URL}/api/item/tags`)\r\n\r\n                setTagifyProps((lastProps) => ({\r\n                    ...lastProps,\r\n                    whitelist: response.data.map(e => e.text),\r\n                    loading: false\r\n\r\n                }))\r\n            } catch (error) {\r\n                \r\n            }\r\n            \r\n        }\r\n        getTags()\r\n    }, [])\r\n\r\n    const settings = {\r\n        ...baseTagifySettings,\r\n        ...tagifySettings\r\n      }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"addItem\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\" style={{position: 'relative'}}>\r\n                        <>\r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.AddItemModal.itemSettings[userData.user.lang]}</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={comments} type=\"checkbox\" className=\"custom-control-input\" id=\"commentsCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"commentsCheck\">{lang.AddItemModal.comments[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch mr-2\">\r\n                                        <input disabled defaultChecked={author} type=\"checkbox\" className=\"custom-control-input\" id=\"authorCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"authorCheck\">{lang.AddItemModal.author[userData.user.lang]}</label>\r\n                                    </div>\r\n                                    <div className=\"custom-control custom-switch\">\r\n                                        <input disabled defaultChecked={year} type=\"checkbox\" className=\"custom-control-input\" id=\"yearCheck\"/>\r\n                                        <label className=\"custom-control-label\" htmlFor=\"yearCheck\">{lang.AddItemModal.date[userData.user.lang]}</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddItemModal.title[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={title} \r\n                                    onChange={(e) => setTitle(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder={lang.AddItemModal.title[userData.user.lang]} aria-label=\"Title\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <FileInput picture={picture} setPicture={setPicture}/>\r\n                                </div>\r\n                                {author && \r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\" id=\"basic-addon1\">{lang.AddItemModal.author[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    value={itemAuthor}\r\n                                    onChange={(e) => setItemAuthor(e.target.value)}\r\n                                    type=\"text\" className=\"form-control\" placeholder={lang.AddItemModal.author[userData.user.lang]} aria-label=\"Author\" aria-describedby=\"basic-addon1\"/>\r\n                                </div>\r\n                                }\r\n                                {year &&\r\n                                <div className=\"input-group mb-3\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">{lang.AddItemModal.date[userData.user.lang]}</span>\r\n                                    </div>\r\n                                    <input \r\n                                    onChange={(e) => setItemDate(e.target.valueAsNumber)} \r\n                                    type=\"date\" className=\"form-control\" placeholder={lang.AddItemModal.date[userData.user.lang]} aria-label=\"Date\"/>\r\n                                </div>\r\n                                }\r\n                                <div className=\"input-group mb-3\">\r\n                                    <Tags\r\n                                    tagifyRef={tagifyRef}\r\n                                    settings={settings}\r\n                                    {...tagifyProps}\r\n                                    placeholder={lang.AddItemModal.tags['en']}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">{lang.AddItemModal.close[userData.user.lang]}</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={addItem}>{lang.AddItemModal.addItem[userData.user.lang]}</button>\r\n                            </div> \r\n                        </>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default AddItemModal","import React, { useRef } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport AddModal from './AddItemModal'\r\n\r\nimport './AddItem.scss'\r\n\r\nfunction AddItem(props) {\r\n    const card = useRef()\r\n\r\n    return (\r\n        <>\r\n            <div ref={card} className=\"card add-item bg-light\" data-toggle=\"modal\" data-target=\"#addItem\" style={{width: '12rem'}}>\r\n                <div className=\"card-body d-flex justify-content-center align-items-center\" style={{height: '15rem'}}>\r\n                    <span><Icon.PlusCircle height={'50px'} width={'50px'}/></span>\r\n                </div>\r\n            </div>\r\n\r\n            <AddModal {...props}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddItem","import React, {  } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport * as Icon from 'react-bootstrap-icons'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\nimport { API_URL } from '../../config'\r\nimport './Comment.css'\r\nimport { getItem } from '../../redux/actions'\r\n\r\nfunction Comment(props) {\r\n    const { userPhoto, userId, date, comment, modal, userName, owner, _id } = props \r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    async function removeComment() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/removeComment`, {\r\n                commentId: _id,\r\n                itemId: item._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n            \r\n            dispatch(getItem(item._id))\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center comment-header justify-content-between p-1 border border-primary\">\r\n                    <div className=\"d-flex align-items-center\"> \r\n                        <Link \r\n                        onClick={() => modal.current.click()}\r\n                        to={`/profile?id=${userId}`}\r\n                        style={{textDecoration: 'none'}}\r\n                        >\r\n                        <UserPicture picture={userPhoto} name={userName}/>    \r\n                        </Link>\r\n                        <span className=\"pl-1\">{userName}</span>\r\n                    </div>\r\n                    <div>\r\n                        {new Date(date).toLocaleDateString()}\r\n                        {(userData.user && (userId=== owner || userData.user.userRole === 'admin')) && <span className=\"ml-1\" style={{cursor: 'pointer'}} onClick={removeComment}><Icon.X/></span>}\r\n                    </div>\r\n                </div>  \r\n                <div className=\"border p-2\">\r\n                    <ReactMarkdown source={comment}/>\r\n                </div> \r\n            </div> \r\n    )\r\n}\r\n\r\nexport default Comment","import React, { useState, useRef } from 'react'\r\nimport Axios from 'axios'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport UserPicture from '../userPicture/UserPicture'\r\n\r\nimport { getItem } from '../../redux/actions'\r\nimport { API_URL } from '../../config'\r\n\r\nimport './AddComment.css'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction AddComment(props) {\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const commentBtn = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [comment, setComment] = useState('')\r\n\r\n    function confirmKey(e) {\r\n        if(e.code === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault()\r\n            addComment()\r\n        }\r\n    }\r\n\r\n    async function addComment() {\r\n        if(!comment.trim()) {\r\n            return\r\n        }\r\n\r\n        setComment('')\r\n\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/comment`, {\r\n                comment,\r\n                itemId: item._id,\r\n                collectionId: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getItem(item._id))\r\n            commentBtn.current.blur()\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {userData.user && \r\n            <div className=\"d-flex comment flex-column w-100\">\r\n                <div className=\"d-flex align-items-center p-1 border border-primary\">\r\n                    <UserPicture picture={userData.user.userPhoto} name={userData.user.displayName}/>\r\n                    <span className=\"pl-1\">{userData.user.displayName}</span>\r\n                </div>  \r\n                <div className=\"d-flex border p-2\">\r\n                    <textarea placeholder={lang.AddComment.leaveComment[userData.user.lang]} value={comment} \r\n                    onChange={(e) => setComment(e.target.value)} \r\n                    maxLength=\"200\" \r\n                    className=\"form-control mr-1\"\r\n                    onKeyPress={confirmKey}></textarea>\r\n                    <button className=\"btn btn-outline-primary btn-comment\" disabled={!comment.length} ref={commentBtn} onClick={addComment}>\r\n                        <Icon.ArrowRightCircle/>\r\n                    </button>\r\n                </div> \r\n            </div> \r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddComment","import React, { useRef, useEffect } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport { useSelector, connect, useDispatch } from 'react-redux'\r\n\r\nimport '@yaireo/tagify/dist/tagify.css'\r\n\r\nimport './ModalItem.css'\r\n\r\nimport Comment from '../comment/Comment'\r\nimport AddComment from '../comment/AddComment'\r\nimport Like from './ItemLike'\r\n\r\nimport { getItem } from '../../redux/actions'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction ModalItem(props) {\r\n    const { item } = useSelector(state => state.item)\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const closeModal = useRef()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(async () => {\r\n            if(!item._id) {\r\n                return\r\n            }\r\n            dispatch(getItem(item._id))\r\n        }, 3000)\r\n\r\n        return () => clearInterval(interval)\r\n    })\r\n\r\n    return (\r\n        <div className=\"modal fade\" ref={closeModal} tabIndex=\"-1\" id=\"item\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">{item.title}</h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        {item.picture &&\r\n                        <img src={item.picture} className=\"img-fluid rounded\" alt={item.title}/>}\r\n                        <ul className=\"list-group mt-1\">\r\n                            {item.author && <li className=\"list-group-item\">{lang.ModalItem.author[userData.user.lang]}: {item.author}</li>}\r\n                            {item.year && <li className=\"list-group-item\">{lang.ModalItem.date[userData.user.lang]}: {new Date(item.year).toLocaleDateString()}</li>}\r\n                        </ul>\r\n                        {item.tags && item.tags.length > 0 && <Tags value={item.tags} readOnly className=\"mt-1\"/>}\r\n                        {item.likes &&\r\n                        <div className=\"d-flex justify-content-end\">\r\n                             <Like likes={item.likes} id={item._id}/>\r\n                        </div>}\r\n                    </div>\r\n                    <div className=\"d-flex modal-footer justify-content-start\">\r\n                        {collection.comments &&\r\n                        <>\r\n                            <AddComment />\r\n                            {item.comments ? item.comments.map((e,i) => <Comment key={i} {...e} modal={closeModal} owner={userData.user && userData.user.id}/>) :\r\n                            <p>Loading...</p>}\r\n                        </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.item;\r\n\r\nexport default connect(mapStateToProps, null)(ModalItem)","import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport Tags from '@yaireo/tagify/dist/react.tagify'\r\nimport '@yaireo/tagify/dist/tagify.css'\r\nimport Axios from 'axios'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { getCollection } from '../../redux/actions'\r\n\r\nimport FileInput from '../fileInput/FileInput'\r\nimport { API_URL } from '../../config'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nimport './AddItem.scss'\r\n\r\nconst baseTagifySettings = {\r\n    blacklist: [\"xxx\", \"yyy\", \"zzz\"],\r\n    maxTags: 5,\r\n    placeholder: \"type something\",\r\n    dropdown: {\r\n      enabled: 0\r\n    }\r\n  }\r\n\r\nfunction EditItemModal(props) {\r\n    const closeModal = useRef()\r\n    const tagifyRef = useRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { item } = useSelector(state => state.item)\r\n    const { collection } = useSelector(state => state.collection.collection)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [itemAuthor, setItemAuthor] = useState('')\r\n    const [itemDate, setItemDate] = useState('')\r\n    const [tagifySettings] = useState([])\r\n    const [tagifyProps, setTagifyProps] = useState({})\r\n    const [picture, setPicture] = useState('')\r\n\r\n    useEffect(() => {\r\n        if(Object.keys(item).length) {\r\n            setTitle(item.title)\r\n            setItemAuthor(item.author)\r\n            setItemDate(item.year)\r\n            setPicture(item.picture)\r\n        }\r\n    }, [item])\r\n\r\n    async function saveItem() {\r\n        try {\r\n            await Axios.post(`${API_URL}/api/item/edit`, {\r\n                picture,\r\n                title,\r\n                author: itemAuthor,\r\n                tags: tagifyRef.current.value,\r\n                date: itemDate,\r\n                id: item._id,\r\n                collection_id: collection._id\r\n            }, {\r\n                headers: {\r\n                    'x-auth-token': userData.token\r\n                }\r\n            })\r\n\r\n            dispatch(getCollection(collection._id))\r\n            closeModal.current.click()\r\n        } catch (error) {\r\n            console.log(error.response.data)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getTags = async () => {\r\n            try {\r\n                setTagifyProps({loading: true})\r\n\r\n                const response = await Axios.get(`${API_URL}/api/item/tags`)\r\n\r\n                setTagifyProps((lastProps) => ({\r\n                    ...lastProps,\r\n                    whitelist: response.data.map(e => e.text),\r\n                    loading: false\r\n\r\n                }))\r\n            } catch (error) {\r\n                \r\n            }\r\n            \r\n        }\r\n        getTags()\r\n    }, [])\r\n\r\n    const settings = {\r\n        ...baseTagifySettings,\r\n        ...tagifySettings\r\n      }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"editItem\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n                <div className=\"modal-content\" style={{position: 'relative'}}>\r\n                    <>\r\n                        <div className=\"modal-header\">\r\n                            <h5 className=\"modal-title\" id=\"exampleModalLabel\">{lang.EditItemModal.itemSettings[userData.user.lang]}</h5>\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\" id=\"basic-addon1\">{lang.EditItemModal.title[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                value={title} \r\n                                onChange={(e) => setTitle(e.target.value)}\r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.title[userData.user.lang]} \r\n                                />\r\n                            </div>\r\n                            <div className=\"input-group mb-3\">\r\n                                <FileInput picture={picture} setPicture={setPicture}/>\r\n                            </div>\r\n                            {collection.author && \r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\" id=\"basic-addon1\">{lang.EditItemModal.author[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                value={itemAuthor}\r\n                                onChange={(e) => setItemAuthor(e.target.value)}\r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.author[userData.user.lang]} \r\n                                aria-label=\"Author\" \r\n                                aria-describedby=\"basic-addon1\"/>\r\n                            </div>\r\n                            }\r\n                            {collection.year &&\r\n                            <div className=\"input-group mb-3\">\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">{lang.EditItemModal.date[userData.user.lang]}</span>\r\n                                </div>\r\n                                <input \r\n                                onChange={(e) => setItemDate(e.target.valueAsNumber)} \r\n                                type=\"date\" \r\n                                className=\"form-control\" \r\n                                placeholder={lang.EditItemModal.date[userData.user.lang]} \r\n                                aria-label=\"Date\"\r\n                                value={itemDate ? new Date(itemDate).toISOString().substr(0, 10) : ''}/>\r\n                            </div>\r\n                            }\r\n                            <div className=\"input-group mb-3\">\r\n                                <Tags\r\n                                tagifyRef={tagifyRef}\r\n                                settings={settings}\r\n                                {...tagifyProps}\r\n                                placeholder={lang.EditItemModal.tags['en']}\r\n                                value={item.tags}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" ref={closeModal}>{lang.AddItemModal.close[userData.user.lang]}</button>\r\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={saveItem}>{lang.EditItemModal.saveItem[userData.user.lang]}</button>\r\n                        </div> \r\n                    </>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditItemModal","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport { sortCollection } from '../../redux/actions'\r\nimport { CHANGE_ASCENDING } from '../../redux/types'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Sort() {\r\n    const { sortOptions, collection }  = useSelector(state => state.collection)\r\n    const [selectedSort, setSelectedSort] = useState(sortOptions.key)\r\n    const { userData } = useSelector(state => state.userData)\r\n    const dispatch = useDispatch()  \r\n\r\n    useEffect(() => {\r\n        dispatch(sortCollection(selectedSort.toLowerCase()))\r\n    }, [selectedSort, dispatch])\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center mb-3 w-100 px-2 p-sm-0\">\r\n            <span>{lang.Sort.sort[userData.user.lang]}</span>\r\n            <select className=\"form-control ml-2\" value={selectedSort} id=\"inputGroupSelect01\" onChange={(e) => setSelectedSort(e.target.value)}>\r\n                <option value=\"Title\">{lang.Sort.title[userData.user.lang]}</option>\r\n                <option value=\"Likes\">{lang.Sort.likes[userData.user.lang]}</option>\r\n                {collection.collection.author && <option value=\"Author\">{lang.Sort.author[userData.user.lang]}</option>}\r\n                {collection.collection.year && <option value=\"Date\">{lang.Sort.date[userData.user.lang]}</option>}\r\n                {collection.collection.comments && <option value=\"Comments\">{lang.Sort.comments[userData.user.lang]}</option>}\r\n            </select>\r\n            <span \r\n            className=\"ml-2\" \r\n            onClick={() => dispatch({type: CHANGE_ASCENDING})}\r\n            style={{cursor: 'pointer'}}\r\n            >\r\n                {sortOptions.ascending ? <Icon.SortUp size={20}/> : <Icon.SortDown size={20}/>}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sort","import React, { useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport * as Icon from 'react-bootstrap-icons'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Filter({ filter, setFilter }) {\r\n    const { collection }  = useSelector(state => state.collection.collection)\r\n    const pictureCheck = useRef()\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n\r\n    function reset() {\r\n        const clearObj = {}\r\n\r\n        for (const key in filter) {\r\n            clearObj[key] = key === 'apply' ? filter[key] : undefined\r\n        }\r\n\r\n        pictureCheck.current.checked = false\r\n\r\n        setFilter({...clearObj})\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex align-items-center flex-column mb-3 w-100 px-2 p-sm-0\">\r\n            <button className=\"btn btn-primary mb-2 ml-auto w-100\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                Filters\r\n            </button>\r\n\r\n            <div className=\"collapse w-100\" id=\"collapseExample\">\r\n                <div className=\"card card-body\">\r\n                    <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">{lang.Filter.title[userData.user.lang]}</span>\r\n                        </div>\r\n                        <input value={filter.title || ''} type=\"text\" className=\"form-control\" onChange={(e) => setFilter({...filter, title: e.target.value})} placeholder={lang.Filter.title[userData.user.lang]} aria-describedby=\"basic-addon1\"/>\r\n                    </div>\r\n                    {collection.author && <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">{lang.Filter.author[userData.user.lang]}</span>\r\n                        </div>\r\n                        <input value={filter.author || ''} onChange={(e) => setFilter({...filter, author: e.target.value})} type=\"text\" className=\"form-control\" placeholder={lang.Filter.author[userData.user.lang]} aria-describedby=\"basic-addon1\"/>\r\n                    </div>}\r\n                    {collection.year && <div className=\"d-flex align-items-center mb-3\">\r\n                        <input value={(filter.dateFrom && new Date(filter.dateFrom).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateFrom: new Date(e.target.value)})} className=\"form-control\"/>\r\n                        <span className=\"mx-2\">-</span>\r\n                        <input value={(filter.dateTo && new Date(filter.dateTo).toISOString().substr(0, 10)) || ''} type=\"date\" onChange={(e) => setFilter({...filter, dateTo: new Date(e.target.value)})} className=\"form-control\"/>\r\n                    </div>}\r\n                    <div className=\"form-check mb-3\">\r\n                        <input ref={pictureCheck} onChange={(e) => setFilter({...filter, picture: e.target.checked})} className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\"/>\r\n                        <label className=\"form-check-label\" htmlFor=\"defaultCheck1\">\r\n                        {lang.Filter.picture[userData.user.lang]}\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"d-flex custom-control custom-switch justify-content-end\">\r\n                        <input defaultValue={false} type=\"checkbox\" onChange={(e) => setFilter({...filter, apply: e.target.checked})} className=\"custom-control-input\" id=\"customSwitch1\"/>\r\n                        <label className=\"custom-control-label\" htmlFor=\"customSwitch1\">{lang.Filter.apply[userData.user.lang]}</label>\r\n                    </div>\r\n                    <button className=\"btn btn-danger\" onClick={reset}>{lang.Filter.reset[userData.user.lang]}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React, { useCallback, useEffect, useState } from 'react'\r\nimport { connect, useSelector, useDispatch } from 'react-redux'\r\nimport { useLocation, Link } from 'react-router-dom'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport AddItem from '../items/AddItem'\r\nimport Item from '../items/Item'\r\nimport ViewModal from '../items/ModalItem'\r\nimport EditModal from '../items/EditItemModal'\r\nimport Sort from '../collection/Sort'\r\nimport Filter from '../collection/Filter'\r\nimport Spinner from '../spinner/Spinner'\r\n\r\nimport { clearErrorAll, getCollection } from '../../redux/actions'\r\nimport lang from '../../lang.json'\r\n\r\nimport './Collection.scss'\r\n\r\nfunction Collection(props){\r\n    const [filter, setFilter] = useState({\r\n        apply: false\r\n    })\r\n\r\n    const { userData } = useSelector(state => state.userData)\r\n    const { collection, items } = useSelector(state => state.collection.collection)\r\n    const { sortOptions } = useSelector(state => state.collection)\r\n    const { loading, error, notify } = useSelector(state => state.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const location = useLocation()\r\n    const id = new URLSearchParams(location.search).get('collection_id')\r\n\r\n    useEffect(() => {\r\n        dispatch(clearErrorAll())\r\n        dispatch(getCollection(id))\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        if(!error && !loading) {\r\n            const interval = setInterval(() => {\r\n                dispatch(getCollection(id))\r\n            }, 2000)\r\n\r\n            return () => clearInterval(interval)\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id])\r\n\r\n    function filterOptions(e) {\r\n        if(!filter.apply) {\r\n            return true\r\n        }\r\n\r\n        if(filter.title && filter.title.trim()) {\r\n            const ref = new RegExp(`${filter.title}`, 'gi')\r\n            if(!e.title.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.author && filter.author.trim()) {\r\n            const ref = new RegExp(`${filter.author}`, 'gi')\r\n\r\n            if(!e.author.match(ref)) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        if(filter.dateFrom && filter.dateTo) {\r\n            const current = new Date(e.year)\r\n\r\n            if(current < filter.dateFrom || current > filter.dateTo) {\r\n                return false\r\n            }\r\n        } \r\n\r\n        if(filter.picture && !e.picture) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    function compare(a, b) {\r\n        switch (sortOptions.key) {\r\n            case 'likes':\r\n                if (a.likes.number > b.likes.number) return sortOptions.ascending ? 1 : -1; \r\n                if (a.likes.number === b.likes.number) return 0; \r\n                if (a.likes.number < b.likes.number) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'date':\r\n                if (a['year'] > b['year']) return sortOptions.ascending ? 1 : -1; \r\n                if (a['year'] === b['year']) return 0; \r\n                if (a['year'] < b['year']) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            case 'comments':\r\n                if (a['comments'].length > b['comments'].length) return sortOptions.ascending ? 1 : -1; \r\n                if (a['comments'].length === b['comments'].length) return 0; \r\n                if (a['comments'].length < b['comments'].length) return sortOptions.ascending ? -1 : 1;\r\n                break\r\n            default:\r\n                if (a[sortOptions.key] > b[sortOptions.key]) return sortOptions.ascending ? 1 : -1; \r\n                if (a[sortOptions.key] === b[sortOptions.key]) return 0; \r\n                if (a[sortOptions.key] < b[sortOptions.key]) return sortOptions.ascending ? -1 : 1;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading && <Spinner/>}\r\n            {collection && !loading &&\r\n            <>\r\n                <Link  \r\n                to={`/profile?id=${collection.owner}`}\r\n                >Back to profile</Link>\r\n                <div className=\"d-flex flex-column align-items-center\">\r\n                    <h2>{collection.title}</h2>\r\n                    <h3 className=\"badge badge-primary\">{collection.topic}</h3>\r\n                    <ReactMarkdown source={collection.description}/>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"row\">\r\n                    <Sort/>\r\n                    <Filter filter={filter} setFilter={setFilter}/>\r\n                </div>\r\n                <div className=\"d-flex justify-content-around flex-wrap item-container\">\r\n                    {items.filter(filterOptions).sort(compare).map((e) => <Item key={e._id} itemProps={e} collectionId={id}/>)}\r\n                    {userData.user && (userData.user.id === collection.owner || userData.user.userRole === 'admin') \r\n                    && <AddItem comments={collection.comments} author={collection.author} year={collection.year} id={id}/>}\r\n                    <ViewModal/>\r\n                    <EditModal/>\r\n                </div>\r\n            </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.userData;\r\n\r\nexport default connect(mapStateToProps, null)(Collection)","import React from 'react'\r\nimport { connect, useSelector } from 'react-redux'\r\nimport Item from '../items/Item';\r\n\r\nimport './Search.scss'\r\n\r\nimport lang from '../../lang.json'\r\n\r\nfunction Search(props){\r\n    const { items, searchText } = props\r\n    const { userData } = useSelector(state => state.userData)   \r\n\r\n    return (\r\n        <>\r\n            <div className=\"d-flex flex-wrap search-items-container\">\r\n                {items.length ?\r\n                <div className=\"d-flex flex-column\">\r\n                    <h4>Here's what we found for {searchText}</h4>\r\n                    <div className=\"d-flex flex-wrap\" style={{gap: '2rem'}}>\r\n                        {items.map((e) => <Item itemProps={e} key={e._id}/>)}\r\n                    </div>\r\n                </div>\r\n                :\r\n                'Nothing was found for your request :('}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.search;\r\n\r\nexport default connect(mapStateToProps, null)(Search)","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { clearErrorAll } from '../../redux/actions'\r\n\r\nimport './AlertError.scss'\r\n\r\nfunction AlertError() {\r\n    const { error, loading } = useSelector(state => state.error)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <>\r\n            {!loading && error && <div className=\"alert alert-warning alert-danger fade-in show mt-1\" role=\"alert\">\r\n                {error}\r\n                <button type=\"button\" class=\"close\" aria-label=\"Close\" data-dismiss=\"alert\" onClick={() => dispatch(clearErrorAll())}>\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AlertError","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { clearErrorAll } from '../../redux/actions'\r\nimport SpinnerComponent from '../spinner/SpinnerComponent'\r\n\r\nimport './AlertError.scss'\r\n\r\nfunction AlertStatus() {\r\n    const { loading, error, notify } = useSelector(state => state.error)\r\n    const { loadingCollection } = useSelector(state => state.collection)\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <>\r\n            {notify && !error &&\r\n                <div className=\"alert alert-primary fade-in\" role=\"alert\">\r\n                    {loading || loadingCollection ?\r\n                    <SpinnerComponent/>   \r\n                    : <span>Successfully uploaded</span>}\r\n                    <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={() => dispatch(clearErrorAll())}>\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AlertStatus","import './App.scss';\nimport { useEffect } from 'react'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\nimport { connect, useDispatch } from 'react-redux'\n\nimport Header from './components/layout/Header'\nimport Footer from './components/layout/Footer'\nimport Home from './components/pages/Home'\nimport Login from './components/auth/Login'\nimport Register from './components/auth/Register'\nimport Profile from './components/pages/Profile'\nimport PrivateRoute from './components/routes/PrivateRoute'\nimport Admin from './components/pages/Admin'\nimport Collection from './components/pages/Collection'\nimport Search from './components/pages/Search'\n\nimport { getUser } from './redux/actions';\nimport AlertError from './components/alerts/AlertError';\nimport AlertStatus from './components/alerts/AlertStatus';\n\nfunction App() {\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(getUser())\n  }, [dispatch])\n\n  return (\n      <BrowserRouter>\n          <Header/>         \n          <div className=\"container\">\n            <AlertError/>\n            <AlertStatus/>\n            <Switch>\n                <Route exact path='/' component={Home}/>\n                <Route path=\"/login\" component={Login}/>\n                <Route path=\"/register\" component={Register}/>\n                <Route path=\"/profile:id?\" component={Profile}/>\n                <Route path=\"/collection:collection_id?\" exact component={Collection}/>\n                <Route path=\"/search\" exact component={Search}/>\n                <PrivateRoute path=\"/admin\" component={Admin}/>\n            </Switch>\n          </div>\n          <Footer/>\n      </BrowserRouter>\n  );\n}\n\nconst mapStateToProps = state => state.userData\n\nexport default connect(mapStateToProps, null)(App);\n","import { GET_USER, IS_LOGIN, RESET_USER, SET_USER, DELETE_USER, SET_ADMIN, REMOVE_ADMIN, BLOCK_USER, UNBLOCK_USER, SWITCH_LANG } from \"./types\";\r\n\r\nconst initialState = {\r\n    userData: {\r\n        token: undefined,\r\n        user: {\r\n            lang: localStorage.getItem('lang') || 'en'\r\n        }\r\n    }\r\n}\r\n\r\nexport const userReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData, \r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case SET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case RESET_USER:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                token: action.payload.token,\r\n                user: action.payload.user\r\n                }\r\n            }\r\n        case SWITCH_LANG:\r\n            return {...state, userData: {\r\n                ...state.userData,\r\n                user: {\r\n                    ...state.userData.user,\r\n                    lang: action.payload\r\n                }\r\n                }\r\n            }       \r\n        case DELETE_USER:\r\n            return state\r\n        case SET_ADMIN:\r\n            return state\r\n        case REMOVE_ADMIN:\r\n            return state\r\n        case BLOCK_USER:\r\n            return state\r\n        case UNBLOCK_USER:\r\n            return state\r\n        case IS_LOGIN:\r\n            return state\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_ERROR, CLEAR_ERROR, START_LOADING_PAGE, END_LOADING_PAGE, ERROR_CLEARALL, SET_NOTIFY } from \"./types\"\r\n\r\nconst initialState = {\r\n    error: '',\r\n    notify: false,\r\n    loading: false\r\n}\r\n\r\nexport const errorReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ERROR:\r\n            return {...state, error: action.payload}\r\n        case CLEAR_ERROR:\r\n            return  {...state, error: ''} \r\n        case START_LOADING_PAGE:\r\n            return {...state, loading: true}\r\n        case END_LOADING_PAGE:\r\n            return {...state, loading: false}\r\n        case ERROR_CLEARALL:\r\n            return {...state, ...action.payload}\r\n        case SET_NOTIFY:\r\n            return {...state, notify: action.payload}          \r\n        default:\r\n            return state    \r\n    }\r\n}","import { GET_ITEM, SET_ITEM } from \"./types\";\r\n\r\nconst initialState = {\r\n    item: {}\r\n}\r\n\r\nexport const itemReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }\r\n        case GET_ITEM:\r\n            return {\r\n                ...state, item: action.payload\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_COLLECTION, SORT_COLLECTION, CHANGE_ASCENDING, START_LOADING_COLLECTION, END_LOADING_COLLECTION } from \"./types\";\r\n\r\nconst initialState = {\r\n    collection: {},\r\n    sortOptions: {\r\n        key: 'Date',\r\n        ascending: true\r\n    },\r\n    loadingCollection: false\r\n}\r\n\r\nexport const collectionReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_COLLECTION:\r\n            return {\r\n                ...state, collection: action.payload\r\n            }\r\n        case SORT_COLLECTION:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    key: action.payload\r\n                }\r\n            }\r\n        case CHANGE_ASCENDING:\r\n            return {\r\n                ...state, sortOptions: {\r\n                    ...state.sortOptions,\r\n                    ascending: !state.sortOptions.ascending\r\n                }\r\n            }\r\n        case START_LOADING_COLLECTION: \r\n            return {\r\n                ...state, loadingCollection: true\r\n            }\r\n        case END_LOADING_COLLECTION:\r\n            return {\r\n                ...state, loadingCollection: false\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_HOME } from \"./types\";\r\n\r\nconst initialState = {\r\n    tags: [],\r\n    lastAdded: [],\r\n    mostLike: []\r\n}\r\n\r\nexport const homeReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_HOME: \r\n            return {...state, \r\n                tags: action.payload.tags, \r\n                lastAdded: action.payload.lastAdded,\r\n                mostLike: action.payload.mostLike \r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { SET_SEARCH } from \"./types\";\r\n\r\nconst initialState = {\r\n    items: JSON.parse(localStorage.getItem('search-items')) || {}, \r\n    searchText: localStorage.getItem('search-text') || ''\r\n}\r\n\r\nexport const searchReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_SEARCH:\r\n            return {\r\n                ...state, items: action.payload.items, searchText: action.payload.searchText\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { GET_ALLCOLLECTIONS, START_LOADING_COLLECTIONS, END_LOADING_COLLECTIONS } from \"./types\";\r\n\r\nconst initialState = {\r\n    collections: {},\r\n    loading: false\r\n}\r\n\r\nexport const allCollectionsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_ALLCOLLECTIONS:\r\n            return {\r\n                ...state, collections: action.payload\r\n            }\r\n        case START_LOADING_COLLECTIONS:\r\n            return {\r\n                ...state, loading: true\r\n            }\r\n        case END_LOADING_COLLECTIONS:\r\n            return {\r\n                ...state, loading: false\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from 'redux'\r\n\r\nimport { userReducer } from './userReducer'\r\nimport { errorReducer } from './errorReducer'\r\nimport { itemReducer } from './itemReducer'\r\nimport { collectionReducer } from './collectionReducer'\r\nimport { homeReducer } from './homeReducer'\r\nimport { searchReducer } from './searchReducer'\r\nimport { allCollectionsReducer } from './allCollectionsReducer'\r\n\r\nexport const rootReducer = combineReducers({\r\n    userData: userReducer,\r\n    error: errorReducer,\r\n    item: itemReducer,\r\n    collection: collectionReducer,\r\n    home: homeReducer,\r\n    search: searchReducer,\r\n    allCollections: allCollectionsReducer\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\nimport { applyMiddleware, compose, createStore } from 'redux'\n\nimport './index.css';\nimport App from './App';\nimport { rootReducer } from './redux/rootReducer';\n\nconst store = createStore(rootReducer, compose(\n  applyMiddleware(\n    thunk\n  )\n))\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n        <App/>\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}